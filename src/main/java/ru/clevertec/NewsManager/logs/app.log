2023-06-09 02:37:05,428 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 02:37:05,631 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 29542 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 02:37:05,646 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 02:37:05,651 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 02:37:06,367 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 02:37:06,368 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 02:37:06,368 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 02:37:06,368 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 02:37:06,368 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 02:37:06,368 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 02:37:08,479 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 02:37:08,754 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 263 ms. Found 2 JPA repository interfaces.
2023-06-09 02:37:09,366 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=dc65dc09-986c-304e-a926-6fc06d6f9e80
2023-06-09 02:37:09,613 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 02:37:10,840 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 02:37:10,854 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 02:37:10,856 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 02:37:10,856 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 02:37:11,044 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 02:37:11,046 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4675 ms
2023-06-09 02:37:11,374 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 02:37:11,479 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@71beada8
2023-06-09 02:37:11,481 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 02:37:11,715 INFO l.database [main] Set default schema name to public
2023-06-09 02:37:11,962 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 02:37:13,067 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 02:37:13,179 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 02:37:13,206 INFO l.util [main] UPDATE SUMMARY
2023-06-09 02:37:13,207 INFO l.util [main] Run:                          0
2023-06-09 02:37:13,207 INFO l.util [main] Previously run:               5
2023-06-09 02:37:13,207 INFO l.util [main] Filtered out:                 0
2023-06-09 02:37:13,207 INFO l.util [main] -------------------------------
2023-06-09 02:37:13,207 INFO l.util [main] Total change sets:            5

2023-06-09 02:37:13,209 INFO l.util [main] Update summary generated
2023-06-09 02:37:13,221 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 02:37:13,232 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 02:37:13,233 INFO l.command [main] Command execution complete
2023-06-09 02:37:13,563 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 02:37:13,633 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 02:37:13,636 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 02:37:13,799 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 02:37:14,003 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 02:37:14,061 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@4172c967
2023-06-09 02:37:14,336 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 02:37:15,373 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 02:37:15,488 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 02:37:16,274 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 02:37:17,591 WARN o.s.c.a.AnnotationConfigApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'securityConfig': Requested bean is currently in creation: Is there an unresolvable circular reference?
2023-06-09 02:37:17,596 WARN o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
2023-06-09 02:37:17,596 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 02:37:17,599 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2023-06-09 02:37:17,604 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2023-06-09 02:37:17,606 INFO o.a.c.c.StandardService [main] Stopping service [Tomcat]
2023-06-09 02:37:17,629 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-09 02:37:17,652 ERROR o.s.b.d.LoggingFailureAnalysisReporter [main] 

***************************
APPLICATION FAILED TO START
***************************

Description:

The dependencies of some of the beans in the application context form a cycle:

┌─────┐
|  securityConfig defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]
↑     ↓
|  ru.clevertec.NewsManager.repository.UserManagementClient
↑     ↓
|  org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration
↑     ↓
|  org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration
└─────┘


Action:

Relying upon circular references is discouraged and they are prohibited by default. Update your application to remove the dependency cycle between beans. As a last resort, it may be possible to break the cycle automatically by setting spring.main.allow-circular-references to true.

2023-06-09 02:41:16,737 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 02:41:17,021 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 30564 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 02:41:17,036 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 02:41:17,045 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 02:41:18,239 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 02:41:18,241 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 02:41:18,242 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 02:41:18,242 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 02:41:18,242 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 02:41:18,242 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 02:41:20,918 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 02:41:21,179 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 249 ms. Found 2 JPA repository interfaces.
2023-06-09 02:41:21,776 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 02:41:22,005 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 02:41:23,275 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 02:41:23,290 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 02:41:23,292 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 02:41:23,292 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 02:41:23,490 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 02:41:23,491 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 5244 ms
2023-06-09 02:41:23,829 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 02:41:23,938 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@61836cd9
2023-06-09 02:41:23,941 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 02:41:24,298 INFO l.database [main] Set default schema name to public
2023-06-09 02:41:24,529 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 02:41:25,538 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 02:41:25,623 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 02:41:25,654 INFO l.util [main] UPDATE SUMMARY
2023-06-09 02:41:25,654 INFO l.util [main] Run:                          0
2023-06-09 02:41:25,655 INFO l.util [main] Previously run:               5
2023-06-09 02:41:25,655 INFO l.util [main] Filtered out:                 0
2023-06-09 02:41:25,655 INFO l.util [main] -------------------------------
2023-06-09 02:41:25,655 INFO l.util [main] Total change sets:            5

2023-06-09 02:41:25,658 INFO l.util [main] Update summary generated
2023-06-09 02:41:25,666 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 02:41:25,684 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 02:41:25,686 INFO l.command [main] Command execution complete
2023-06-09 02:41:26,069 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 02:41:26,148 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 02:41:26,152 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 02:41:26,350 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 02:41:26,527 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 02:41:26,573 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@27c827ec
2023-06-09 02:41:27,050 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 02:41:28,142 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 02:41:28,287 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 02:41:28,953 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 02:41:30,283 WARN o.s.c.a.AnnotationConfigApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'securityConfig': Requested bean is currently in creation: Is there an unresolvable circular reference?
2023-06-09 02:41:30,288 WARN o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
2023-06-09 02:41:30,289 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 02:41:30,291 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2023-06-09 02:41:30,298 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2023-06-09 02:41:30,300 INFO o.a.c.c.StandardService [main] Stopping service [Tomcat]
2023-06-09 02:41:30,327 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-09 02:41:30,355 ERROR o.s.b.d.LoggingFailureAnalysisReporter [main] 

***************************
APPLICATION FAILED TO START
***************************

Description:

The dependencies of some of the beans in the application context form a cycle:

┌─────┐
|  securityConfig defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]
↑     ↓
|  ru.clevertec.NewsManager.repository.UserManagementClient
↑     ↓
|  org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration
↑     ↓
|  org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration
└─────┘


Action:

Relying upon circular references is discouraged and they are prohibited by default. Update your application to remove the dependency cycle between beans. As a last resort, it may be possible to break the cycle automatically by setting spring.main.allow-circular-references to true.

2023-06-09 02:43:08,898 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 02:43:09,106 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 31029 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 02:43:09,111 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 02:43:09,121 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 02:43:10,066 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 02:43:10,067 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 02:43:10,068 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 02:43:10,068 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 02:43:10,068 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 02:43:10,068 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 02:43:12,625 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 02:43:12,893 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 259 ms. Found 2 JPA repository interfaces.
2023-06-09 02:43:13,477 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 02:43:13,703 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 02:43:14,949 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 02:43:14,965 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 02:43:14,967 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 02:43:14,967 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 02:43:15,168 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 02:43:15,169 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 5099 ms
2023-06-09 02:43:15,473 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 02:43:15,572 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2dde0a34
2023-06-09 02:43:15,575 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 02:43:15,767 INFO l.database [main] Set default schema name to public
2023-06-09 02:43:16,212 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 02:43:17,144 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 02:43:17,258 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 02:43:17,287 INFO l.util [main] UPDATE SUMMARY
2023-06-09 02:43:17,289 INFO l.util [main] Run:                          0
2023-06-09 02:43:17,289 INFO l.util [main] Previously run:               5
2023-06-09 02:43:17,289 INFO l.util [main] Filtered out:                 0
2023-06-09 02:43:17,289 INFO l.util [main] -------------------------------
2023-06-09 02:43:17,289 INFO l.util [main] Total change sets:            5

2023-06-09 02:43:17,290 INFO l.util [main] Update summary generated
2023-06-09 02:43:17,297 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 02:43:17,311 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 02:43:17,312 INFO l.command [main] Command execution complete
2023-06-09 02:43:17,677 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 02:43:17,739 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 02:43:17,743 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 02:43:17,901 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 02:43:18,067 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 02:43:18,109 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@5b827796
2023-06-09 02:43:18,514 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 02:43:19,657 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 02:43:19,790 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 02:43:20,436 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 02:43:21,698 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 02:43:22,910 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5c866852, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4481a37f, org.springframework.security.web.context.SecurityContextHolderFilter@d3f2b59, org.springframework.security.web.header.HeaderWriterFilter@430e9d37, org.springframework.security.web.authentication.logout.LogoutFilter@4b68d2a6, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@7e56e272, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@65b63277, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@6e323a5d, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@7288afd8, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@7424b1ce, org.springframework.security.web.session.ConcurrentSessionFilter@4f36fc2d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@440dc4f7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5a342baf, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1d21fd5a, org.springframework.security.web.access.ExceptionTranslationFilter@69924070, org.springframework.security.web.access.intercept.AuthorizationFilter@50b4e828]
2023-06-09 02:43:23,670 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 02:43:23,709 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 02:43:23,777 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 17.54 seconds (process running for 19.501)
2023-06-09 02:44:03,349 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 02:44:03,355 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 02:44:03,379 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 24 ms
2023-06-09 02:44:27,275 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-6] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: Connection refused executing GET http://localhost:8084/users/admin
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.RetryableException: Connection refused executing GET http://localhost:8084/users/admin
	at feign.FeignException.errorExecuting(FeignException.java:277)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:112)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.getUserByUsername(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$5(SecurityConfig.java:84)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:549)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:178)
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:498)
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:603)
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:351)
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:373)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1309)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1242)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1128)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1057)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1665)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1589)
	at java.base/java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:529)
	at feign.Client$Default.convertResponse(Client.java:110)
	at feign.Client$Default.execute(Client.java:106)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:102)
	... 67 common frames omitted
2023-06-09 02:44:45,215 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-8] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: Connection refused executing GET http://localhost:8084/users/user
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.RetryableException: Connection refused executing GET http://localhost:8084/users/user
	at feign.FeignException.errorExecuting(FeignException.java:277)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:112)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.getUserByUsername(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$5(SecurityConfig.java:84)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:549)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:178)
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:498)
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:603)
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:351)
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:373)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1309)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1242)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1128)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1057)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1665)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1589)
	at java.base/java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:529)
	at feign.Client$Default.convertResponse(Client.java:110)
	at feign.Client$Default.execute(Client.java:106)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:102)
	... 67 common frames omitted
2023-06-09 02:47:21,739 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-2] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: Connection refused executing GET http://localhost:8084/users/user
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.RetryableException: Connection refused executing GET http://localhost:8084/users/user
	at feign.FeignException.errorExecuting(FeignException.java:277)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:112)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.getUserByUsername(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$5(SecurityConfig.java:84)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:549)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:178)
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:498)
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:603)
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:351)
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:373)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1309)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1242)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1128)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1057)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1665)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1589)
	at java.base/java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:529)
	at feign.Client$Default.convertResponse(Client.java:110)
	at feign.Client$Default.execute(Client.java:106)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:102)
	... 67 common frames omitted
2023-06-09 02:53:16,349 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-5] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.getUserByUsername(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$5(SecurityConfig.java:84)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 03:07:22,245 WARN c.z.h.p.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=13m6s417ms).
2023-06-09 03:22:06,344 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:22:06,426 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 03:22:06,457 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 03:22:30,911 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 03:22:31,216 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 37714 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 03:22:31,218 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 03:22:31,236 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 03:22:32,307 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:22:32,308 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:22:32,309 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:22:32,309 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 03:22:32,309 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:22:32,309 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:22:34,734 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 03:22:35,065 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 316 ms. Found 2 JPA repository interfaces.
2023-06-09 03:22:35,960 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 03:22:36,217 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 03:22:37,866 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 03:22:37,881 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 03:22:37,882 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 03:22:37,882 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 03:22:38,106 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 03:22:38,107 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 5793 ms
2023-06-09 03:22:38,505 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 03:22:38,615 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4b8a0d03
2023-06-09 03:22:38,618 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 03:22:39,152 INFO l.database [main] Set default schema name to public
2023-06-09 03:22:39,568 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 03:22:40,805 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 03:22:40,916 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 03:22:40,957 INFO l.util [main] UPDATE SUMMARY
2023-06-09 03:22:40,958 INFO l.util [main] Run:                          0
2023-06-09 03:22:40,958 INFO l.util [main] Previously run:               5
2023-06-09 03:22:40,958 INFO l.util [main] Filtered out:                 0
2023-06-09 03:22:40,958 INFO l.util [main] -------------------------------
2023-06-09 03:22:40,958 INFO l.util [main] Total change sets:            5

2023-06-09 03:22:40,961 INFO l.util [main] Update summary generated
2023-06-09 03:22:40,967 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 03:22:40,983 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 03:22:40,985 INFO l.command [main] Command execution complete
2023-06-09 03:22:41,484 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 03:22:41,595 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 03:22:41,600 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 03:22:41,891 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:22:42,240 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 03:22:42,324 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@7ed5cc8c
2023-06-09 03:22:42,998 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:22:44,220 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 03:22:44,370 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:22:45,022 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 03:22:46,379 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 03:22:47,247 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@650f4d76, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ee9b7ac, org.springframework.security.web.context.SecurityContextHolderFilter@4b68d2a6, org.springframework.security.web.header.HeaderWriterFilter@5a342baf, org.springframework.security.web.authentication.logout.LogoutFilter@2659225a, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@3bbd9232, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@e13cc49, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@60c95d8, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@56c75b4f, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@6b4b6cd6, org.springframework.security.web.session.ConcurrentSessionFilter@46724526, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7375e6c1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4fdf83bb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@11ae5497, org.springframework.security.web.access.ExceptionTranslationFilter@65bf5c38, org.springframework.security.web.access.intercept.AuthorizationFilter@6f1af8c3]
2023-06-09 03:22:47,984 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 03:22:48,009 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 03:22:48,030 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 19.664 seconds (process running for 21.929)
2023-06-09 03:23:11,534 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 03:23:11,537 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 03:23:11,547 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 10 ms
2023-06-09 03:23:25,031 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-3] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: Cannot invoke "org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken.getPrincipal()" because "authenticationToken" is null
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.lang.NullPointerException: Cannot invoke "org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken.getPrincipal()" because "authenticationToken" is null
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$5(SecurityConfig.java:80)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 03:27:26,778 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:27:26,832 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 03:27:26,862 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 03:27:39,937 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 03:27:40,131 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 38982 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 03:27:40,132 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 03:27:40,134 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 03:27:41,035 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:27:41,037 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:27:41,037 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:27:41,037 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 03:27:41,037 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:27:41,037 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:27:43,352 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 03:27:43,649 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 285 ms. Found 2 JPA repository interfaces.
2023-06-09 03:27:44,330 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 03:27:44,666 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 03:27:46,447 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 03:27:46,463 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 03:27:46,465 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 03:27:46,465 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 03:27:46,684 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 03:27:46,684 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 5644 ms
2023-06-09 03:27:47,018 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 03:27:47,135 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3359c3f6
2023-06-09 03:27:47,138 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 03:27:47,576 INFO l.database [main] Set default schema name to public
2023-06-09 03:27:47,917 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 03:27:48,846 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 03:27:48,939 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 03:27:48,966 INFO l.util [main] UPDATE SUMMARY
2023-06-09 03:27:48,967 INFO l.util [main] Run:                          0
2023-06-09 03:27:48,967 INFO l.util [main] Previously run:               5
2023-06-09 03:27:48,967 INFO l.util [main] Filtered out:                 0
2023-06-09 03:27:48,967 INFO l.util [main] -------------------------------
2023-06-09 03:27:48,967 INFO l.util [main] Total change sets:            5

2023-06-09 03:27:48,968 INFO l.util [main] Update summary generated
2023-06-09 03:27:48,974 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 03:27:48,985 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 03:27:48,986 INFO l.command [main] Command execution complete
2023-06-09 03:27:49,338 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 03:27:49,408 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 03:27:49,412 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 03:27:49,602 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:27:49,785 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 03:27:49,832 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@c19bb2a
2023-06-09 03:27:50,252 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:27:51,353 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 03:27:51,493 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:27:52,168 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 03:27:53,482 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 03:27:54,616 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@56b9a73c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@41576e84, org.springframework.security.web.context.SecurityContextHolderFilter@6f1af8c3, org.springframework.security.web.header.HeaderWriterFilter@4ff2ac2d, org.springframework.security.web.authentication.logout.LogoutFilter@6383ea52, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@4b2164a9, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@11581810, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@49f8b57d, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4481a37f, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@37930f48, org.springframework.security.web.session.ConcurrentSessionFilter@2659225a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3697a307, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6e323a5d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@58084f58, org.springframework.security.web.access.ExceptionTranslationFilter@6bd01b0e, org.springframework.security.web.access.intercept.AuthorizationFilter@74faa12]
2023-06-09 03:27:55,497 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 03:27:55,543 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 03:27:55,575 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 17.713 seconds (process running for 19.638)
2023-06-09 03:28:10,674 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 03:28:10,676 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 03:28:10,694 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 16 ms
2023-06-09 03:28:19,493 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-3] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: Cannot invoke "org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken.getPrincipal()" because "authenticationToken" is null
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.lang.NullPointerException: Cannot invoke "org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken.getPrincipal()" because "authenticationToken" is null
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$5(SecurityConfig.java:77)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 03:28:40,533 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:28:40,563 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 03:28:40,590 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 03:28:59,374 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 03:28:59,776 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 39340 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 03:28:59,778 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 03:28:59,782 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 03:29:01,330 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:29:01,334 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:29:01,335 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:29:01,335 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 03:29:01,335 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:29:01,335 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:29:07,296 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 03:29:07,987 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 667 ms. Found 2 JPA repository interfaces.
2023-06-09 03:29:09,380 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 03:29:09,873 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 03:29:12,660 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 03:29:12,695 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 03:29:12,698 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 03:29:12,698 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 03:29:12,966 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 03:29:12,967 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 11628 ms
2023-06-09 03:29:13,346 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 03:29:13,487 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@54f373d4
2023-06-09 03:29:13,491 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 03:29:13,864 INFO l.database [main] Set default schema name to public
2023-06-09 03:29:14,864 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 03:29:16,273 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 03:29:16,386 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 03:29:16,420 INFO l.util [main] UPDATE SUMMARY
2023-06-09 03:29:16,421 INFO l.util [main] Run:                          0
2023-06-09 03:29:16,421 INFO l.util [main] Previously run:               5
2023-06-09 03:29:16,421 INFO l.util [main] Filtered out:                 0
2023-06-09 03:29:16,421 INFO l.util [main] -------------------------------
2023-06-09 03:29:16,422 INFO l.util [main] Total change sets:            5

2023-06-09 03:29:16,423 INFO l.util [main] Update summary generated
2023-06-09 03:29:16,431 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 03:29:16,448 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 03:29:16,450 INFO l.command [main] Command execution complete
2023-06-09 03:29:16,884 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 03:29:16,964 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 03:29:16,968 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 03:29:17,145 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:29:17,368 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 03:29:17,447 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@6bec566e
2023-06-09 03:29:17,863 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:29:18,915 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 03:29:19,035 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:29:20,186 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 03:29:21,770 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 03:29:22,862 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@11ae5497, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ed5cf29, org.springframework.security.web.context.SecurityContextHolderFilter@596c6c3e, org.springframework.security.web.header.HeaderWriterFilter@7107a4a3, org.springframework.security.web.authentication.logout.LogoutFilter@765cb6c1, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@40557b00, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@172e4d3a, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@74faa12, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@23038621, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@4dc24d88, org.springframework.security.web.session.ConcurrentSessionFilter@11869005, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@13c02cec, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@50b4e828, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7d5fb53a, org.springframework.security.web.access.ExceptionTranslationFilter@3db8bbbe, org.springframework.security.web.access.intercept.AuthorizationFilter@4632d697]
2023-06-09 03:29:23,957 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 03:29:24,001 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 03:29:24,025 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 30.128 seconds (process running for 32.216)
2023-06-09 03:31:48,316 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 03:31:48,319 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 03:31:48,342 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 23 ms
2023-06-09 03:31:48,566 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-1] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: Cannot invoke "org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken.getPrincipal()" because "authenticationToken" is null
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.lang.NullPointerException: Cannot invoke "org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken.getPrincipal()" because "authenticationToken" is null
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$5(SecurityConfig.java:77)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 03:32:05,853 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:32:05,878 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 03:32:05,895 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 03:32:28,336 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 03:32:28,477 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 40221 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 03:32:28,480 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 03:32:28,482 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 03:32:29,250 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:32:29,251 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:32:29,252 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:32:29,252 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 03:32:29,252 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:32:29,252 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:32:31,679 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 03:32:31,960 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 272 ms. Found 2 JPA repository interfaces.
2023-06-09 03:32:32,735 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 03:32:33,252 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 03:32:34,568 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 03:32:34,586 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 03:32:34,587 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 03:32:34,588 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 03:32:34,831 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 03:32:34,832 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 5577 ms
2023-06-09 03:32:35,191 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 03:32:35,316 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3f908bc0
2023-06-09 03:32:35,319 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 03:32:35,606 INFO l.database [main] Set default schema name to public
2023-06-09 03:32:35,952 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 03:32:37,025 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 03:32:37,122 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 03:32:37,147 INFO l.util [main] UPDATE SUMMARY
2023-06-09 03:32:37,148 INFO l.util [main] Run:                          0
2023-06-09 03:32:37,148 INFO l.util [main] Previously run:               5
2023-06-09 03:32:37,148 INFO l.util [main] Filtered out:                 0
2023-06-09 03:32:37,148 INFO l.util [main] -------------------------------
2023-06-09 03:32:37,149 INFO l.util [main] Total change sets:            5

2023-06-09 03:32:37,150 INFO l.util [main] Update summary generated
2023-06-09 03:32:37,160 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 03:32:37,178 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 03:32:37,180 INFO l.command [main] Command execution complete
2023-06-09 03:32:37,566 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 03:32:37,636 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 03:32:37,639 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 03:32:37,822 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:32:38,009 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 03:32:38,070 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@712594f4
2023-06-09 03:32:38,466 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:32:39,764 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 03:32:39,898 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:32:40,570 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 03:32:41,892 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 03:32:43,279 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@58084f58, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@43139322, org.springframework.security.web.context.SecurityContextHolderFilter@4632d697, org.springframework.security.web.header.HeaderWriterFilter@15e8e884, org.springframework.security.web.authentication.logout.LogoutFilter@471021f8, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@4b6b9255, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@bafb3bd, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@5ae6a240, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@728ad254, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@39caf68a, org.springframework.security.web.session.ConcurrentSessionFilter@765cb6c1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@65b63277, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@23195ebe, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@160c47b4, org.springframework.security.web.access.ExceptionTranslationFilter@41862a32, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4b6cd6]
2023-06-09 03:32:44,368 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 03:32:44,408 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 03:32:44,428 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 18.109 seconds (process running for 19.719)
2023-06-09 03:33:41,560 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 03:33:41,562 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 03:33:41,585 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 22 ms
2023-06-09 03:33:49,339 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-3] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: Cannot invoke "org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken.getPrincipal()" because "authenticationToken" is null
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.lang.NullPointerException: Cannot invoke "org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken.getPrincipal()" because "authenticationToken" is null
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$5(SecurityConfig.java:77)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 03:34:42,103 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:34:42,124 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 03:34:42,135 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 03:34:50,295 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 03:34:50,439 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 40809 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 03:34:50,440 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 03:34:50,444 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 03:34:51,082 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:34:51,083 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:34:51,083 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:34:51,083 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 03:34:51,083 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:34:51,083 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:34:53,325 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 03:34:53,582 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 247 ms. Found 2 JPA repository interfaces.
2023-06-09 03:34:54,203 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 03:34:54,424 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 03:34:55,679 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 03:34:55,692 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 03:34:55,694 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 03:34:55,694 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 03:34:55,903 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 03:34:55,904 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4819 ms
2023-06-09 03:34:56,225 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 03:34:56,333 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@57a982f9
2023-06-09 03:34:56,336 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 03:34:56,504 INFO l.database [main] Set default schema name to public
2023-06-09 03:34:56,925 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 03:34:57,948 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 03:34:58,043 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 03:34:58,071 INFO l.util [main] UPDATE SUMMARY
2023-06-09 03:34:58,072 INFO l.util [main] Run:                          0
2023-06-09 03:34:58,072 INFO l.util [main] Previously run:               5
2023-06-09 03:34:58,072 INFO l.util [main] Filtered out:                 0
2023-06-09 03:34:58,072 INFO l.util [main] -------------------------------
2023-06-09 03:34:58,073 INFO l.util [main] Total change sets:            5

2023-06-09 03:34:58,077 INFO l.util [main] Update summary generated
2023-06-09 03:34:58,085 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 03:34:58,107 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 03:34:58,109 INFO l.command [main] Command execution complete
2023-06-09 03:34:58,480 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 03:34:58,547 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 03:34:58,549 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 03:34:58,709 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:34:58,924 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 03:34:58,988 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@5c2ae7d7
2023-06-09 03:34:59,279 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:35:00,382 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 03:35:00,498 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:35:01,281 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 03:35:02,661 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 03:35:03,820 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5775485, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ae094e8, org.springframework.security.web.context.SecurityContextHolderFilter@6d16aae3, org.springframework.security.web.header.HeaderWriterFilter@541c7857, org.springframework.security.web.authentication.logout.LogoutFilter@1d21fd5a, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@66113b7c, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@7265db9d, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@34692767, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@6f1af8c3, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@42531e1b, org.springframework.security.web.session.ConcurrentSessionFilter@6bd01b0e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2659225a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@19f811a2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7a845f91, org.springframework.security.web.access.ExceptionTranslationFilter@7375e6c1, org.springframework.security.web.access.intercept.AuthorizationFilter@1107891a]
2023-06-09 03:35:04,742 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 03:35:04,780 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 03:35:04,809 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 16.366 seconds (process running for 17.903)
2023-06-09 03:38:48,038 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 03:38:48,039 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 03:38:48,052 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 13 ms
2023-06-09 03:39:18,833 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:39:18,845 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 03:39:18,856 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 03:43:32,625 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 03:43:32,842 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 42965 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 03:43:32,845 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 03:43:32,848 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 03:43:33,654 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:43:33,656 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:43:33,656 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:43:33,656 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 03:43:33,656 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:43:33,656 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:43:36,673 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 03:43:37,118 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 431 ms. Found 2 JPA repository interfaces.
2023-06-09 03:43:37,900 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 03:43:38,435 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 03:43:40,766 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 03:43:41,085 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 7425 ms
2023-06-09 03:43:41,493 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 03:43:41,736 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@d6d683e
2023-06-09 03:43:41,740 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 03:43:45,022 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 03:43:45,132 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 03:43:45,136 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 03:43:45,315 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:43:45,511 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 03:43:45,557 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@67aaf882
2023-06-09 03:43:45,892 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:43:47,470 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 03:43:47,618 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:43:48,540 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 03:43:50,310 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 03:43:52,883 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3d2162c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@49e4b332, org.springframework.security.web.context.SecurityContextHolderFilter@23195ebe, org.springframework.security.web.header.HeaderWriterFilter@2659225a, org.springframework.security.web.authentication.logout.LogoutFilter@74faa12, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@58084f58, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@43139322, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@39caf68a, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@56d5a50f, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@606cb314, org.springframework.security.web.session.ConcurrentSessionFilter@6f1af8c3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4481a37f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3b590d21, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3e8742de, org.springframework.security.web.access.ExceptionTranslationFilter@6d16aae3, org.springframework.security.web.access.intercept.AuthorizationFilter@3e3a7482]
2023-06-09 03:43:54,314 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 03:43:54,365 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 23.994 seconds (process running for 25.632)
2023-06-09 03:43:54,416 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:43:54,422 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 03:43:54,432 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 03:44:19,592 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 03:44:19,739 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 43169 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 03:44:19,741 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 03:44:19,748 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 03:44:20,391 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:44:20,392 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:44:20,392 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:44:20,392 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 03:44:20,392 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:44:20,392 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:44:22,486 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 03:44:22,757 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 260 ms. Found 2 JPA repository interfaces.
2023-06-09 03:44:23,422 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 03:44:23,658 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 03:44:24,986 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 03:44:25,000 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 03:44:25,002 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 03:44:25,002 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 03:44:25,198 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 03:44:25,199 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4805 ms
2023-06-09 03:44:25,553 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 03:44:25,664 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7227926b
2023-06-09 03:44:25,666 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 03:44:25,924 INFO l.database [main] Set default schema name to public
2023-06-09 03:44:26,337 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 03:44:27,335 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 03:44:27,437 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 03:44:27,467 INFO l.util [main] UPDATE SUMMARY
2023-06-09 03:44:27,468 INFO l.util [main] Run:                          0
2023-06-09 03:44:27,468 INFO l.util [main] Previously run:               5
2023-06-09 03:44:27,468 INFO l.util [main] Filtered out:                 0
2023-06-09 03:44:27,468 INFO l.util [main] -------------------------------
2023-06-09 03:44:27,468 INFO l.util [main] Total change sets:            5

2023-06-09 03:44:27,472 INFO l.util [main] Update summary generated
2023-06-09 03:44:27,481 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 03:44:27,497 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 03:44:27,499 INFO l.command [main] Command execution complete
2023-06-09 03:44:27,869 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 03:44:27,953 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 03:44:27,957 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 03:44:28,117 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:44:28,311 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 03:44:28,375 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@b272860
2023-06-09 03:44:28,667 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:44:29,766 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 03:44:29,892 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:44:30,744 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 03:44:32,069 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 03:44:33,246 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4b98900b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@24bd88df, org.springframework.security.web.context.SecurityContextHolderFilter@4fa1bdd0, org.springframework.security.web.header.HeaderWriterFilter@46f03d6d, org.springframework.security.web.authentication.logout.LogoutFilter@5c866852, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@1f41742f, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@148a581e, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@59f4df4e, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@eb3b4d7, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@78d816e6, org.springframework.security.web.session.ConcurrentSessionFilter@63c57bde, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3fe8c952, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5f82dd9a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5775485, org.springframework.security.web.access.ExceptionTranslationFilter@5e0e97b6, org.springframework.security.web.access.intercept.AuthorizationFilter@2f04c1f3]
2023-06-09 03:44:34,156 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 03:44:34,192 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 03:44:34,212 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 16.639 seconds (process running for 17.971)
2023-06-09 03:44:42,178 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 03:44:42,179 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 03:44:42,196 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 17 ms
2023-06-09 03:45:22,272 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-6] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.getUserByUsername(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$5(SecurityConfig.java:76)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 03:46:34,483 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-10] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [GET] to [http://localhost:8084/users/user] [UserManagementClient#getUserByUsername(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [GET] to [http://localhost:8084/users/user] [UserManagementClient#getUserByUsername(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.getUserByUsername(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$5(SecurityConfig.java:76)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 03:47:14,146 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:47:14,210 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 03:47:14,231 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 03:54:06,170 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 03:54:06,316 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 45554 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 03:54:06,318 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 03:54:06,321 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 03:54:06,905 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:54:06,906 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:54:06,906 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:54:06,906 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 03:54:06,907 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 03:54:06,907 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 03:54:09,097 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 03:54:09,353 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 245 ms. Found 2 JPA repository interfaces.
2023-06-09 03:54:09,950 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 03:54:10,189 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 03:54:11,443 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 03:54:11,457 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 03:54:11,458 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 03:54:11,459 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 03:54:11,671 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 03:54:11,671 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4762 ms
2023-06-09 03:54:11,993 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 03:54:12,104 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@45b27ad3
2023-06-09 03:54:12,106 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 03:54:12,502 INFO l.database [main] Set default schema name to public
2023-06-09 03:54:12,893 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 03:54:13,797 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 03:54:13,884 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 03:54:13,910 INFO l.util [main] UPDATE SUMMARY
2023-06-09 03:54:13,911 INFO l.util [main] Run:                          0
2023-06-09 03:54:13,911 INFO l.util [main] Previously run:               5
2023-06-09 03:54:13,911 INFO l.util [main] Filtered out:                 0
2023-06-09 03:54:13,911 INFO l.util [main] -------------------------------
2023-06-09 03:54:13,911 INFO l.util [main] Total change sets:            5

2023-06-09 03:54:13,912 INFO l.util [main] Update summary generated
2023-06-09 03:54:13,918 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 03:54:13,931 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 03:54:13,932 INFO l.command [main] Command execution complete
2023-06-09 03:54:14,242 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 03:54:14,310 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 03:54:14,313 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 03:54:14,485 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:54:14,695 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 03:54:14,763 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@143900a6
2023-06-09 03:54:15,170 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 03:54:16,333 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 03:54:16,469 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:54:17,128 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 03:54:18,516 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 03:54:20,052 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@37930f48, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@58084f58, org.springframework.security.web.context.SecurityContextHolderFilter@3697a307, org.springframework.security.web.header.HeaderWriterFilter@2a654167, org.springframework.security.web.authentication.logout.LogoutFilter@71ef3f0c, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@49f8b57d, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@4b6b9255, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@bafb3bd, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@1d21fd5a, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@43139322, org.springframework.security.web.session.ConcurrentSessionFilter@71b253b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7e56e272, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7768ffae, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@39caf68a, org.springframework.security.web.access.ExceptionTranslationFilter@4ff2ac2d, org.springframework.security.web.access.intercept.AuthorizationFilter@ee9b7ac]
2023-06-09 03:54:21,343 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 03:54:21,460 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 03:54:21,515 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 17.296 seconds (process running for 18.875)
2023-06-09 03:54:34,539 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 03:54:34,540 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 03:54:34,550 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 9 ms
2023-06-09 03:54:41,026 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-3] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: Cannot invoke "org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken.getCredentials()" because "authenticationToken" is null
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.lang.NullPointerException: Cannot invoke "org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken.getCredentials()" because "authenticationToken" is null
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$5(SecurityConfig.java:75)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 03:55:43,048 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-6] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.getUserByUsername(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$5(SecurityConfig.java:78)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 03:59:36,897 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 03:59:36,945 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 03:59:36,964 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 04:05:32,694 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 04:05:32,840 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 48422 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 04:05:32,843 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 04:05:32,846 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 04:05:33,427 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:05:33,428 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:05:33,428 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:05:33,428 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 04:05:33,428 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:05:33,428 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:05:35,568 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 04:05:35,829 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 252 ms. Found 2 JPA repository interfaces.
2023-06-09 04:05:36,462 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 04:05:36,687 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 04:05:37,882 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 04:05:37,896 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 04:05:37,897 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 04:05:37,897 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 04:05:38,125 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 04:05:38,125 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4695 ms
2023-06-09 04:05:38,478 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 04:05:38,591 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@19d3f6ad
2023-06-09 04:05:38,594 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 04:05:38,906 INFO l.database [main] Set default schema name to public
2023-06-09 04:05:39,128 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 04:05:40,138 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:05:40,232 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:05:40,272 INFO l.util [main] UPDATE SUMMARY
2023-06-09 04:05:40,274 INFO l.util [main] Run:                          0
2023-06-09 04:05:40,274 INFO l.util [main] Previously run:               5
2023-06-09 04:05:40,274 INFO l.util [main] Filtered out:                 0
2023-06-09 04:05:40,274 INFO l.util [main] -------------------------------
2023-06-09 04:05:40,274 INFO l.util [main] Total change sets:            5

2023-06-09 04:05:40,277 INFO l.util [main] Update summary generated
2023-06-09 04:05:40,284 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:05:40,299 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:05:40,300 INFO l.command [main] Command execution complete
2023-06-09 04:05:40,554 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 04:05:40,626 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 04:05:40,629 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 04:05:40,785 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:05:40,982 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 04:05:41,036 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@6e7cb01a
2023-06-09 04:05:41,385 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:05:42,489 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 04:05:42,632 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:05:43,396 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 04:05:44,936 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 04:05:45,076 WARN o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'org.springframework.security.oauth2.client.OAuth2AuthorizedClientManager' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2023-06-09 04:05:45,080 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:05:45,083 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2023-06-09 04:05:45,090 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2023-06-09 04:05:45,092 INFO o.a.c.c.StandardService [main] Stopping service [Tomcat]
2023-06-09 04:05:45,122 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-09 04:05:45,166 ERROR o.s.b.d.LoggingFailureAnalysisReporter [main] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of constructor in ru.clevertec.NewsManager.security.SecurityConfig required a bean of type 'org.springframework.security.oauth2.client.OAuth2AuthorizedClientManager' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.oauth2.client.OAuth2AuthorizedClientManager' in your configuration.

2023-06-09 04:16:29,398 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 04:16:29,577 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 51093 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 04:16:29,578 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 04:16:29,588 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 04:16:30,392 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:16:30,393 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:16:30,393 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:16:30,393 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 04:16:30,393 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:16:30,393 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:16:32,628 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 04:16:32,873 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 235 ms. Found 2 JPA repository interfaces.
2023-06-09 04:16:33,500 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 04:16:33,728 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 04:16:34,949 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 04:16:34,964 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 04:16:34,965 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 04:16:34,965 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 04:16:35,170 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 04:16:35,171 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4775 ms
2023-06-09 04:16:35,512 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 04:16:35,687 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@422ba9b7
2023-06-09 04:16:35,689 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 04:16:36,054 INFO l.database [main] Set default schema name to public
2023-06-09 04:16:36,334 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 04:16:37,424 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:16:37,554 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:16:37,623 INFO l.util [main] UPDATE SUMMARY
2023-06-09 04:16:37,624 INFO l.util [main] Run:                          0
2023-06-09 04:16:37,625 INFO l.util [main] Previously run:               5
2023-06-09 04:16:37,625 INFO l.util [main] Filtered out:                 0
2023-06-09 04:16:37,625 INFO l.util [main] -------------------------------
2023-06-09 04:16:37,625 INFO l.util [main] Total change sets:            5

2023-06-09 04:16:37,631 INFO l.util [main] Update summary generated
2023-06-09 04:16:37,642 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:16:37,701 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:16:37,707 INFO l.command [main] Command execution complete
2023-06-09 04:16:38,156 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 04:16:38,305 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 04:16:38,308 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 04:16:38,498 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:16:38,689 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 04:16:38,747 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@30a4a111
2023-06-09 04:16:39,277 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:16:40,509 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 04:16:40,656 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:16:41,536 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 04:16:43,683 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 04:16:44,011 WARN o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'org.springframework.security.oauth2.client.OAuth2AuthorizedClientManager' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2023-06-09 04:16:44,030 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:16:44,044 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2023-06-09 04:16:44,065 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2023-06-09 04:16:44,070 INFO o.a.c.c.StandardService [main] Stopping service [Tomcat]
2023-06-09 04:16:44,137 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-09 04:16:44,246 ERROR o.s.b.d.LoggingFailureAnalysisReporter [main] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of constructor in ru.clevertec.NewsManager.security.SecurityConfig required a bean of type 'org.springframework.security.oauth2.client.OAuth2AuthorizedClientManager' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.oauth2.client.OAuth2AuthorizedClientManager' in your configuration.

2023-06-09 04:17:23,893 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 04:17:23,997 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 51332 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 04:17:23,999 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 04:17:24,001 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 04:17:24,584 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:17:24,585 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:17:24,585 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:17:24,585 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 04:17:24,585 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:17:24,585 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:17:26,690 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 04:17:26,982 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 279 ms. Found 2 JPA repository interfaces.
2023-06-09 04:17:27,650 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 04:17:27,878 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 04:17:29,102 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 04:17:29,118 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 04:17:29,119 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 04:17:29,120 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 04:17:29,304 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 04:17:29,305 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4716 ms
2023-06-09 04:17:29,651 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 04:17:29,756 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3d3b272a
2023-06-09 04:17:29,759 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 04:17:29,919 INFO l.database [main] Set default schema name to public
2023-06-09 04:17:30,340 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 04:17:31,324 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:17:31,420 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:17:31,511 INFO l.util [main] UPDATE SUMMARY
2023-06-09 04:17:31,511 INFO l.util [main] Run:                          0
2023-06-09 04:17:31,512 INFO l.util [main] Previously run:               5
2023-06-09 04:17:31,512 INFO l.util [main] Filtered out:                 0
2023-06-09 04:17:31,512 INFO l.util [main] -------------------------------
2023-06-09 04:17:31,512 INFO l.util [main] Total change sets:            5

2023-06-09 04:17:31,514 INFO l.util [main] Update summary generated
2023-06-09 04:17:31,520 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:17:31,536 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:17:31,537 INFO l.command [main] Command execution complete
2023-06-09 04:17:31,813 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 04:17:31,884 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 04:17:31,888 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 04:17:32,057 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:17:32,259 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 04:17:32,307 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@3599b18
2023-06-09 04:17:32,695 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:17:33,856 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 04:17:33,978 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:17:34,627 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 04:17:36,163 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 04:17:37,878 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3bbd9232, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@e13cc49, org.springframework.security.web.context.SecurityContextHolderFilter@11869005, org.springframework.security.web.header.HeaderWriterFilter@d3f2b59, org.springframework.security.web.authentication.logout.LogoutFilter@15e8e884, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@1107891a, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@1885d990, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@6383ea52, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@13c02cec, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@60c95d8, org.springframework.security.web.session.ConcurrentSessionFilter@7107a4a3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@731ccdfc, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4b68d2a6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@40557b00, org.springframework.security.web.access.ExceptionTranslationFilter@3ceb8e1f, org.springframework.security.web.access.intercept.AuthorizationFilter@765cb6c1]
2023-06-09 04:17:39,566 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 04:17:39,614 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 04:17:39,648 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 17.596 seconds (process running for 18.922)
2023-06-09 04:17:43,371 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 04:17:43,371 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 04:17:43,380 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 9 ms
2023-06-09 04:17:51,696 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-3] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.getUserByUsername(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$5(SecurityConfig.java:78)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 04:18:45,209 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:18:45,228 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 04:18:45,240 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 04:18:56,565 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 04:18:56,691 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 51715 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 04:18:56,693 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 04:18:56,696 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 04:18:57,435 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:18:57,436 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:18:57,436 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:18:57,436 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 04:18:57,436 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:18:57,436 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:18:59,603 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 04:18:59,873 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 260 ms. Found 2 JPA repository interfaces.
2023-06-09 04:19:00,511 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 04:19:00,725 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 04:19:01,943 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 04:19:01,956 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 04:19:01,957 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 04:19:01,958 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 04:19:02,175 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 04:19:02,175 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4737 ms
2023-06-09 04:19:02,528 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 04:19:02,639 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@8ee03f5
2023-06-09 04:19:02,641 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 04:19:03,208 INFO l.database [main] Set default schema name to public
2023-06-09 04:19:03,649 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 04:19:04,941 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:19:05,088 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:19:05,147 INFO l.util [main] UPDATE SUMMARY
2023-06-09 04:19:05,149 INFO l.util [main] Run:                          0
2023-06-09 04:19:05,150 INFO l.util [main] Previously run:               5
2023-06-09 04:19:05,150 INFO l.util [main] Filtered out:                 0
2023-06-09 04:19:05,150 INFO l.util [main] -------------------------------
2023-06-09 04:19:05,151 INFO l.util [main] Total change sets:            5

2023-06-09 04:19:05,153 INFO l.util [main] Update summary generated
2023-06-09 04:19:05,166 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:19:05,192 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:19:05,195 INFO l.command [main] Command execution complete
2023-06-09 04:19:05,803 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 04:19:05,905 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 04:19:05,911 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 04:19:06,107 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:19:06,323 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 04:19:06,393 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@65234a9
2023-06-09 04:19:07,023 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:19:08,518 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 04:19:08,699 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:19:09,852 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 04:19:11,940 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 04:19:14,124 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4b2164a9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@11581810, org.springframework.security.web.context.SecurityContextHolderFilter@71b253b, org.springframework.security.web.header.HeaderWriterFilter@42010bc8, org.springframework.security.web.authentication.logout.LogoutFilter@78fb8a66, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@24bd88df, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@78d816e6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@5775485, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@7e56e272, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@49f8b57d, org.springframework.security.web.session.ConcurrentSessionFilter@2a654167, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@19f811a2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@44e69674, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4b6b9255, org.springframework.security.web.access.ExceptionTranslationFilter@4fdf83bb, org.springframework.security.web.access.intercept.AuthorizationFilter@71ef3f0c]
2023-06-09 04:19:15,514 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 04:19:15,569 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 04:19:15,595 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 21.062 seconds (process running for 22.493)
2023-06-09 04:19:28,769 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 04:19:28,771 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 04:19:28,788 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 17 ms
2023-06-09 04:19:35,368 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-3] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.getUserByUsername(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:75)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 04:22:39,220 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:22:39,241 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 04:22:39,256 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 04:25:10,661 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 04:25:10,940 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 53487 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 04:25:10,949 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 04:25:10,954 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 04:25:12,170 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:25:12,173 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:25:12,173 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:25:12,173 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 04:25:12,173 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:25:12,173 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:25:17,524 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 04:25:18,183 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 629 ms. Found 2 JPA repository interfaces.
2023-06-09 04:25:20,056 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 04:25:20,500 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 04:25:23,157 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 04:25:23,176 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 04:25:23,178 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 04:25:23,178 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 04:25:23,431 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 04:25:23,432 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 11256 ms
2023-06-09 04:25:23,804 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 04:25:23,922 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@45b27ad3
2023-06-09 04:25:23,925 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 04:25:24,279 INFO l.database [main] Set default schema name to public
2023-06-09 04:25:24,669 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 04:25:25,660 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:25:25,758 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:25:25,790 INFO l.util [main] UPDATE SUMMARY
2023-06-09 04:25:25,790 INFO l.util [main] Run:                          0
2023-06-09 04:25:25,791 INFO l.util [main] Previously run:               5
2023-06-09 04:25:25,791 INFO l.util [main] Filtered out:                 0
2023-06-09 04:25:25,791 INFO l.util [main] -------------------------------
2023-06-09 04:25:25,791 INFO l.util [main] Total change sets:            5

2023-06-09 04:25:25,792 INFO l.util [main] Update summary generated
2023-06-09 04:25:25,799 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:25:25,811 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:25:25,812 INFO l.command [main] Command execution complete
2023-06-09 04:25:26,207 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 04:25:26,291 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 04:25:26,295 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 04:25:26,465 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:25:26,662 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 04:25:26,726 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@143900a6
2023-06-09 04:25:27,110 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:25:28,062 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 04:25:28,171 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:25:28,877 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 04:25:30,060 WARN o.s.c.a.AnnotationConfigApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
2023-06-09 04:25:30,063 WARN o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
2023-06-09 04:25:30,065 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:25:30,067 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2023-06-09 04:25:30,073 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2023-06-09 04:25:30,075 INFO o.a.c.c.StandardService [main] Stopping service [Tomcat]
2023-06-09 04:25:30,106 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-09 04:25:30,136 ERROR o.s.b.SpringApplication [main] Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:941)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1305)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1294)
	at ru.clevertec.NewsManager.NewsManagerApplication.main(NewsManagerApplication.java:15)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:154)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:90)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1823)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1273)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:259)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1640)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:417)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.retrieveApplicationListeners(AbstractApplicationEventMulticaster.java:264)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:221)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:138)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:437)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:443)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:370)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:961)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:611)
	at org.springframework.cloud.context.named.NamedContextFactory.createContext(NamedContextFactory.java:138)
	at org.springframework.cloud.context.named.NamedContextFactory.getContext(NamedContextFactory.java:122)
	at org.springframework.cloud.context.named.NamedContextFactory.getInstance(NamedContextFactory.java:197)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.get(FeignClientFactoryBean.java:363)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.feign(FeignClientFactoryBean.java:134)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getTarget(FeignClientFactoryBean.java:433)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getObject(FeignClientFactoryBean.java:421)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:148)
	... 31 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 66 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 83 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 99 common frames omitted
Caused by: java.lang.IllegalStateException: Provider ID must be specified for client registration 'custom'
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.getBuilder(OAuth2ClientPropertiesMapper.java:109)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.getClientRegistration(OAuth2ClientPropertiesMapper.java:73)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.lambda$asClientRegistrations$0(OAuth2ClientPropertiesMapper.java:65)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.asClientRegistrations(OAuth2ClientPropertiesMapper.java:64)
	at org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration.clientRegistrationRepository(OAuth2ClientRegistrationRepositoryConfiguration.java:49)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 100 common frames omitted
2023-06-09 04:29:14,072 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 04:29:14,179 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 54495 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 04:29:14,182 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 04:29:14,184 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 04:29:14,808 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:29:14,809 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:29:14,809 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:29:14,809 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 04:29:14,809 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:29:14,809 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:29:16,975 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 04:29:17,246 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 259 ms. Found 2 JPA repository interfaces.
2023-06-09 04:29:17,905 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 04:29:18,168 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 04:29:19,439 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 04:29:19,455 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 04:29:19,456 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 04:29:19,456 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 04:29:19,690 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 04:29:19,691 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4879 ms
2023-06-09 04:29:20,036 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 04:29:20,144 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@45b27ad3
2023-06-09 04:29:20,146 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 04:29:20,661 INFO l.database [main] Set default schema name to public
2023-06-09 04:29:20,955 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 04:29:21,902 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:29:21,997 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:29:22,081 INFO l.util [main] UPDATE SUMMARY
2023-06-09 04:29:22,081 INFO l.util [main] Run:                          0
2023-06-09 04:29:22,082 INFO l.util [main] Previously run:               5
2023-06-09 04:29:22,082 INFO l.util [main] Filtered out:                 0
2023-06-09 04:29:22,082 INFO l.util [main] -------------------------------
2023-06-09 04:29:22,082 INFO l.util [main] Total change sets:            5

2023-06-09 04:29:22,083 INFO l.util [main] Update summary generated
2023-06-09 04:29:22,090 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:29:22,099 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:29:22,100 INFO l.command [main] Command execution complete
2023-06-09 04:29:22,415 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 04:29:22,487 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 04:29:22,490 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 04:29:22,656 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:29:22,830 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 04:29:22,885 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@143900a6
2023-06-09 04:29:23,284 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:29:24,361 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 04:29:24,523 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:29:25,240 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 04:29:26,725 WARN o.s.c.a.AnnotationConfigApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
2023-06-09 04:29:26,730 WARN o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
2023-06-09 04:29:26,731 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:29:26,734 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2023-06-09 04:29:26,742 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2023-06-09 04:29:26,744 INFO o.a.c.c.StandardService [main] Stopping service [Tomcat]
2023-06-09 04:29:26,784 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-09 04:29:26,808 ERROR o.s.b.SpringApplication [main] Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:941)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1305)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1294)
	at ru.clevertec.NewsManager.NewsManagerApplication.main(NewsManagerApplication.java:15)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:154)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:90)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1823)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1273)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:259)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1640)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:417)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.retrieveApplicationListeners(AbstractApplicationEventMulticaster.java:264)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:221)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:138)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:437)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:443)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:370)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:961)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:611)
	at org.springframework.cloud.context.named.NamedContextFactory.createContext(NamedContextFactory.java:138)
	at org.springframework.cloud.context.named.NamedContextFactory.getContext(NamedContextFactory.java:122)
	at org.springframework.cloud.context.named.NamedContextFactory.getInstance(NamedContextFactory.java:197)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.get(FeignClientFactoryBean.java:363)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.feign(FeignClientFactoryBean.java:134)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getTarget(FeignClientFactoryBean.java:433)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getObject(FeignClientFactoryBean.java:421)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:148)
	... 31 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 66 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 83 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 99 common frames omitted
Caused by: java.lang.IllegalStateException: Provider ID must be specified for client registration 'custom'
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.getBuilder(OAuth2ClientPropertiesMapper.java:109)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.getClientRegistration(OAuth2ClientPropertiesMapper.java:73)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.lambda$asClientRegistrations$0(OAuth2ClientPropertiesMapper.java:65)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.asClientRegistrations(OAuth2ClientPropertiesMapper.java:64)
	at org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration.clientRegistrationRepository(OAuth2ClientRegistrationRepositoryConfiguration.java:49)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 100 common frames omitted
2023-06-09 04:30:42,583 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 04:30:42,784 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 54864 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 04:30:42,786 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 04:30:42,791 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 04:30:43,507 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:30:43,508 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:30:43,508 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:30:43,508 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 04:30:43,508 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:30:43,508 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:30:46,037 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 04:30:46,315 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 267 ms. Found 2 JPA repository interfaces.
2023-06-09 04:30:46,964 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=719134e8-862e-34b3-b70f-da41b5350c09
2023-06-09 04:30:47,202 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 04:30:48,580 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 04:30:48,593 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 04:30:48,594 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 04:30:48,595 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 04:30:48,818 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 04:30:48,819 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 5309 ms
2023-06-09 04:30:49,199 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 04:30:49,318 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3359c3f6
2023-06-09 04:30:49,321 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 04:30:49,516 INFO l.database [main] Set default schema name to public
2023-06-09 04:30:49,827 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 04:30:50,988 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:30:51,085 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:30:51,113 INFO l.util [main] UPDATE SUMMARY
2023-06-09 04:30:51,114 INFO l.util [main] Run:                          0
2023-06-09 04:30:51,114 INFO l.util [main] Previously run:               5
2023-06-09 04:30:51,114 INFO l.util [main] Filtered out:                 0
2023-06-09 04:30:51,114 INFO l.util [main] -------------------------------
2023-06-09 04:30:51,114 INFO l.util [main] Total change sets:            5

2023-06-09 04:30:51,116 INFO l.util [main] Update summary generated
2023-06-09 04:30:51,123 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:30:51,138 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:30:51,140 INFO l.command [main] Command execution complete
2023-06-09 04:30:51,526 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 04:30:51,601 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 04:30:51,604 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 04:30:51,775 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:30:51,971 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 04:30:52,034 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@c19bb2a
2023-06-09 04:30:52,508 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:30:53,607 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 04:30:53,728 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:30:54,395 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 04:30:56,228 WARN o.s.c.a.AnnotationConfigApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
2023-06-09 04:30:56,232 WARN o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
2023-06-09 04:30:56,233 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:30:56,235 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2023-06-09 04:30:56,241 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2023-06-09 04:30:56,243 INFO o.a.c.c.StandardService [main] Stopping service [Tomcat]
2023-06-09 04:30:56,268 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-09 04:30:56,291 ERROR o.s.b.SpringApplication [main] Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:941)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1305)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1294)
	at ru.clevertec.NewsManager.NewsManagerApplication.main(NewsManagerApplication.java:15)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:154)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:90)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1823)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1273)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:259)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1640)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:417)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.retrieveApplicationListeners(AbstractApplicationEventMulticaster.java:264)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:221)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:138)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:437)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:443)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:370)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:961)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:611)
	at org.springframework.cloud.context.named.NamedContextFactory.createContext(NamedContextFactory.java:138)
	at org.springframework.cloud.context.named.NamedContextFactory.getContext(NamedContextFactory.java:122)
	at org.springframework.cloud.context.named.NamedContextFactory.getInstance(NamedContextFactory.java:197)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.get(FeignClientFactoryBean.java:363)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.feign(FeignClientFactoryBean.java:134)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getTarget(FeignClientFactoryBean.java:433)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getObject(FeignClientFactoryBean.java:421)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:148)
	... 31 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 66 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 83 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 99 common frames omitted
Caused by: java.lang.IllegalStateException: Provider ID must be specified for client registration 'custom'
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.getBuilder(OAuth2ClientPropertiesMapper.java:109)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.getClientRegistration(OAuth2ClientPropertiesMapper.java:73)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.lambda$asClientRegistrations$0(OAuth2ClientPropertiesMapper.java:65)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.asClientRegistrations(OAuth2ClientPropertiesMapper.java:64)
	at org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration.clientRegistrationRepository(OAuth2ClientRegistrationRepositoryConfiguration.java:49)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 100 common frames omitted
2023-06-09 04:33:58,938 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 04:33:59,085 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 55669 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 04:33:59,087 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 04:33:59,090 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 04:33:59,810 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:33:59,811 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:33:59,812 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:33:59,812 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 04:33:59,812 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:33:59,812 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:34:02,106 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 04:34:02,361 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 245 ms. Found 2 JPA repository interfaces.
2023-06-09 04:34:03,448 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 04:34:03,806 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 04:34:05,789 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 04:34:05,812 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 04:34:05,814 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 04:34:05,814 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 04:34:06,081 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 04:34:06,082 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 6267 ms
2023-06-09 04:34:06,628 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 04:34:06,762 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@16949dfa
2023-06-09 04:34:06,767 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 04:34:07,160 INFO l.database [main] Set default schema name to public
2023-06-09 04:34:07,591 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 04:34:08,834 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:34:08,964 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:34:08,991 INFO l.util [main] UPDATE SUMMARY
2023-06-09 04:34:08,992 INFO l.util [main] Run:                          0
2023-06-09 04:34:08,992 INFO l.util [main] Previously run:               5
2023-06-09 04:34:08,993 INFO l.util [main] Filtered out:                 0
2023-06-09 04:34:08,993 INFO l.util [main] -------------------------------
2023-06-09 04:34:08,993 INFO l.util [main] Total change sets:            5

2023-06-09 04:34:08,996 INFO l.util [main] Update summary generated
2023-06-09 04:34:09,006 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:34:09,018 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:34:09,019 INFO l.command [main] Command execution complete
2023-06-09 04:34:09,435 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 04:34:09,536 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 04:34:09,542 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 04:34:09,895 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:34:10,181 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 04:34:10,254 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@374bf34b
2023-06-09 04:34:10,698 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:34:12,189 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 04:34:12,345 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:34:13,193 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 04:34:14,897 WARN o.s.c.a.AnnotationConfigApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setAuthorizedClientRepository' parameter 0: Error creating bean with name 'authorizedClientRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2WebSecurityConfiguration.class]: Unsatisfied dependency expressed through method 'authorizedClientRepository' parameter 0: Error creating bean with name 'authorizedClientService' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2WebSecurityConfiguration.class]: Unsatisfied dependency expressed through method 'authorizedClientService' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
2023-06-09 04:34:14,900 WARN o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
2023-06-09 04:34:14,901 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:34:14,904 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2023-06-09 04:34:14,911 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2023-06-09 04:34:14,912 INFO o.a.c.c.StandardService [main] Stopping service [Tomcat]
2023-06-09 04:34:14,935 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-09 04:34:14,956 ERROR o.s.b.SpringApplication [main] Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:941)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1305)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1294)
	at ru.clevertec.NewsManager.NewsManagerApplication.main(NewsManagerApplication.java:15)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:154)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:90)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1823)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1273)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:259)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1640)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setAuthorizedClientRepository' parameter 0: Error creating bean with name 'authorizedClientRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2WebSecurityConfiguration.class]: Unsatisfied dependency expressed through method 'authorizedClientRepository' parameter 0: Error creating bean with name 'authorizedClientService' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2WebSecurityConfiguration.class]: Unsatisfied dependency expressed through method 'authorizedClientService' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:417)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.retrieveApplicationListeners(AbstractApplicationEventMulticaster.java:264)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:221)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:138)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:437)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:443)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:370)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:961)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:611)
	at org.springframework.cloud.context.named.NamedContextFactory.createContext(NamedContextFactory.java:138)
	at org.springframework.cloud.context.named.NamedContextFactory.getContext(NamedContextFactory.java:122)
	at org.springframework.cloud.context.named.NamedContextFactory.getInstance(NamedContextFactory.java:197)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.get(FeignClientFactoryBean.java:363)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.feign(FeignClientFactoryBean.java:134)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getTarget(FeignClientFactoryBean.java:433)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getObject(FeignClientFactoryBean.java:421)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:148)
	... 31 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setAuthorizedClientRepository' parameter 0: Error creating bean with name 'authorizedClientRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2WebSecurityConfiguration.class]: Unsatisfied dependency expressed through method 'authorizedClientRepository' parameter 0: Error creating bean with name 'authorizedClientService' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2WebSecurityConfiguration.class]: Unsatisfied dependency expressed through method 'authorizedClientService' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 66 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authorizedClientRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2WebSecurityConfiguration.class]: Unsatisfied dependency expressed through method 'authorizedClientRepository' parameter 0: Error creating bean with name 'authorizedClientService' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2WebSecurityConfiguration.class]: Unsatisfied dependency expressed through method 'authorizedClientService' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:550)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 83 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authorizedClientService' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2WebSecurityConfiguration.class]: Unsatisfied dependency expressed through method 'authorizedClientService' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:550)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 99 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 113 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 127 common frames omitted
Caused by: java.lang.IllegalStateException: Provider ID must be specified for client registration 'custom'
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.getBuilder(OAuth2ClientPropertiesMapper.java:109)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.getClientRegistration(OAuth2ClientPropertiesMapper.java:73)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.lambda$asClientRegistrations$0(OAuth2ClientPropertiesMapper.java:65)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.asClientRegistrations(OAuth2ClientPropertiesMapper.java:64)
	at org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration.clientRegistrationRepository(OAuth2ClientRegistrationRepositoryConfiguration.java:49)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 128 common frames omitted
2023-06-09 04:34:27,354 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 04:34:27,632 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 55793 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 04:34:27,639 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 04:34:27,648 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 04:34:28,909 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:34:28,911 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:34:28,911 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:34:28,911 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 04:34:28,911 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:34:28,911 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:34:31,736 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 04:34:32,047 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 296 ms. Found 2 JPA repository interfaces.
2023-06-09 04:34:32,842 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 04:34:33,146 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 04:34:34,930 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 04:34:34,951 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 04:34:34,952 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 04:34:34,953 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 04:34:35,240 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 04:34:35,241 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 6325 ms
2023-06-09 04:34:35,596 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 04:34:35,713 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@556aed22
2023-06-09 04:34:35,716 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 04:34:36,094 INFO l.database [main] Set default schema name to public
2023-06-09 04:34:36,424 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 04:34:37,366 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:34:37,474 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:34:37,502 INFO l.util [main] UPDATE SUMMARY
2023-06-09 04:34:37,503 INFO l.util [main] Run:                          0
2023-06-09 04:34:37,503 INFO l.util [main] Previously run:               5
2023-06-09 04:34:37,503 INFO l.util [main] Filtered out:                 0
2023-06-09 04:34:37,503 INFO l.util [main] -------------------------------
2023-06-09 04:34:37,503 INFO l.util [main] Total change sets:            5

2023-06-09 04:34:37,505 INFO l.util [main] Update summary generated
2023-06-09 04:34:37,511 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:34:37,524 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:34:37,527 INFO l.command [main] Command execution complete
2023-06-09 04:34:38,177 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 04:34:38,347 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 04:34:38,353 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 04:34:38,561 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:34:38,798 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 04:34:38,865 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@25c06894
2023-06-09 04:34:39,407 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:34:40,506 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 04:34:40,640 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:34:41,311 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 04:34:43,174 WARN o.s.c.a.AnnotationConfigApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
2023-06-09 04:34:43,216 WARN o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
2023-06-09 04:34:43,229 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:34:43,243 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2023-06-09 04:34:43,264 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2023-06-09 04:34:43,267 INFO o.a.c.c.StandardService [main] Stopping service [Tomcat]
2023-06-09 04:34:43,355 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-09 04:34:43,437 ERROR o.s.b.SpringApplication [main] Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:941)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1305)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1294)
	at ru.clevertec.NewsManager.NewsManagerApplication.main(NewsManagerApplication.java:15)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:154)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:90)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1823)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1273)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:259)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1640)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:417)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.retrieveApplicationListeners(AbstractApplicationEventMulticaster.java:264)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:221)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:138)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:437)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:443)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:370)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:961)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:611)
	at org.springframework.cloud.context.named.NamedContextFactory.createContext(NamedContextFactory.java:138)
	at org.springframework.cloud.context.named.NamedContextFactory.getContext(NamedContextFactory.java:122)
	at org.springframework.cloud.context.named.NamedContextFactory.getInstance(NamedContextFactory.java:197)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.get(FeignClientFactoryBean.java:363)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.feign(FeignClientFactoryBean.java:134)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getTarget(FeignClientFactoryBean.java:433)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getObject(FeignClientFactoryBean.java:421)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:148)
	... 31 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 66 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 83 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 99 common frames omitted
Caused by: java.lang.IllegalStateException: Provider ID must be specified for client registration 'custom'
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.getBuilder(OAuth2ClientPropertiesMapper.java:109)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.getClientRegistration(OAuth2ClientPropertiesMapper.java:73)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.lambda$asClientRegistrations$0(OAuth2ClientPropertiesMapper.java:65)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.asClientRegistrations(OAuth2ClientPropertiesMapper.java:64)
	at org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration.clientRegistrationRepository(OAuth2ClientRegistrationRepositoryConfiguration.java:49)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 100 common frames omitted
2023-06-09 04:35:10,747 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 04:35:10,865 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 55984 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 04:35:10,869 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 04:35:10,871 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 04:35:11,453 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:35:11,454 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:35:11,454 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:35:11,454 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 04:35:11,454 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:35:11,454 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:35:14,563 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 04:35:14,879 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 306 ms. Found 2 JPA repository interfaces.
2023-06-09 04:35:15,899 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 04:35:16,135 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 04:35:17,545 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 04:35:17,563 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 04:35:17,565 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 04:35:17,565 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 04:35:17,824 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 04:35:17,825 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 6369 ms
2023-06-09 04:35:18,289 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 04:35:18,423 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2f75a9b1
2023-06-09 04:35:18,425 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 04:35:18,693 INFO l.database [main] Set default schema name to public
2023-06-09 04:35:19,143 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 04:35:20,289 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:35:20,557 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:35:20,623 INFO l.util [main] UPDATE SUMMARY
2023-06-09 04:35:20,625 INFO l.util [main] Run:                          0
2023-06-09 04:35:20,625 INFO l.util [main] Previously run:               5
2023-06-09 04:35:20,625 INFO l.util [main] Filtered out:                 0
2023-06-09 04:35:20,625 INFO l.util [main] -------------------------------
2023-06-09 04:35:20,625 INFO l.util [main] Total change sets:            5

2023-06-09 04:35:20,628 INFO l.util [main] Update summary generated
2023-06-09 04:35:20,644 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:35:20,666 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:35:20,667 INFO l.command [main] Command execution complete
2023-06-09 04:35:21,150 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 04:35:21,234 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 04:35:21,241 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 04:35:21,421 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:35:21,613 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 04:35:21,680 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@4351d055
2023-06-09 04:35:22,277 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:35:23,443 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 04:35:23,592 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:35:24,403 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 04:35:25,752 WARN o.s.c.a.AnnotationConfigApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
2023-06-09 04:35:25,758 WARN o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
2023-06-09 04:35:25,760 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:35:25,762 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2023-06-09 04:35:25,770 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2023-06-09 04:35:25,771 INFO o.a.c.c.StandardService [main] Stopping service [Tomcat]
2023-06-09 04:35:25,806 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-09 04:35:25,833 ERROR o.s.b.SpringApplication [main] Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:941)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1305)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1294)
	at ru.clevertec.NewsManager.NewsManagerApplication.main(NewsManagerApplication.java:15)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:154)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:90)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1823)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1273)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:259)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1640)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:417)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.retrieveApplicationListeners(AbstractApplicationEventMulticaster.java:264)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:221)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:138)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:437)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:443)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:370)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:961)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:611)
	at org.springframework.cloud.context.named.NamedContextFactory.createContext(NamedContextFactory.java:138)
	at org.springframework.cloud.context.named.NamedContextFactory.getContext(NamedContextFactory.java:122)
	at org.springframework.cloud.context.named.NamedContextFactory.getInstance(NamedContextFactory.java:197)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.get(FeignClientFactoryBean.java:363)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.feign(FeignClientFactoryBean.java:134)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getTarget(FeignClientFactoryBean.java:433)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getObject(FeignClientFactoryBean.java:421)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:148)
	... 31 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 66 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 83 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 99 common frames omitted
Caused by: java.lang.IllegalStateException: Provider ID must be specified for client registration 'custom'
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.getBuilder(OAuth2ClientPropertiesMapper.java:109)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.getClientRegistration(OAuth2ClientPropertiesMapper.java:73)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.lambda$asClientRegistrations$0(OAuth2ClientPropertiesMapper.java:65)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.asClientRegistrations(OAuth2ClientPropertiesMapper.java:64)
	at org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration.clientRegistrationRepository(OAuth2ClientRegistrationRepositoryConfiguration.java:49)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 100 common frames omitted
2023-06-09 04:39:51,428 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 04:39:51,552 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 57149 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 04:39:51,564 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 04:39:51,570 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 04:39:52,267 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:39:52,268 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:39:52,268 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:39:52,268 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 04:39:52,268 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:39:52,268 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:39:56,492 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 04:39:57,469 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 935 ms. Found 2 JPA repository interfaces.
2023-06-09 04:39:58,755 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 04:39:59,204 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 04:40:01,748 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 04:40:01,789 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 04:40:01,792 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 04:40:01,793 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 04:40:02,326 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 04:40:02,328 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 10057 ms
2023-06-09 04:40:03,007 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 04:40:03,338 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1b69fc07
2023-06-09 04:40:03,345 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 04:40:03,988 INFO l.database [main] Set default schema name to public
2023-06-09 04:40:04,942 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 04:40:06,955 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:40:07,117 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:40:07,162 INFO l.util [main] UPDATE SUMMARY
2023-06-09 04:40:07,164 INFO l.util [main] Run:                          0
2023-06-09 04:40:07,164 INFO l.util [main] Previously run:               5
2023-06-09 04:40:07,164 INFO l.util [main] Filtered out:                 0
2023-06-09 04:40:07,164 INFO l.util [main] -------------------------------
2023-06-09 04:40:07,165 INFO l.util [main] Total change sets:            5

2023-06-09 04:40:07,168 INFO l.util [main] Update summary generated
2023-06-09 04:40:07,180 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:40:07,198 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:40:07,201 INFO l.command [main] Command execution complete
2023-06-09 04:40:07,946 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 04:40:08,116 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 04:40:08,120 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 04:40:08,383 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:40:08,675 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 04:40:08,787 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@236206f8
2023-06-09 04:40:09,502 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:40:11,154 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 04:40:11,324 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:40:12,543 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 04:40:14,275 WARN o.s.c.a.AnnotationConfigApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
2023-06-09 04:40:14,279 WARN o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
2023-06-09 04:40:14,280 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:40:14,283 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2023-06-09 04:40:14,291 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2023-06-09 04:40:14,293 INFO o.a.c.c.StandardService [main] Stopping service [Tomcat]
2023-06-09 04:40:14,330 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-09 04:40:14,360 ERROR o.s.b.SpringApplication [main] Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:941)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1305)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1294)
	at ru.clevertec.NewsManager.NewsManagerApplication.main(NewsManagerApplication.java:15)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ru.clevertec.NewsManager.repository.UserManagementClient': FactoryBean threw exception on object creation
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:154)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:90)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1823)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1273)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:259)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1640)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:417)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.retrieveApplicationListeners(AbstractApplicationEventMulticaster.java:264)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:221)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:138)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:437)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:443)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:370)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:961)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:611)
	at org.springframework.cloud.context.named.NamedContextFactory.createContext(NamedContextFactory.java:138)
	at org.springframework.cloud.context.named.NamedContextFactory.getContext(NamedContextFactory.java:122)
	at org.springframework.cloud.context.named.NamedContextFactory.getInstance(NamedContextFactory.java:197)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.get(FeignClientFactoryBean.java:363)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.feign(FeignClientFactoryBean.java:134)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getTarget(FeignClientFactoryBean.java:433)
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getObject(FeignClientFactoryBean.java:421)
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:148)
	... 31 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setClientRegistrationRepository' parameter 0: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 66 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 83 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception with message: Provider ID must be specified for client registration 'custom'
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 99 common frames omitted
Caused by: java.lang.IllegalStateException: Provider ID must be specified for client registration 'custom'
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.getBuilder(OAuth2ClientPropertiesMapper.java:109)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.getClientRegistration(OAuth2ClientPropertiesMapper.java:73)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.lambda$asClientRegistrations$0(OAuth2ClientPropertiesMapper.java:65)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientPropertiesMapper.asClientRegistrations(OAuth2ClientPropertiesMapper.java:64)
	at org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientRegistrationRepositoryConfiguration.clientRegistrationRepository(OAuth2ClientRegistrationRepositoryConfiguration.java:49)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 100 common frames omitted
2023-06-09 04:46:51,794 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 04:46:51,945 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 58843 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 04:46:51,949 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 04:46:51,953 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 04:46:52,540 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:46:52,541 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:46:52,541 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:46:52,541 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 04:46:52,541 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:46:52,541 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:46:54,768 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 04:46:55,019 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 242 ms. Found 2 JPA repository interfaces.
2023-06-09 04:46:55,606 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 04:46:55,824 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 04:46:57,089 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 04:46:57,103 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 04:46:57,105 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 04:46:57,105 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 04:46:57,307 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 04:46:57,308 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4765 ms
2023-06-09 04:46:57,642 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 04:46:57,751 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3359c3f6
2023-06-09 04:46:57,754 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 04:46:58,261 INFO l.database [main] Set default schema name to public
2023-06-09 04:46:58,545 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 04:46:59,623 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:46:59,725 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:46:59,749 INFO l.util [main] UPDATE SUMMARY
2023-06-09 04:46:59,750 INFO l.util [main] Run:                          0
2023-06-09 04:46:59,751 INFO l.util [main] Previously run:               5
2023-06-09 04:46:59,751 INFO l.util [main] Filtered out:                 0
2023-06-09 04:46:59,751 INFO l.util [main] -------------------------------
2023-06-09 04:46:59,751 INFO l.util [main] Total change sets:            5

2023-06-09 04:46:59,752 INFO l.util [main] Update summary generated
2023-06-09 04:46:59,759 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:46:59,772 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:46:59,774 INFO l.command [main] Command execution complete
2023-06-09 04:47:00,029 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 04:47:00,111 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 04:47:00,115 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 04:47:00,292 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:47:00,506 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 04:47:00,556 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@c19bb2a
2023-06-09 04:47:00,862 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:47:01,810 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 04:47:02,014 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:47:02,741 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 04:47:04,048 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 04:47:05,117 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4b2164a9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@11581810, org.springframework.security.web.context.SecurityContextHolderFilter@2f9bd5ac, org.springframework.security.web.header.HeaderWriterFilter@13c02cec, org.springframework.security.web.authentication.logout.LogoutFilter@78fb8a66, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@24bd88df, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@78d816e6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@5775485, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@7c9cecfb, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@49f8b57d, org.springframework.security.web.session.ConcurrentSessionFilter@23038621, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5f82dd9a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@50df710a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4b6b9255, org.springframework.security.web.access.ExceptionTranslationFilter@596c6c3e, org.springframework.security.web.access.intercept.AuthorizationFilter@71ef3f0c]
2023-06-09 04:47:06,020 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 04:47:06,056 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 04:47:06,076 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 16.392 seconds (process running for 17.867)
2023-06-09 04:47:25,094 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 04:47:25,096 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 04:47:25,107 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 10 ms
2023-06-09 04:47:39,768 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-3] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.getUserByUsername(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:70)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 04:48:25,561 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:48:25,580 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 04:48:25,590 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 04:48:34,260 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 04:48:34,391 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 59277 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 04:48:34,394 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 04:48:34,397 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 04:48:35,063 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:48:35,064 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:48:35,064 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:48:35,064 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 04:48:35,064 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:48:35,064 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:48:37,198 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 04:48:37,452 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 244 ms. Found 2 JPA repository interfaces.
2023-06-09 04:48:38,089 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 04:48:38,341 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 04:48:39,531 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 04:48:39,549 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 04:48:39,550 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 04:48:39,551 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 04:48:39,794 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 04:48:39,794 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4728 ms
2023-06-09 04:48:40,128 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 04:48:40,240 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1b69fc07
2023-06-09 04:48:40,242 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 04:48:40,417 INFO l.database [main] Set default schema name to public
2023-06-09 04:48:40,833 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 04:48:41,789 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:48:41,893 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:48:41,919 INFO l.util [main] UPDATE SUMMARY
2023-06-09 04:48:41,920 INFO l.util [main] Run:                          0
2023-06-09 04:48:41,920 INFO l.util [main] Previously run:               5
2023-06-09 04:48:41,920 INFO l.util [main] Filtered out:                 0
2023-06-09 04:48:41,920 INFO l.util [main] -------------------------------
2023-06-09 04:48:41,920 INFO l.util [main] Total change sets:            5

2023-06-09 04:48:41,921 INFO l.util [main] Update summary generated
2023-06-09 04:48:41,929 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:48:41,939 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:48:41,941 INFO l.command [main] Command execution complete
2023-06-09 04:48:42,289 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 04:48:42,362 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 04:48:42,365 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 04:48:42,540 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:48:42,741 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 04:48:42,792 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@236206f8
2023-06-09 04:48:43,188 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:48:44,244 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 04:48:44,383 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:48:45,189 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 04:48:47,176 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 04:48:48,440 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@24bd88df, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@78d816e6, org.springframework.security.web.context.SecurityContextHolderFilter@4fa1bdd0, org.springframework.security.web.header.HeaderWriterFilter@46f03d6d, org.springframework.security.web.authentication.logout.LogoutFilter@5c866852, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@1f41742f, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@148a581e, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@59f4df4e, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@eb3b4d7, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@5775485, org.springframework.security.web.session.ConcurrentSessionFilter@63c57bde, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3fe8c952, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5f82dd9a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@ae094e8, org.springframework.security.web.access.ExceptionTranslationFilter@5e0e97b6, org.springframework.security.web.access.intercept.AuthorizationFilter@2f04c1f3]
2023-06-09 04:48:49,565 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 04:48:49,606 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 04:48:49,636 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 17.287 seconds (process running for 18.815)
2023-06-09 04:48:54,846 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 04:48:54,847 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 04:48:54,861 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 14 ms
2023-06-09 04:50:48,239 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-8] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.getUserByUsername(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:70)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 04:51:23,605 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:51:23,620 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 04:51:23,636 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 04:52:19,764 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 04:52:19,898 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 60212 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 04:52:19,903 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 04:52:19,905 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 04:52:20,556 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:52:20,557 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:52:20,557 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:52:20,557 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 04:52:20,557 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:52:20,557 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:52:22,785 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 04:52:23,056 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 260 ms. Found 2 JPA repository interfaces.
2023-06-09 04:52:23,662 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 04:52:23,908 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 04:52:25,237 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 04:52:25,253 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 04:52:25,255 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 04:52:25,255 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 04:52:25,517 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 04:52:25,518 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4959 ms
2023-06-09 04:52:25,895 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 04:52:26,003 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3359c3f6
2023-06-09 04:52:26,006 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 04:52:26,507 INFO l.database [main] Set default schema name to public
2023-06-09 04:52:26,887 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 04:52:27,877 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:52:28,050 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:52:28,093 INFO l.util [main] UPDATE SUMMARY
2023-06-09 04:52:28,094 INFO l.util [main] Run:                          0
2023-06-09 04:52:28,094 INFO l.util [main] Previously run:               5
2023-06-09 04:52:28,094 INFO l.util [main] Filtered out:                 0
2023-06-09 04:52:28,094 INFO l.util [main] -------------------------------
2023-06-09 04:52:28,094 INFO l.util [main] Total change sets:            5

2023-06-09 04:52:28,102 INFO l.util [main] Update summary generated
2023-06-09 04:52:28,130 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:52:28,178 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:52:28,181 INFO l.command [main] Command execution complete
2023-06-09 04:52:28,924 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 04:52:29,023 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 04:52:29,026 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 04:52:29,332 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:52:29,644 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 04:52:29,720 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@c19bb2a
2023-06-09 04:52:30,292 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:52:31,312 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 04:52:31,458 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:52:32,078 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 04:52:33,981 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 04:52:35,018 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@49f8b57d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4b6b9255, org.springframework.security.web.context.SecurityContextHolderFilter@19f811a2, org.springframework.security.web.header.HeaderWriterFilter@63c57bde, org.springframework.security.web.authentication.logout.LogoutFilter@2f04c1f3, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@5775485, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@ae094e8, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@42531e1b, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@6e323a5d, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@bafb3bd, org.springframework.security.web.session.ConcurrentSessionFilter@4fa1bdd0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@eb3b4d7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7c9cecfb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5ae6a240, org.springframework.security.web.access.ExceptionTranslationFilter@42010bc8, org.springframework.security.web.access.intercept.AuthorizationFilter@3bbd9232]
2023-06-09 04:52:35,839 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 04:52:35,869 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 04:52:35,900 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 18.19 seconds (process running for 19.705)
2023-06-09 04:52:42,077 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 04:52:42,078 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 04:52:42,087 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 9 ms
2023-06-09 04:54:55,708 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:54:55,724 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 04:54:55,737 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 04:55:04,904 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 04:55:05,054 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 60883 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 04:55:05,060 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 04:55:05,064 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 04:55:06,071 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:55:06,073 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:55:06,073 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:55:06,073 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 04:55:06,073 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 04:55:06,073 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 04:55:09,878 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 04:55:10,197 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 304 ms. Found 2 JPA repository interfaces.
2023-06-09 04:55:11,557 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 04:55:12,169 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 04:55:13,714 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 04:55:13,734 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 04:55:13,735 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 04:55:13,735 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 04:55:13,976 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 04:55:13,976 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 7900 ms
2023-06-09 04:55:14,399 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 04:55:14,530 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3d3b272a
2023-06-09 04:55:14,534 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 04:55:15,060 INFO l.database [main] Set default schema name to public
2023-06-09 04:55:15,388 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 04:55:16,297 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:55:16,423 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 04:55:16,455 INFO l.util [main] UPDATE SUMMARY
2023-06-09 04:55:16,456 INFO l.util [main] Run:                          0
2023-06-09 04:55:16,456 INFO l.util [main] Previously run:               5
2023-06-09 04:55:16,456 INFO l.util [main] Filtered out:                 0
2023-06-09 04:55:16,456 INFO l.util [main] -------------------------------
2023-06-09 04:55:16,456 INFO l.util [main] Total change sets:            5

2023-06-09 04:55:16,457 INFO l.util [main] Update summary generated
2023-06-09 04:55:16,464 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:55:16,478 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 04:55:16,479 INFO l.command [main] Command execution complete
2023-06-09 04:55:16,892 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 04:55:16,990 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 04:55:16,995 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 04:55:17,474 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:55:17,886 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 04:55:18,077 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@3599b18
2023-06-09 04:55:19,033 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 04:55:21,521 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 04:55:21,781 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 04:55:22,970 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 04:55:25,044 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 04:55:27,012 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6383ea52, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5c8d22de, org.springframework.security.web.context.SecurityContextHolderFilter@57832650, org.springframework.security.web.header.HeaderWriterFilter@775429c8, org.springframework.security.web.authentication.logout.LogoutFilter@6bd01b0e, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@78fb8a66, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@5c47ef5f, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@2f04c1f3, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4b68d2a6, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@71ef3f0c, org.springframework.security.web.session.ConcurrentSessionFilter@65bf5c38, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@46724526, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4589bc66, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@471021f8, org.springframework.security.web.access.ExceptionTranslationFilter@3fe5c9f1, org.springframework.security.web.access.intercept.AuthorizationFilter@6d16aae3]
2023-06-09 04:55:29,228 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 04:55:29,281 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 04:55:29,330 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 26.566 seconds (process running for 28.288)
2023-06-09 04:58:42,077 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 04:58:42,084 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 04:58:42,165 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 80 ms
2023-06-09 04:59:09,007 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-4] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.getUserByUsername(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:70)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 05:03:00,324 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 05:03:00,455 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 05:03:00,512 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 05:03:17,088 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 05:03:17,257 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 62991 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 05:03:17,257 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 05:03:17,258 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 05:03:18,047 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 05:03:18,048 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 05:03:18,048 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 05:03:18,048 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 05:03:18,049 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 05:03:18,049 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 05:03:20,164 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 05:03:20,422 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 249 ms. Found 2 JPA repository interfaces.
2023-06-09 05:03:21,043 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 05:03:21,274 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 05:03:22,481 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 05:03:22,516 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 05:03:22,517 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 05:03:22,517 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 05:03:22,730 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 05:03:22,730 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4679 ms
2023-06-09 05:03:23,058 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 05:03:23,196 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@19d3f6ad
2023-06-09 05:03:23,199 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 05:03:23,534 INFO l.database [main] Set default schema name to public
2023-06-09 05:03:23,786 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 05:03:24,873 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 05:03:24,962 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 05:03:24,989 INFO l.util [main] UPDATE SUMMARY
2023-06-09 05:03:24,990 INFO l.util [main] Run:                          0
2023-06-09 05:03:24,990 INFO l.util [main] Previously run:               5
2023-06-09 05:03:24,990 INFO l.util [main] Filtered out:                 0
2023-06-09 05:03:24,990 INFO l.util [main] -------------------------------
2023-06-09 05:03:24,993 INFO l.util [main] Total change sets:            5

2023-06-09 05:03:24,996 INFO l.util [main] Update summary generated
2023-06-09 05:03:25,003 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 05:03:25,017 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 05:03:25,018 INFO l.command [main] Command execution complete
2023-06-09 05:03:25,327 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 05:03:25,397 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 05:03:25,400 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 05:03:25,607 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 05:03:25,822 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 05:03:25,870 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@6e7cb01a
2023-06-09 05:03:26,259 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 05:03:27,292 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 05:03:27,426 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 05:03:28,109 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 05:03:29,682 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 05:03:31,004 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4b98900b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@24bd88df, org.springframework.security.web.context.SecurityContextHolderFilter@15e8e884, org.springframework.security.web.header.HeaderWriterFilter@4b68d2a6, org.springframework.security.web.authentication.logout.LogoutFilter@23195ebe, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@2033fd39, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@1f41742f, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@148a581e, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@50df710a, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@78d816e6, org.springframework.security.web.session.ConcurrentSessionFilter@50b4e828, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3f06c9ac, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2659225a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5775485, org.springframework.security.web.access.ExceptionTranslationFilter@566c6b91, org.springframework.security.web.access.intercept.AuthorizationFilter@5c47ef5f]
2023-06-09 05:03:32,379 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 05:03:32,449 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 05:03:32,511 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 18.816 seconds (process running for 20.373)
2023-06-09 05:03:42,458 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 05:03:42,459 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 05:03:42,465 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 6 ms
2023-06-09 05:03:42,502 WARN o.s.s.o.c.w.OAuth2AuthorizationRequestRedirectFilter [http-nio-8088-exec-1] Authorization Request failed: org.springframework.security.oauth2.client.web.InvalidClientRegistrationIdException: Invalid Client Registration with Id: custom
org.springframework.security.oauth2.client.web.InvalidClientRegistrationIdException: Invalid Client Registration with Id: custom
	at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizationRequestResolver.resolve(DefaultOAuth2AuthorizationRequestResolver.java:152)
	at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizationRequestResolver.resolve(DefaultOAuth2AuthorizationRequestResolver.java:111)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:170)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-06-09 05:05:18,095 INFO r.c.N.a.l.ControllerLogAspect [http-nio-8088-exec-3] ----->GET:NewsController.readAll(..):URI is/newsARGUMENT is(pageable=Page request [number: 0, size 10, sort: UNSORTED]}
2023-06-09 05:05:18,208 INFO r.c.N.a.l.ControllerLogAspect [http-nio-8088-exec-3] <-----GET:NewsController.readAll(..):URI is/news, result is [News(id=1, author=null, time=2023-05-26T00:00, title=Sample News Title, text=Sample News Text)]ARGUMENT is(pageable=Page request [number: 0, size 10, sort: UNSORTED]}
2023-06-09 05:05:48,518 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-5] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [GET] to [http://localhost:8084/users/admin] [UserManagementClient#getUserByUsername(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.getUserByUsername(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:70)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 05:06:05,023 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-7] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [GET] to [http://localhost:8084/users/user] [UserManagementClient#getUserByUsername(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [GET] to [http://localhost:8084/users/user] [UserManagementClient#getUserByUsername(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.getUserByUsername(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:70)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 05:06:58,259 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-10] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [GET] to [http://localhost:8084/users/user1] [UserManagementClient#getUserByUsername(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [GET] to [http://localhost:8084/users/user1] [UserManagementClient#getUserByUsername(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.getUserByUsername(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:70)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-09 05:10:44,528 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 05:10:44,559 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 05:10:44,575 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-09 05:11:01,872 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-09 05:11:02,037 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 64880 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-09 05:11:02,046 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-09 05:11:02,051 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-09 05:11:02,871 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 05:11:02,872 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 05:11:02,872 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 05:11:02,872 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-09 05:11:02,872 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-09 05:11:02,872 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-09 05:11:05,903 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-09 05:11:06,163 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 251 ms. Found 2 JPA repository interfaces.
2023-06-09 05:11:06,794 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-09 05:11:07,039 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-09 05:11:08,577 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-09 05:11:08,610 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-09 05:11:08,614 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-09 05:11:08,615 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-09 05:11:08,973 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-09 05:11:08,974 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 6097 ms
2023-06-09 05:11:09,425 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-09 05:11:09,561 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5ad40184
2023-06-09 05:11:09,568 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-09 05:11:09,964 INFO l.database [main] Set default schema name to public
2023-06-09 05:11:10,735 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-09 05:11:11,756 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 05:11:11,927 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-09 05:11:11,954 INFO l.util [main] UPDATE SUMMARY
2023-06-09 05:11:11,955 INFO l.util [main] Run:                          0
2023-06-09 05:11:11,955 INFO l.util [main] Previously run:               5
2023-06-09 05:11:11,955 INFO l.util [main] Filtered out:                 0
2023-06-09 05:11:11,955 INFO l.util [main] -------------------------------
2023-06-09 05:11:11,955 INFO l.util [main] Total change sets:            5

2023-06-09 05:11:11,956 INFO l.util [main] Update summary generated
2023-06-09 05:11:11,963 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 05:11:11,978 INFO l.lockservice [main] Successfully released change log lock
2023-06-09 05:11:11,980 INFO l.command [main] Command execution complete
2023-06-09 05:11:12,239 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-09 05:11:12,306 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-09 05:11:12,309 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-09 05:11:12,484 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 05:11:12,648 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-09 05:11:12,696 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@4004bfba
2023-06-09 05:11:13,104 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-09 05:11:14,173 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-09 05:11:14,308 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 05:11:14,951 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-09 05:11:16,237 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-09 05:11:17,359 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5ae6a240, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@56b9a73c, org.springframework.security.web.context.SecurityContextHolderFilter@44e69674, org.springframework.security.web.header.HeaderWriterFilter@23038621, org.springframework.security.web.authentication.logout.LogoutFilter@1885d990, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@4b6b9255, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@bafb3bd, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@74faa12, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5c866852, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@41576e84, org.springframework.security.web.session.ConcurrentSessionFilter@2f9bd5ac, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7c9cecfb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@65b63277, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@37930f48, org.springframework.security.web.access.ExceptionTranslationFilter@1cd25514, org.springframework.security.web.access.intercept.AuthorizationFilter@172e4d3a]
2023-06-09 05:11:18,273 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-09 05:11:18,311 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-09 05:11:18,331 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 18.572 seconds (process running for 20.141)
2023-06-09 05:11:21,891 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-09 05:11:21,892 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-09 05:11:21,898 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 6 ms
2023-06-09 05:34:20,112 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-09 05:34:20,193 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-09 05:34:20,234 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-10 12:24:54,869 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 12:24:54,988 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 77651 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 12:24:54,989 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 12:24:54,993 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 12:24:55,602 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:24:55,603 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 12:24:55,603 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:24:55,603 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 12:24:55,603 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:24:55,603 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 12:24:57,750 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 12:24:58,000 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 240 ms. Found 2 JPA repository interfaces.
2023-06-10 12:24:58,605 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=d0015f66-e3b8-3cae-883e-9390a00d766a
2023-06-10 12:24:58,844 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 12:25:00,449 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 12:25:00,472 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 12:25:00,474 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 12:25:00,474 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 12:25:00,727 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 12:25:00,727 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 5122 ms
2023-06-10 12:25:01,109 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 12:25:01,216 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2f75a9b1
2023-06-10 12:25:01,218 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 12:25:01,562 INFO l.database [main] Set default schema name to public
2023-06-10 12:25:01,860 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 12:25:02,802 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 12:25:02,901 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 12:25:02,929 INFO l.util [main] UPDATE SUMMARY
2023-06-10 12:25:02,930 INFO l.util [main] Run:                          0
2023-06-10 12:25:02,931 INFO l.util [main] Previously run:               5
2023-06-10 12:25:02,931 INFO l.util [main] Filtered out:                 0
2023-06-10 12:25:02,931 INFO l.util [main] -------------------------------
2023-06-10 12:25:02,931 INFO l.util [main] Total change sets:            5

2023-06-10 12:25:02,932 INFO l.util [main] Update summary generated
2023-06-10 12:25:02,938 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 12:25:02,948 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 12:25:02,950 INFO l.command [main] Command execution complete
2023-06-10 12:25:03,234 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 12:25:03,313 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 12:25:03,316 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 12:25:03,491 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 12:25:03,694 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 12:25:03,746 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@4351d055
2023-06-10 12:25:04,010 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 12:25:05,097 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 12:25:05,245 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 12:25:06,068 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 12:25:07,204 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 12:25:07,322 WARN o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig' defined in file [/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main/ru/clevertec/NewsManager/security/SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'ru.clevertec.NewsManager.security.JwtTokenGenerator' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2023-06-10 12:25:07,326 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 12:25:07,328 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2023-06-10 12:25:07,334 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2023-06-10 12:25:07,336 INFO o.a.c.c.StandardService [main] Stopping service [Tomcat]
2023-06-10 12:25:07,364 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-10 12:25:07,412 ERROR o.s.b.d.LoggingFailureAnalysisReporter [main] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of constructor in ru.clevertec.NewsManager.security.SecurityConfig required a bean of type 'ru.clevertec.NewsManager.security.JwtTokenGenerator' that could not be found.


Action:

Consider defining a bean of type 'ru.clevertec.NewsManager.security.JwtTokenGenerator' in your configuration.

2023-06-10 12:26:04,593 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 12:26:04,724 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 77935 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 12:26:04,728 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 12:26:04,735 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 12:26:05,384 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:26:05,385 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 12:26:05,385 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:26:05,385 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 12:26:05,385 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:26:05,385 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 12:26:07,490 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 12:26:07,753 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 253 ms. Found 2 JPA repository interfaces.
2023-06-10 12:26:08,364 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=0341f7d8-27a2-3b3d-af13-a3fc9a39c4c8
2023-06-10 12:26:08,585 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 12:26:09,910 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 12:26:09,924 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 12:26:09,925 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 12:26:09,925 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 12:26:10,123 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 12:26:10,123 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4736 ms
2023-06-10 12:26:10,433 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 12:26:10,536 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3359c3f6
2023-06-10 12:26:10,539 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 12:26:10,712 INFO l.database [main] Set default schema name to public
2023-06-10 12:26:11,161 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 12:26:12,056 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 12:26:12,162 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 12:26:12,188 INFO l.util [main] UPDATE SUMMARY
2023-06-10 12:26:12,189 INFO l.util [main] Run:                          0
2023-06-10 12:26:12,189 INFO l.util [main] Previously run:               5
2023-06-10 12:26:12,190 INFO l.util [main] Filtered out:                 0
2023-06-10 12:26:12,190 INFO l.util [main] -------------------------------
2023-06-10 12:26:12,190 INFO l.util [main] Total change sets:            5

2023-06-10 12:26:12,191 INFO l.util [main] Update summary generated
2023-06-10 12:26:12,200 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 12:26:12,212 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 12:26:12,213 INFO l.command [main] Command execution complete
2023-06-10 12:26:12,556 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 12:26:12,628 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 12:26:12,631 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 12:26:12,789 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 12:26:13,000 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 12:26:13,067 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@c19bb2a
2023-06-10 12:26:13,463 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 12:26:14,486 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 12:26:14,621 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 12:26:15,243 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 12:26:16,600 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 12:26:17,698 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3bbd9232, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@e13cc49, org.springframework.security.web.context.SecurityContextHolderFilter@7e4fc391, org.springframework.security.web.header.HeaderWriterFilter@6aa7ea23, org.springframework.security.web.authentication.logout.LogoutFilter@2a654167, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@72d9bd09, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@1107891a, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1885d990, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@541c7857, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@60c95d8, org.springframework.security.web.session.ConcurrentSessionFilter@22796ead, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4589bc66, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5e0e97b6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@40557b00, org.springframework.security.web.access.ExceptionTranslationFilter@68183f19, org.springframework.security.web.access.intercept.AuthorizationFilter@71b253b]
2023-06-10 12:26:18,482 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-10 12:26:18,510 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-10 12:26:18,536 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 15.939 seconds (process running for 17.635)
2023-06-10 12:26:46,049 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-10 12:26:46,052 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-10 12:26:46,069 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 16 ms
2023-06-10 12:27:00,049 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-7] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [POST] to [http://localhost:8084/users/authenticate] [UserManagementClient#authenticateUser(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [POST] to [http://localhost:8084/users/authenticate] [UserManagementClient#authenticateUser(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.authenticateUser(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:69)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-10 12:28:27,635 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 12:28:27,693 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-10 12:28:27,722 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-10 12:28:46,256 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 12:28:46,407 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 78617 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 12:28:46,415 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 12:28:46,420 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 12:28:47,016 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:28:47,017 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 12:28:47,017 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:28:47,017 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 12:28:47,018 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:28:47,018 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 12:28:49,177 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 12:28:49,446 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 260 ms. Found 2 JPA repository interfaces.
2023-06-10 12:28:50,089 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=0341f7d8-27a2-3b3d-af13-a3fc9a39c4c8
2023-06-10 12:28:50,337 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 12:28:51,561 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 12:28:51,575 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 12:28:51,576 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 12:28:51,576 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 12:28:51,779 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 12:28:51,779 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4760 ms
2023-06-10 12:28:52,102 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 12:28:52,222 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@16949dfa
2023-06-10 12:28:52,225 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 12:28:52,399 INFO l.database [main] Set default schema name to public
2023-06-10 12:28:52,818 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 12:28:53,827 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 12:28:53,922 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 12:28:53,947 INFO l.util [main] UPDATE SUMMARY
2023-06-10 12:28:53,948 INFO l.util [main] Run:                          0
2023-06-10 12:28:53,948 INFO l.util [main] Previously run:               5
2023-06-10 12:28:53,948 INFO l.util [main] Filtered out:                 0
2023-06-10 12:28:53,948 INFO l.util [main] -------------------------------
2023-06-10 12:28:53,948 INFO l.util [main] Total change sets:            5

2023-06-10 12:28:53,951 INFO l.util [main] Update summary generated
2023-06-10 12:28:53,957 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 12:28:53,972 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 12:28:53,973 INFO l.command [main] Command execution complete
2023-06-10 12:28:54,293 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 12:28:54,361 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 12:28:54,364 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 12:28:54,536 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 12:28:54,744 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 12:28:54,796 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@374bf34b
2023-06-10 12:28:55,201 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 12:28:56,252 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 12:28:56,381 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 12:28:57,012 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 12:28:58,393 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 12:29:00,569 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@ce4a8a2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@53b1a09f, org.springframework.security.web.context.SecurityContextHolderFilter@6e323a5d, org.springframework.security.web.header.HeaderWriterFilter@3fe8c952, org.springframework.security.web.authentication.logout.LogoutFilter@60c95d8, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@56b9a73c, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@41576e84, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@37930f48, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@78fb8a66, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@3d2162c5, org.springframework.security.web.session.ConcurrentSessionFilter@eb3b4d7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7768ffae, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7424b1ce, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@49e4b332, org.springframework.security.web.access.ExceptionTranslationFilter@4fa1bdd0, org.springframework.security.web.access.intercept.AuthorizationFilter@4dc24d88]
2023-06-10 12:29:02,322 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-10 12:29:02,371 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-10 12:29:02,411 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 18.392 seconds (process running for 20.251)
2023-06-10 12:29:03,192 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-10 12:29:03,193 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-10 12:29:03,198 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 4 ms
2023-06-10 12:29:11,639 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-3] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [POST] to [http://localhost:8084/users/authenticate] [UserManagementClient#authenticateUser(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [POST] to [http://localhost:8084/users/authenticate] [UserManagementClient#authenticateUser(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.authenticateUser(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:70)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-10 12:31:03,325 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 12:31:03,423 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-10 12:31:03,441 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-10 12:31:20,814 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 12:31:20,958 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 79238 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 12:31:20,959 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 12:31:20,971 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 12:31:21,572 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:31:21,573 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 12:31:21,573 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:31:21,573 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 12:31:21,573 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:31:21,573 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 12:31:23,788 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 12:31:24,117 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 318 ms. Found 2 JPA repository interfaces.
2023-06-10 12:31:25,402 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=0341f7d8-27a2-3b3d-af13-a3fc9a39c4c8
2023-06-10 12:31:25,831 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 12:31:27,484 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 12:31:27,500 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 12:31:27,502 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 12:31:27,502 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 12:31:27,711 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 12:31:27,712 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 6137 ms
2023-06-10 12:31:28,040 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 12:31:28,156 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@707f4647
2023-06-10 12:31:28,158 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 12:31:28,346 INFO l.database [main] Set default schema name to public
2023-06-10 12:31:28,795 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 12:31:29,977 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 12:31:30,084 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 12:31:30,109 INFO l.util [main] UPDATE SUMMARY
2023-06-10 12:31:30,110 INFO l.util [main] Run:                          0
2023-06-10 12:31:30,110 INFO l.util [main] Previously run:               5
2023-06-10 12:31:30,110 INFO l.util [main] Filtered out:                 0
2023-06-10 12:31:30,110 INFO l.util [main] -------------------------------
2023-06-10 12:31:30,110 INFO l.util [main] Total change sets:            5

2023-06-10 12:31:30,111 INFO l.util [main] Update summary generated
2023-06-10 12:31:30,121 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 12:31:30,143 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 12:31:30,145 INFO l.command [main] Command execution complete
2023-06-10 12:31:30,412 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 12:31:30,497 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 12:31:30,500 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 12:31:30,661 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 12:31:30,859 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 12:31:30,927 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@238a7e3d
2023-06-10 12:31:31,220 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 12:31:32,322 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 12:31:32,456 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 12:31:33,485 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 12:31:35,076 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 12:31:36,415 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@58084f58, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@43139322, org.springframework.security.web.context.SecurityContextHolderFilter@3697a307, org.springframework.security.web.header.HeaderWriterFilter@2a654167, org.springframework.security.web.authentication.logout.LogoutFilter@71ef3f0c, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@49f8b57d, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@4b6b9255, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@bafb3bd, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@1d21fd5a, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@39caf68a, org.springframework.security.web.session.ConcurrentSessionFilter@71b253b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7e56e272, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7768ffae, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@160c47b4, org.springframework.security.web.access.ExceptionTranslationFilter@4ff2ac2d, org.springframework.security.web.access.intercept.AuthorizationFilter@ee9b7ac]
2023-06-10 12:31:37,328 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-10 12:31:37,365 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-10 12:31:37,388 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 19.0 seconds (process running for 20.74)
2023-06-10 12:31:37,848 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-10 12:31:37,849 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-10 12:31:37,857 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 7 ms
2023-06-10 12:31:37,996 INFO r.c.N.a.l.ControllerLogAspect [http-nio-8088-exec-1] ----->GET:NewsController.readAll(..):URI is/newsARGUMENT is(pageable=Page request [number: 0, size 10, sort: UNSORTED]}
2023-06-10 12:31:38,257 INFO r.c.N.a.l.ControllerLogAspect [http-nio-8088-exec-1] <-----GET:NewsController.readAll(..):URI is/news, result is [News(id=1, author=null, time=2023-05-26T00:00, title=Sample News Title, text=Sample News Text)]ARGUMENT is(pageable=Page request [number: 0, size 10, sort: UNSORTED]}
2023-06-10 12:32:06,845 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-5] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [POST] to [http://localhost:8084/users/authenticate] [UserManagementClient#authenticateUser(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [POST] to [http://localhost:8084/users/authenticate] [UserManagementClient#authenticateUser(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.authenticateUser(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:69)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-10 12:34:03,691 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 12:34:03,780 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-10 12:34:03,792 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-10 12:35:09,204 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 12:35:09,326 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 80168 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 12:35:09,328 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 12:35:09,330 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 12:35:09,942 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:35:09,942 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 12:35:09,943 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:35:09,943 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 12:35:09,943 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:35:09,943 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 12:35:12,084 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 12:35:12,339 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 246 ms. Found 2 JPA repository interfaces.
2023-06-10 12:35:12,936 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=0341f7d8-27a2-3b3d-af13-a3fc9a39c4c8
2023-06-10 12:35:13,174 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 12:35:14,405 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 12:35:14,419 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 12:35:14,421 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 12:35:14,421 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 12:35:14,610 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 12:35:14,610 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4664 ms
2023-06-10 12:35:14,922 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 12:35:15,032 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@d6d683e
2023-06-10 12:35:15,035 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 12:35:15,395 INFO l.database [main] Set default schema name to public
2023-06-10 12:35:15,788 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 12:35:16,822 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 12:35:16,930 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 12:35:16,974 INFO l.util [main] UPDATE SUMMARY
2023-06-10 12:35:16,975 INFO l.util [main] Run:                          0
2023-06-10 12:35:16,975 INFO l.util [main] Previously run:               5
2023-06-10 12:35:16,975 INFO l.util [main] Filtered out:                 0
2023-06-10 12:35:16,975 INFO l.util [main] -------------------------------
2023-06-10 12:35:16,975 INFO l.util [main] Total change sets:            5

2023-06-10 12:35:16,978 INFO l.util [main] Update summary generated
2023-06-10 12:35:16,986 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 12:35:17,001 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 12:35:17,002 INFO l.command [main] Command execution complete
2023-06-10 12:35:17,353 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 12:35:17,430 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 12:35:17,433 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 12:35:17,595 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 12:35:17,782 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 12:35:17,840 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@67aaf882
2023-06-10 12:35:18,140 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 12:35:19,206 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 12:35:19,343 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 12:35:20,142 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 12:35:21,356 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 12:35:22,473 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@53b1a09f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3d2162c5, org.springframework.security.web.context.SecurityContextHolderFilter@3e64cf62, org.springframework.security.web.header.HeaderWriterFilter@6d16aae3, org.springframework.security.web.authentication.logout.LogoutFilter@40557b00, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@41576e84, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@37930f48, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@58084f58, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5c47ef5f, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@49e4b332, org.springframework.security.web.session.ConcurrentSessionFilter@1d4ae17e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@23195ebe, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d21fd5a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@606cb314, org.springframework.security.web.access.ExceptionTranslationFilter@3f06c9ac, org.springframework.security.web.access.intercept.AuthorizationFilter@7d5fb53a]
2023-06-10 12:35:23,488 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-10 12:35:23,524 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-10 12:35:23,564 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 16.482 seconds (process running for 18.038)
2023-06-10 12:35:39,296 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-10 12:35:39,298 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-10 12:35:39,305 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 7 ms
2023-06-10 12:35:48,110 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-3] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [401] during [GET] to [http://localhost:8084/users/authenticate] [UserManagementClient#authenticateUser(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Unauthorized: [401] during [GET] to [http://localhost:8084/users/authenticate] [UserManagementClient#authenticateUser(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:224)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.authenticateUser(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:69)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-10 12:36:44,996 WARN c.z.h.p.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Retrograde clock change detected (housekeeper delta=29s844ms), soft-evicting connections from pool.
2023-06-10 12:38:15,755 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 12:38:15,768 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-10 12:38:15,776 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-10 12:49:10,770 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 12:49:10,923 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 83629 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 12:49:10,930 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 12:49:10,933 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 12:49:11,566 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:49:11,567 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 12:49:11,567 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:49:11,567 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 12:49:11,567 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:49:11,567 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 12:49:13,714 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 12:49:14,006 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 283 ms. Found 2 JPA repository interfaces.
2023-06-10 12:49:14,626 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=0341f7d8-27a2-3b3d-af13-a3fc9a39c4c8
2023-06-10 12:49:14,840 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 12:49:16,001 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 12:49:16,031 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 12:49:16,032 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 12:49:16,032 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 12:49:16,228 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 12:49:16,229 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4660 ms
2023-06-10 12:49:16,776 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 12:49:16,965 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3f908bc0
2023-06-10 12:49:16,969 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 12:49:17,165 INFO l.database [main] Set default schema name to public
2023-06-10 12:49:17,431 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 12:49:18,401 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 12:49:18,499 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 12:49:18,528 INFO l.util [main] UPDATE SUMMARY
2023-06-10 12:49:18,529 INFO l.util [main] Run:                          0
2023-06-10 12:49:18,529 INFO l.util [main] Previously run:               5
2023-06-10 12:49:18,529 INFO l.util [main] Filtered out:                 0
2023-06-10 12:49:18,529 INFO l.util [main] -------------------------------
2023-06-10 12:49:18,529 INFO l.util [main] Total change sets:            5

2023-06-10 12:49:18,531 INFO l.util [main] Update summary generated
2023-06-10 12:49:18,538 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 12:49:18,550 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 12:49:18,552 INFO l.command [main] Command execution complete
2023-06-10 12:49:18,842 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 12:49:18,922 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 12:49:18,925 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 12:49:19,096 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 12:49:19,284 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 12:49:19,343 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@712594f4
2023-06-10 12:49:19,740 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 12:49:20,833 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 12:49:20,974 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 12:49:21,713 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 12:49:23,852 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 12:49:25,353 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@56b9a73c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@41576e84, org.springframework.security.web.context.SecurityContextHolderFilter@44e69674, org.springframework.security.web.header.HeaderWriterFilter@23038621, org.springframework.security.web.authentication.logout.LogoutFilter@1885d990, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@4568ef38, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@4b2164a9, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@11581810, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5c866852, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@37930f48, org.springframework.security.web.session.ConcurrentSessionFilter@2f9bd5ac, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7c9cecfb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@65b63277, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@58084f58, org.springframework.security.web.access.ExceptionTranslationFilter@1cd25514, org.springframework.security.web.access.intercept.AuthorizationFilter@172e4d3a]
2023-06-10 12:49:26,421 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-10 12:49:26,526 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-10 12:49:26,600 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 17.834 seconds (process running for 19.089)
2023-06-10 12:49:34,109 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-10 12:49:34,111 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-10 12:49:34,121 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 10 ms
2023-06-10 12:49:42,569 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-3] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [403] during [GET] to [http://localhost:8084/users/authenticate] [UserManagementClient#authenticateUser(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Forbidden: [403] during [GET] to [http://localhost:8084/users/authenticate] [UserManagementClient#authenticateUser(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:226)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.authenticateUser(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:67)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-10 12:52:28,418 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 12:52:28,497 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-10 12:52:28,542 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-10 12:53:11,137 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 12:53:11,270 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 84592 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 12:53:11,273 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 12:53:11,275 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 12:53:11,893 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:53:11,894 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 12:53:11,895 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:53:11,895 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 12:53:11,895 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 12:53:11,895 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 12:53:14,077 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 12:53:14,339 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 252 ms. Found 2 JPA repository interfaces.
2023-06-10 12:53:14,946 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=0341f7d8-27a2-3b3d-af13-a3fc9a39c4c8
2023-06-10 12:53:15,156 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 12:53:16,403 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 12:53:16,417 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 12:53:16,418 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 12:53:16,418 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 12:53:16,622 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 12:53:16,623 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4725 ms
2023-06-10 12:53:16,943 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 12:53:17,075 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@16949dfa
2023-06-10 12:53:17,078 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 12:53:17,413 INFO l.database [main] Set default schema name to public
2023-06-10 12:53:17,892 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 12:53:18,808 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 12:53:18,893 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 12:53:18,922 INFO l.util [main] UPDATE SUMMARY
2023-06-10 12:53:18,923 INFO l.util [main] Run:                          0
2023-06-10 12:53:18,923 INFO l.util [main] Previously run:               5
2023-06-10 12:53:18,923 INFO l.util [main] Filtered out:                 0
2023-06-10 12:53:18,923 INFO l.util [main] -------------------------------
2023-06-10 12:53:18,924 INFO l.util [main] Total change sets:            5

2023-06-10 12:53:18,927 INFO l.util [main] Update summary generated
2023-06-10 12:53:18,933 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 12:53:18,946 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 12:53:18,947 INFO l.command [main] Command execution complete
2023-06-10 12:53:19,344 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 12:53:19,427 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 12:53:19,433 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 12:53:19,651 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 12:53:19,857 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 12:53:19,924 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@374bf34b
2023-06-10 12:53:20,514 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 12:53:22,980 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 12:53:23,327 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 12:53:24,962 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 12:53:30,115 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 12:53:32,607 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@650f4d76, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ee9b7ac, org.springframework.security.web.context.SecurityContextHolderFilter@5e0e97b6, org.springframework.security.web.header.HeaderWriterFilter@70347322, org.springframework.security.web.authentication.logout.LogoutFilter@2f9bd5ac, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@471021f8, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@3bbd9232, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@e13cc49, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@63c57bde, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@6b4b6cd6, org.springframework.security.web.session.ConcurrentSessionFilter@71b3c2a7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@46f03d6d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@13c02cec, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@11ae5497, org.springframework.security.web.access.ExceptionTranslationFilter@112ec8a7, org.springframework.security.web.access.intercept.AuthorizationFilter@44e69674]
2023-06-10 12:53:35,074 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-10 12:53:35,156 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-10 12:53:35,206 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 26.413 seconds (process running for 29.458)
2023-06-10 12:53:36,250 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-10 12:53:36,251 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-10 12:53:36,266 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 15 ms
2023-06-10 12:53:45,293 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-3] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [403] during [GET] to [http://localhost:8084/users/authenticate] [UserManagementClient#authenticateUser(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Forbidden: [403] during [GET] to [http://localhost:8084/users/authenticate] [UserManagementClient#authenticateUser(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:226)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.authenticateUser(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:67)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-10 13:00:25,946 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 13:00:25,999 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-10 13:00:26,041 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-10 13:00:57,740 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 13:00:57,907 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 86510 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 13:00:57,917 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 13:00:57,923 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 13:00:58,911 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 13:00:58,912 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 13:00:58,912 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 13:00:58,912 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 13:00:58,912 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 13:00:58,912 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 13:01:01,767 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 13:01:02,038 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 262 ms. Found 2 JPA repository interfaces.
2023-06-10 13:01:02,672 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=0341f7d8-27a2-3b3d-af13-a3fc9a39c4c8
2023-06-10 13:01:02,925 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 13:01:04,989 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 13:01:05,026 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 13:01:05,030 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 13:01:05,031 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 13:01:05,548 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 13:01:05,551 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 6634 ms
2023-06-10 13:01:05,993 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 13:01:06,162 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1b69fc07
2023-06-10 13:01:06,166 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 13:01:06,751 INFO l.database [main] Set default schema name to public
2023-06-10 13:01:07,567 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 13:01:09,520 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 13:01:09,618 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 13:01:09,644 INFO l.util [main] UPDATE SUMMARY
2023-06-10 13:01:09,645 INFO l.util [main] Run:                          0
2023-06-10 13:01:09,645 INFO l.util [main] Previously run:               5
2023-06-10 13:01:09,645 INFO l.util [main] Filtered out:                 0
2023-06-10 13:01:09,645 INFO l.util [main] -------------------------------
2023-06-10 13:01:09,646 INFO l.util [main] Total change sets:            5

2023-06-10 13:01:09,649 INFO l.util [main] Update summary generated
2023-06-10 13:01:09,662 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 13:01:09,677 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 13:01:09,678 INFO l.command [main] Command execution complete
2023-06-10 13:01:10,106 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 13:01:10,200 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 13:01:10,209 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 13:01:10,642 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 13:01:11,033 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 13:01:11,134 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@236206f8
2023-06-10 13:01:11,849 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 13:01:13,855 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 13:01:14,190 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 13:01:15,419 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 13:01:18,654 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 13:01:21,589 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@78d816e6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5775485, org.springframework.security.web.context.SecurityContextHolderFilter@3f06c9ac, org.springframework.security.web.header.HeaderWriterFilter@7375e6c1, org.springframework.security.web.authentication.logout.LogoutFilter@4481a37f, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@148a581e, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@59f4df4e, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@66113b7c, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@1d4ae17e, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@ae094e8, org.springframework.security.web.session.ConcurrentSessionFilter@56c75b4f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6d16aae3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@71b253b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@42531e1b, org.springframework.security.web.access.ExceptionTranslationFilter@4b68d2a6, org.springframework.security.web.access.intercept.AuthorizationFilter@56d5a50f]
2023-06-10 13:01:24,393 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-10 13:01:24,517 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-10 13:01:24,570 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 29.489 seconds (process running for 31.387)
2023-06-10 13:01:25,364 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 13:01:25,401 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-10 13:01:25,421 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-10 13:02:02,028 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 13:02:02,146 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 86799 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 13:02:02,150 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 13:02:02,155 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 13:02:02,742 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 13:02:02,743 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 13:02:02,743 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 13:02:02,743 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 13:02:02,743 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 13:02:02,743 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 13:02:04,899 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 13:02:05,169 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 259 ms. Found 2 JPA repository interfaces.
2023-06-10 13:02:05,800 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=0341f7d8-27a2-3b3d-af13-a3fc9a39c4c8
2023-06-10 13:02:06,028 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 13:02:07,239 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 13:02:07,253 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 13:02:07,255 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 13:02:07,255 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 13:02:07,440 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 13:02:07,441 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4695 ms
2023-06-10 13:02:07,780 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 13:02:07,881 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@9cc0505
2023-06-10 13:02:07,884 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 13:02:08,047 INFO l.database [main] Set default schema name to public
2023-06-10 13:02:08,444 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 13:02:09,413 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 13:02:09,505 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 13:02:09,538 INFO l.util [main] UPDATE SUMMARY
2023-06-10 13:02:09,540 INFO l.util [main] Run:                          0
2023-06-10 13:02:09,540 INFO l.util [main] Previously run:               5
2023-06-10 13:02:09,540 INFO l.util [main] Filtered out:                 0
2023-06-10 13:02:09,540 INFO l.util [main] -------------------------------
2023-06-10 13:02:09,540 INFO l.util [main] Total change sets:            5

2023-06-10 13:02:09,544 INFO l.util [main] Update summary generated
2023-06-10 13:02:09,552 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 13:02:09,566 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 13:02:09,567 INFO l.command [main] Command execution complete
2023-06-10 13:02:09,927 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 13:02:09,999 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 13:02:10,003 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 13:02:10,167 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 13:02:10,361 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 13:02:10,429 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@317fa5dd
2023-06-10 13:02:10,841 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 13:02:11,895 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 13:02:12,028 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 13:02:12,657 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 13:02:14,419 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 13:02:15,608 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4568ef38, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4b2164a9, org.springframework.security.web.context.SecurityContextHolderFilter@5f82dd9a, org.springframework.security.web.header.HeaderWriterFilter@75e81be2, org.springframework.security.web.authentication.logout.LogoutFilter@6aa27145, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@4b98900b, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@24bd88df, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@78d816e6, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4632d697, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@11581810, org.springframework.security.web.session.ConcurrentSessionFilter@41862a32, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@765cb6c1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d4ae17e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@49f8b57d, org.springframework.security.web.access.ExceptionTranslationFilter@13c02cec, org.springframework.security.web.access.intercept.AuthorizationFilter@5c8d22de]
2023-06-10 13:02:16,732 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-10 13:02:16,795 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-10 13:02:16,828 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 16.641 seconds (process running for 17.933)
2023-06-10 13:02:26,697 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-10 13:02:26,698 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-10 13:02:26,708 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 8 ms
2023-06-10 13:02:35,060 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-3] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [403] during [GET] to [http://localhost:8084/users/authenticate] [UserManagementClient#authenticateUser(String)]: []
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: feign.FeignException$Forbidden: [403] during [GET] to [http://localhost:8084/users/authenticate] [UserManagementClient#authenticateUser(String)]: []
	at feign.FeignException.clientErrorStatus(FeignException.java:226)
	at feign.FeignException.errorStatus(FeignException.java:203)
	at feign.FeignException.errorStatus(FeignException.java:194)
	at feign.FeignException.errorStatus(FeignException.java:171)
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92)
	at feign.ResponseHandler.decodeError(ResponseHandler.java:136)
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:116)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:72)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:98)
	at jdk.proxy2/jdk.proxy2.$Proxy164.authenticateUser(Unknown Source)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:67)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-10 13:10:35,436 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 13:10:35,479 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-10 13:10:35,502 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-10 13:10:50,767 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 13:10:50,886 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 88940 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 13:10:50,893 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 13:10:50,895 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 13:10:51,517 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 13:10:51,517 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 13:10:51,517 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 13:10:51,517 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 13:10:51,517 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 13:10:51,517 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 13:10:53,743 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 13:10:54,015 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 262 ms. Found 2 JPA repository interfaces.
2023-06-10 13:10:54,612 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=0341f7d8-27a2-3b3d-af13-a3fc9a39c4c8
2023-06-10 13:10:54,825 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 13:10:56,029 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 13:10:56,044 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 13:10:56,046 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 13:10:56,046 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 13:10:56,254 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 13:10:56,255 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4735 ms
2023-06-10 13:10:56,584 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 13:10:56,701 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@707f4647
2023-06-10 13:10:56,704 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 13:10:56,899 INFO l.database [main] Set default schema name to public
2023-06-10 13:10:57,132 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 13:10:58,263 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 13:10:58,364 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 13:10:58,392 INFO l.util [main] UPDATE SUMMARY
2023-06-10 13:10:58,393 INFO l.util [main] Run:                          0
2023-06-10 13:10:58,393 INFO l.util [main] Previously run:               5
2023-06-10 13:10:58,393 INFO l.util [main] Filtered out:                 0
2023-06-10 13:10:58,393 INFO l.util [main] -------------------------------
2023-06-10 13:10:58,394 INFO l.util [main] Total change sets:            5

2023-06-10 13:10:58,397 INFO l.util [main] Update summary generated
2023-06-10 13:10:58,407 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 13:10:58,418 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 13:10:58,419 INFO l.command [main] Command execution complete
2023-06-10 13:10:58,743 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 13:10:58,805 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 13:10:58,808 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 13:10:59,035 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 13:10:59,219 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 13:10:59,270 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@238a7e3d
2023-06-10 13:10:59,573 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 13:11:00,957 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 13:11:01,096 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 13:11:02,282 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 13:11:04,656 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 13:11:07,014 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@60c95d8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@40557b00, org.springframework.security.web.context.SecurityContextHolderFilter@4589bc66, org.springframework.security.web.header.HeaderWriterFilter@24763d10, org.springframework.security.web.authentication.logout.LogoutFilter@4fa1bdd0, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@1885d990, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@6383ea52, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@5c8d22de, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4fdf83bb, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@172e4d3a, org.springframework.security.web.session.ConcurrentSessionFilter@a95807f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@734fcb45, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@46f03d6d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@74faa12, org.springframework.security.web.access.ExceptionTranslationFilter@6aa7ea23, org.springframework.security.web.access.intercept.AuthorizationFilter@19f811a2]
2023-06-10 13:11:09,285 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-10 13:11:09,383 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-10 13:11:09,452 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 20.568 seconds (process running for 21.909)
2023-06-10 13:15:30,769 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 13:15:30,807 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-10 13:15:30,829 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-10 13:57:27,671 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 13:57:27,903 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 98327 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 13:57:27,907 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 13:57:27,912 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 13:57:28,928 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 13:57:28,931 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 13:57:28,931 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 13:57:28,931 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 13:57:28,931 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 13:57:28,932 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 13:57:31,304 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 13:57:31,570 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 256 ms. Found 2 JPA repository interfaces.
2023-06-10 13:57:32,200 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=0341f7d8-27a2-3b3d-af13-a3fc9a39c4c8
2023-06-10 13:57:32,445 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 13:57:33,656 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 13:57:33,672 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 13:57:33,673 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 13:57:33,673 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 13:57:33,892 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 13:57:33,893 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4954 ms
2023-06-10 13:57:34,237 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 13:57:34,369 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5ad40184
2023-06-10 13:57:34,372 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 13:57:34,687 INFO l.database [main] Set default schema name to public
2023-06-10 13:57:35,067 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 13:57:36,094 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 13:57:36,178 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 13:57:36,206 INFO l.util [main] UPDATE SUMMARY
2023-06-10 13:57:36,207 INFO l.util [main] Run:                          0
2023-06-10 13:57:36,208 INFO l.util [main] Previously run:               5
2023-06-10 13:57:36,208 INFO l.util [main] Filtered out:                 0
2023-06-10 13:57:36,208 INFO l.util [main] -------------------------------
2023-06-10 13:57:36,208 INFO l.util [main] Total change sets:            5

2023-06-10 13:57:36,211 INFO l.util [main] Update summary generated
2023-06-10 13:57:36,217 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 13:57:36,229 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 13:57:36,230 INFO l.command [main] Command execution complete
2023-06-10 13:57:36,596 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 13:57:36,672 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 13:57:36,677 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 13:57:36,837 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 13:57:37,016 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 13:57:37,072 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@4004bfba
2023-06-10 13:57:37,450 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 13:57:38,429 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 13:57:38,557 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 13:57:39,283 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 13:57:40,659 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 13:57:41,699 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5c47ef5f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2f04c1f3, org.springframework.security.web.context.SecurityContextHolderFilter@3db8bbbe, org.springframework.security.web.header.HeaderWriterFilter@54fc7fce, org.springframework.security.web.authentication.logout.LogoutFilter@75e81be2, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@4481a37f, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@7424b1ce, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1d21fd5a, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@11869005, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@56d5a50f, org.springframework.security.web.session.ConcurrentSessionFilter@3ceb8e1f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7107a4a3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57832650, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@72d9bd09, org.springframework.security.web.access.ExceptionTranslationFilter@11bb0655, org.springframework.security.web.access.intercept.AuthorizationFilter@41862a32]
2023-06-10 13:57:42,570 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-10 13:57:42,603 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-10 13:57:42,639 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 17.061 seconds (process running for 18.475)
2023-06-10 13:57:54,021 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-10 13:57:54,026 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-10 13:57:54,045 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 19 ms
2023-06-10 14:15:38,874 WARN c.z.h.p.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=16m34s363ms).
2023-06-10 14:24:56,207 WARN c.z.h.p.HikariPool [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=8m47s300ms).
2023-06-10 14:30:35,266 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 14:30:35,298 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-10 14:30:35,316 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-10 14:32:14,234 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 14:32:14,378 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 1119 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 14:32:14,383 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 14:32:14,387 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 14:32:15,468 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 14:32:15,474 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 14:32:15,474 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 14:32:15,474 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 14:32:15,475 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 14:32:15,475 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 14:32:18,706 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 14:32:19,284 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 544 ms. Found 2 JPA repository interfaces.
2023-06-10 14:32:20,738 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=0341f7d8-27a2-3b3d-af13-a3fc9a39c4c8
2023-06-10 14:32:21,284 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 14:32:24,031 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 14:32:24,060 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 14:32:24,065 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 14:32:24,065 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 14:32:24,473 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 14:32:24,474 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 8993 ms
2023-06-10 14:32:24,888 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 14:32:25,083 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3359c3f6
2023-06-10 14:32:25,087 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 14:32:25,531 INFO l.database [main] Set default schema name to public
2023-06-10 14:32:26,240 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 14:32:27,201 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 14:32:27,296 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 14:32:27,327 INFO l.util [main] UPDATE SUMMARY
2023-06-10 14:32:27,327 INFO l.util [main] Run:                          0
2023-06-10 14:32:27,328 INFO l.util [main] Previously run:               5
2023-06-10 14:32:27,328 INFO l.util [main] Filtered out:                 0
2023-06-10 14:32:27,328 INFO l.util [main] -------------------------------
2023-06-10 14:32:27,328 INFO l.util [main] Total change sets:            5

2023-06-10 14:32:27,329 INFO l.util [main] Update summary generated
2023-06-10 14:32:27,335 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 14:32:27,347 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 14:32:27,349 INFO l.command [main] Command execution complete
2023-06-10 14:32:27,735 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 14:32:27,800 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 14:32:27,804 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 14:32:27,962 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 14:32:28,170 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 14:32:28,263 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@c19bb2a
2023-06-10 14:32:29,188 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 14:32:30,560 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 14:32:30,710 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 14:32:31,423 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 14:32:34,426 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 14:32:35,395 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@78fb8a66, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5c47ef5f, org.springframework.security.web.context.SecurityContextHolderFilter@5a342baf, org.springframework.security.web.header.HeaderWriterFilter@372e01e0, org.springframework.security.web.authentication.logout.LogoutFilter@4fdf83bb, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@5c866852, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@4481a37f, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@7424b1ce, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@7e4fc391, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2f04c1f3, org.springframework.security.web.session.ConcurrentSessionFilter@68183f19, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@22796ead, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1b6dab22, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@56d5a50f, org.springframework.security.web.access.ExceptionTranslationFilter@1e299e3f, org.springframework.security.web.access.intercept.AuthorizationFilter@4ff2ac2d]
2023-06-10 14:32:37,347 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-10 14:32:37,390 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-10 14:32:37,424 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 25.244 seconds (process running for 27.031)
2023-06-10 14:32:41,177 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-10 14:32:41,177 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-10 14:32:41,182 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 5 ms
2023-06-10 14:34:48,229 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 14:34:48,273 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-10 14:34:48,292 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-10 14:35:00,731 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 14:35:01,013 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 1866 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 14:35:01,044 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 14:35:01,055 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 14:35:02,223 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 14:35:02,226 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 14:35:02,226 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 14:35:02,226 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 14:35:02,226 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 14:35:02,227 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 14:35:05,209 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 14:35:05,567 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 341 ms. Found 2 JPA repository interfaces.
2023-06-10 14:35:06,344 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=e5d31fe8-b63a-3d26-89a2-b03b75c8021d
2023-06-10 14:35:06,650 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 14:35:07,995 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 14:35:08,009 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 14:35:08,010 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 14:35:08,011 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 14:35:08,230 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 14:35:08,231 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 5994 ms
2023-06-10 14:35:08,567 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 14:35:08,691 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@131d977f
2023-06-10 14:35:08,693 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 14:35:09,013 INFO l.database [main] Set default schema name to public
2023-06-10 14:35:09,527 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 14:35:10,452 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 14:35:10,547 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 14:35:10,577 INFO l.util [main] UPDATE SUMMARY
2023-06-10 14:35:10,582 INFO l.util [main] Run:                          0
2023-06-10 14:35:10,582 INFO l.util [main] Previously run:               5
2023-06-10 14:35:10,582 INFO l.util [main] Filtered out:                 0
2023-06-10 14:35:10,582 INFO l.util [main] -------------------------------
2023-06-10 14:35:10,582 INFO l.util [main] Total change sets:            5

2023-06-10 14:35:10,585 INFO l.util [main] Update summary generated
2023-06-10 14:35:10,595 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 14:35:10,606 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 14:35:10,609 INFO l.command [main] Command execution complete
2023-06-10 14:35:10,979 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 14:35:11,052 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 14:35:11,057 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 14:35:11,261 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 14:35:11,461 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 14:35:11,533 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@3bf52f8f
2023-06-10 14:35:12,130 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 14:35:13,427 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 14:35:13,662 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 14:35:14,552 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 14:35:16,844 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 14:35:18,269 WARN o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [ru/clevertec/NewsManager/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
2023-06-10 14:35:18,277 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 14:35:18,280 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2023-06-10 14:35:18,289 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2023-06-10 14:35:18,291 INFO o.a.c.c.StandardService [main] Stopping service [Tomcat]
2023-06-10 14:35:18,329 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-10 14:35:18,393 ERROR o.s.b.d.LoggingFailureAnalysisReporter [main] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method setFilterChains in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' in your configuration.

2023-06-10 14:38:14,103 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 14:38:14,219 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 2674 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 14:38:14,220 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 14:38:14,224 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 14:38:14,895 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 14:38:14,896 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 14:38:14,896 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 14:38:14,896 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 14:38:14,896 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 14:38:14,896 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 14:38:17,471 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 14:38:17,734 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 254 ms. Found 2 JPA repository interfaces.
2023-06-10 14:38:18,342 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=0341f7d8-27a2-3b3d-af13-a3fc9a39c4c8
2023-06-10 14:38:18,569 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 14:38:19,764 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 14:38:19,777 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 14:38:19,779 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 14:38:19,779 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 14:38:20,022 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 14:38:20,022 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 5124 ms
2023-06-10 14:38:20,369 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 14:38:20,534 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2f75a9b1
2023-06-10 14:38:20,536 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 14:38:20,718 INFO l.database [main] Set default schema name to public
2023-06-10 14:38:21,139 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 14:38:22,135 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 14:38:22,240 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 14:38:22,267 INFO l.util [main] UPDATE SUMMARY
2023-06-10 14:38:22,269 INFO l.util [main] Run:                          0
2023-06-10 14:38:22,269 INFO l.util [main] Previously run:               5
2023-06-10 14:38:22,269 INFO l.util [main] Filtered out:                 0
2023-06-10 14:38:22,269 INFO l.util [main] -------------------------------
2023-06-10 14:38:22,269 INFO l.util [main] Total change sets:            5

2023-06-10 14:38:22,271 INFO l.util [main] Update summary generated
2023-06-10 14:38:22,281 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 14:38:22,290 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 14:38:22,291 INFO l.command [main] Command execution complete
2023-06-10 14:38:22,600 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 14:38:22,664 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 14:38:22,668 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 14:38:22,837 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 14:38:23,004 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 14:38:23,053 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@4351d055
2023-06-10 14:38:23,490 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 14:38:24,567 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 14:38:24,702 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 14:38:25,311 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 14:38:26,670 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 14:38:27,737 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7e56e272, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@65b63277, org.springframework.security.web.context.SecurityContextHolderFilter@3fe5c9f1, org.springframework.security.web.header.HeaderWriterFilter@7b6846c6, org.springframework.security.web.authentication.logout.LogoutFilter@7e4fc391, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@eb3b4d7, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@1d4ae17e, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@44e69674, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@65bf5c38, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@6e323a5d, org.springframework.security.web.session.ConcurrentSessionFilter@32828624, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@775429c8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6aa7ea23, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3e64cf62, org.springframework.security.web.access.ExceptionTranslationFilter@2dc199d4, org.springframework.security.web.access.intercept.AuthorizationFilter@7375e6c1]
2023-06-10 14:38:28,663 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-10 14:38:28,701 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-10 14:38:28,725 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 16.562 seconds (process running for 17.901)
2023-06-10 14:38:39,451 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-10 14:38:39,452 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-10 14:38:39,463 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 10 ms
2023-06-10 14:39:32,321 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 14:39:32,357 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-10 14:39:32,371 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-10 15:00:11,748 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 15:00:11,877 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 8158 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 15:00:11,879 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 15:00:11,882 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 15:00:12,438 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 15:00:12,439 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 15:00:12,439 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 15:00:12,439 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 15:00:12,439 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 15:00:12,439 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 15:00:14,595 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 15:00:14,857 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 252 ms. Found 2 JPA repository interfaces.
2023-06-10 15:00:15,494 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=0341f7d8-27a2-3b3d-af13-a3fc9a39c4c8
2023-06-10 15:00:15,727 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 15:00:16,907 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 15:00:16,920 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 15:00:16,921 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 15:00:16,922 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 15:00:17,106 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 15:00:17,106 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4665 ms
2023-06-10 15:00:17,425 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 15:00:17,553 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@61836cd9
2023-06-10 15:00:17,555 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 15:00:17,715 INFO l.database [main] Set default schema name to public
2023-06-10 15:00:18,181 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 15:00:19,123 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 15:00:19,225 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 15:00:19,249 INFO l.util [main] UPDATE SUMMARY
2023-06-10 15:00:19,250 INFO l.util [main] Run:                          0
2023-06-10 15:00:19,251 INFO l.util [main] Previously run:               5
2023-06-10 15:00:19,251 INFO l.util [main] Filtered out:                 0
2023-06-10 15:00:19,251 INFO l.util [main] -------------------------------
2023-06-10 15:00:19,251 INFO l.util [main] Total change sets:            5

2023-06-10 15:00:19,252 INFO l.util [main] Update summary generated
2023-06-10 15:00:19,262 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 15:00:19,273 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 15:00:19,276 INFO l.command [main] Command execution complete
2023-06-10 15:00:19,632 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 15:00:19,705 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 15:00:19,709 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 15:00:19,881 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 15:00:20,065 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 15:00:20,128 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@27c827ec
2023-06-10 15:00:20,534 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 15:00:21,733 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 15:00:21,866 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 15:00:22,583 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 15:00:23,931 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [main] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-10 15:00:24,282 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 15:00:25,437 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1e364cea, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3e3a7482, org.springframework.security.web.context.SecurityContextHolderFilter@4fdf83bb, org.springframework.security.web.header.HeaderWriterFilter@1b6dab22, org.springframework.security.web.authentication.logout.LogoutFilter@eb3b4d7, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@650f4d76, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@ee9b7ac, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@6b4b6cd6, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@2a654167, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@61cbd0c0, org.springframework.security.web.session.ConcurrentSessionFilter@734fcb45, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@42010bc8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1cd25514, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@613d4fa6, org.springframework.security.web.access.ExceptionTranslationFilter@a95807f, org.springframework.security.web.access.intercept.AuthorizationFilter@6e323a5d]
2023-06-10 15:00:26,611 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-10 15:00:26,656 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-10 15:00:26,710 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 16.857 seconds (process running for 18.269)
2023-06-10 15:00:30,436 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-10 15:00:30,437 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-10 15:00:30,447 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 9 ms
2023-06-10 15:00:40,877 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-3] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: base64-encoded secret key cannot be null or empty.
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.lang.IllegalArgumentException: base64-encoded secret key cannot be null or empty.
	at io.jsonwebtoken.lang.Assert.hasText(Assert.java:135)
	at io.jsonwebtoken.impl.DefaultJwtBuilder.signWith(DefaultJwtBuilder.java:97)
	at ru.clevertec.NewsManager.security.JwtTokenGenerator.generateToken(JwtTokenGenerator.java:29)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:67)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-10 15:00:59,415 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 15:00:59,456 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-10 15:00:59,495 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-10 15:04:07,413 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 15:04:07,547 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 9127 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 15:04:07,549 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 15:04:07,552 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 15:04:08,277 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 15:04:08,278 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 15:04:08,279 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 15:04:08,279 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 15:04:08,279 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 15:04:08,279 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 15:04:10,408 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 15:04:10,684 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 266 ms. Found 2 JPA repository interfaces.
2023-06-10 15:04:11,267 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=0303b492-7ebc-35ca-8453-2611695b26da
2023-06-10 15:04:11,500 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 15:04:12,856 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 15:04:12,879 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 15:04:12,880 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 15:04:12,881 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 15:04:13,166 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 15:04:13,167 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4884 ms
2023-06-10 15:04:13,529 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 15:04:13,652 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@688d619c
2023-06-10 15:04:13,655 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 15:04:13,980 INFO l.database [main] Set default schema name to public
2023-06-10 15:04:14,198 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 15:04:15,354 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 15:04:15,482 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 15:04:15,511 INFO l.util [main] UPDATE SUMMARY
2023-06-10 15:04:15,513 INFO l.util [main] Run:                          0
2023-06-10 15:04:15,513 INFO l.util [main] Previously run:               5
2023-06-10 15:04:15,513 INFO l.util [main] Filtered out:                 0
2023-06-10 15:04:15,513 INFO l.util [main] -------------------------------
2023-06-10 15:04:15,513 INFO l.util [main] Total change sets:            5

2023-06-10 15:04:15,515 INFO l.util [main] Update summary generated
2023-06-10 15:04:15,526 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 15:04:15,556 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 15:04:15,559 INFO l.command [main] Command execution complete
2023-06-10 15:04:16,073 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 15:04:16,211 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 15:04:16,220 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 15:04:16,570 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 15:04:16,971 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 15:04:17,088 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@7841c990
2023-06-10 15:04:17,488 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 15:04:19,014 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 15:04:19,253 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 15:04:20,469 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 15:04:21,654 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [main] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-10 15:04:22,320 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 15:04:23,737 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@eb3b4d7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1d4ae17e, org.springframework.security.web.context.SecurityContextHolderFilter@1e299e3f, org.springframework.security.web.header.HeaderWriterFilter@2b4b3918, org.springframework.security.web.authentication.logout.LogoutFilter@a95807f, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@2f9bd5ac, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@2659225a, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@5f82dd9a, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@68183f19, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@44e69674, org.springframework.security.web.session.ConcurrentSessionFilter@503e1cd9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@372e01e0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8d0d52a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6f1af8c3, org.springframework.security.web.access.ExceptionTranslationFilter@72e89ce2, org.springframework.security.web.access.intercept.AuthorizationFilter@4589bc66]
2023-06-10 15:04:24,648 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-10 15:04:24,682 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-10 15:04:24,707 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 19.338 seconds (process running for 20.793)
2023-06-10 15:04:30,406 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-10 15:04:30,407 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-10 15:04:30,418 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 11 ms
2023-06-10 15:04:37,535 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-3] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: base64-encoded secret key cannot be null or empty.
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.lang.IllegalArgumentException: base64-encoded secret key cannot be null or empty.
	at io.jsonwebtoken.lang.Assert.hasText(Assert.java:135)
	at io.jsonwebtoken.impl.DefaultJwtBuilder.signWith(DefaultJwtBuilder.java:97)
	at ru.clevertec.NewsManager.security.JwtTokenGenerator.generateToken(JwtTokenGenerator.java:29)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:67)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-10 15:06:29,747 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 15:06:29,803 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-10 15:06:29,842 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-10 15:06:48,452 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-10 15:06:48,613 INFO r.c.N.NewsManagerApplication [main] Starting NewsManagerApplication using Java 17.0.2 with PID 9782 (/Users/artemaverkov/Concurrency/NewsManager/NewsManager/build/classes/java/main started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-10 15:06:48,615 DEBUG r.c.N.NewsManagerApplication [main] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-10 15:06:48,619 INFO r.c.N.NewsManagerApplication [main] The following 1 profile is active: "prod"
2023-06-10 15:06:49,291 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 15:06:49,292 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 15:06:49,292 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 15:06:49,292 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-10 15:06:49,292 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Fetching config from server at : http://localhost:8085
2023-06-10 15:06:49,292 INFO o.s.c.c.c.ConfigServerConfigDataLoader [main] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-10 15:06:52,042 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-10 15:06:52,336 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 282 ms. Found 2 JPA repository interfaces.
2023-06-10 15:06:53,208 INFO o.s.c.c.s.GenericScope [main] BeanFactory id=0303b492-7ebc-35ca-8453-2611695b26da
2023-06-10 15:06:53,461 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-10 15:06:54,670 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8088 (http)
2023-06-10 15:06:54,687 INFO o.a.c.h.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8088"]
2023-06-10 15:06:54,689 INFO o.a.c.c.StandardService [main] Starting service [Tomcat]
2023-06-10 15:06:54,689 INFO o.a.c.c.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/10.1.8]
2023-06-10 15:06:54,888 INFO o.a.c.c.C.[.[.[/] [main] Initializing Spring embedded WebApplicationContext
2023-06-10 15:06:54,890 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 5595 ms
2023-06-10 15:06:55,231 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2023-06-10 15:06:55,351 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@45b27ad3
2023-06-10 15:06:55,354 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2023-06-10 15:06:55,757 INFO l.database [main] Set default schema name to public
2023-06-10 15:06:56,294 INFO l.lockservice [main] Successfully acquired change log lock
2023-06-10 15:06:57,632 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 15:06:57,734 INFO l.changelog [main] Reading from public.databasechangelog
2023-06-10 15:06:57,762 INFO l.util [main] UPDATE SUMMARY
2023-06-10 15:06:57,763 INFO l.util [main] Run:                          0
2023-06-10 15:06:57,763 INFO l.util [main] Previously run:               5
2023-06-10 15:06:57,763 INFO l.util [main] Filtered out:                 0
2023-06-10 15:06:57,763 INFO l.util [main] -------------------------------
2023-06-10 15:06:57,764 INFO l.util [main] Total change sets:            5

2023-06-10 15:06:57,765 INFO l.util [main] Update summary generated
2023-06-10 15:06:57,771 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 15:06:57,783 INFO l.lockservice [main] Successfully released change log lock
2023-06-10 15:06:57,785 INFO l.command [main] Command execution complete
2023-06-10 15:06:58,087 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-10 15:06:58,170 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-10 15:06:58,173 INFO o.h.c.Environment [main] HHH000406: Using bytecode reflection optimizer
2023-06-10 15:06:58,358 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 15:06:58,632 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-10 15:06:58,736 INFO o.h.o.dialect [main] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@143900a6
2023-06-10 15:06:59,084 INFO o.h.b.i.BytecodeProviderInitiator [main] HHH000021: Bytecode provider name : bytebuddy
2023-06-10 15:07:00,064 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-10 15:07:00,198 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 15:07:00,977 INFO o.s.d.j.r.q.QueryEnhancerFactory [main] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-10 15:07:01,985 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [main] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-10 15:07:02,318 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-10 15:07:03,441 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4b2164a9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@11581810, org.springframework.security.web.context.SecurityContextHolderFilter@71b253b, org.springframework.security.web.header.HeaderWriterFilter@42010bc8, org.springframework.security.web.authentication.logout.LogoutFilter@78fb8a66, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@24bd88df, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@78d816e6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@5775485, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@7e56e272, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@49f8b57d, org.springframework.security.web.session.ConcurrentSessionFilter@2a654167, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@19f811a2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@44e69674, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4b6b9255, org.springframework.security.web.access.ExceptionTranslationFilter@4fdf83bb, org.springframework.security.web.access.intercept.AuthorizationFilter@71ef3f0c]
2023-06-10 15:07:04,327 INFO o.a.c.h.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8088"]
2023-06-10 15:07:04,367 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8088 (http) with context path ''
2023-06-10 15:07:04,409 INFO r.c.N.NewsManagerApplication [main] Started NewsManagerApplication in 18.614 seconds (process running for 20.861)
2023-06-10 15:07:12,408 INFO o.a.c.c.C.[.[.[/] [http-nio-8088-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-10 15:07:12,411 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Initializing Servlet 'dispatcherServlet'
2023-06-10 15:07:12,422 INFO o.s.w.s.DispatcherServlet [http-nio-8088-exec-1] Completed initialization in 11 ms
2023-06-10 15:07:19,489 ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter [http-nio-8088-exec-3] An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: base64-encoded secret key cannot be null or empty.
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:181)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.lang.IllegalArgumentException: base64-encoded secret key cannot be null or empty.
	at io.jsonwebtoken.lang.Assert.hasText(Assert.java:135)
	at io.jsonwebtoken.impl.DefaultJwtBuilder.signWith(DefaultJwtBuilder.java:97)
	at ru.clevertec.NewsManager.security.JwtTokenGenerator.generateToken(JwtTokenGenerator.java:29)
	at ru.clevertec.NewsManager.security.SecurityConfig.lambda$userDetailsService$4(SecurityConfig.java:67)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 62 common frames omitted
2023-06-10 15:07:46,836 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-10 15:07:46,876 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-10 15:07:46,896 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
