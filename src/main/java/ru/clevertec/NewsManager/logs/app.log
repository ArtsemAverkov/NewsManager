2023-06-18 18:45:51,193 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-18 18:45:51,344 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 20744 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 18:45:51,347 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 18:45:51,354 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 18:45:51,836 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 18:45:51,837 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-18 18:45:51,837 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 18:45:51,837 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-18 18:45:51,837 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 18:45:51,837 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-18 18:45:57,829 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 18:45:59,032 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 18:46:01,695 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@19e5e110, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1e295f7f, org.springframework.security.web.context.SecurityContextHolderFilter@5e3d84a, org.springframework.security.web.header.HeaderWriterFilter@289da1bc, org.springframework.security.web.authentication.logout.LogoutFilter@2c731a16, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@5cb76070, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@3346e906, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@443ac5b8, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3c8dea0b, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@4b762988, org.springframework.security.web.session.ConcurrentSessionFilter@79349b61, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4fce3ed7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@131b58d4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24f2608b, org.springframework.security.web.access.ExceptionTranslationFilter@780dbed7, org.springframework.security.web.access.intercept.AuthorizationFilter@285b491f]
2023-06-18 18:46:02,494 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-18 18:46:02,494 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-18 18:46:02,500 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 6 ms
2023-06-18 18:46:02,724 INFO r.c.N.c.c.CommentControllerTest [Test worker] Started CommentControllerTest in 13.427 seconds (process running for 16.573)
2023-06-18 18:47:07,101 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-18 18:47:07,272 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 21151 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 18:47:07,274 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 18:47:07,276 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 18:47:08,032 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 18:47:08,033 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-18 18:47:08,033 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 18:47:08,033 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-18 18:47:08,033 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 18:47:08,033 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-18 18:47:13,514 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 18:47:13,996 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 18:47:16,785 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4d964c9e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@42172065, org.springframework.security.web.context.SecurityContextHolderFilter@24e7087a, org.springframework.security.web.header.HeaderWriterFilter@23d12a3a, org.springframework.security.web.authentication.logout.LogoutFilter@1978b0d5, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@7e8783b0, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@788d9139, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@53d2f0ec, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@65f470f8, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@5b6f3d0b, org.springframework.security.web.session.ConcurrentSessionFilter@69a3bf40, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@284f25e6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@20d3fff4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8e77c5b, org.springframework.security.web.access.ExceptionTranslationFilter@2d9df336, org.springframework.security.web.access.intercept.AuthorizationFilter@443ac5b8]
2023-06-18 18:47:17,680 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-18 18:47:17,681 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-18 18:47:17,688 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 7 ms
2023-06-18 18:47:17,974 INFO r.c.N.c.c.CommentControllerTest [Test worker] Started CommentControllerTest in 14.021 seconds (process running for 19.187)
2023-06-18 18:50:46,704 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-18 18:50:46,832 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 22298 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 18:50:46,832 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 18:50:46,833 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 18:50:47,257 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 18:50:47,258 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 18:50:47,258 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@44ed0a8f uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 18:50:47,258 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 18:50:47,258 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 18:50:47,258 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@6a6f6c7e uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 18:50:47,258 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 18:50:47,258 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 18:50:47,258 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@1dbd580 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 18:50:51,194 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 18:50:51,470 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 18:50:52,981 WARN o.s.w.c.s.GenericWebApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [ru/clevertec/NewsManager/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
2023-06-18 18:50:52,999 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 18:50:53,061 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method setFilterChains in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' in your configuration.

2023-06-18 18:50:54,232 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-18 18:50:54,272 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@74844f8a{/__admin,null,AVAILABLE}
2023-06-18 18:50:54,296 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-18 18:50:54,296 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@526f8cb0{/,null,AVAILABLE}
2023-06-18 18:50:54,307 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@69c51fdb{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 18:50:54,324 INFO o.e.j.s.Server [Test worker] Started Server@3a225534{STARTING}[11.0.15,sto=1000] @12218ms
2023-06-18 18:50:55,038 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 22298 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 18:50:55,039 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 18:50:55,039 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 18:50:55,046 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 18:50:55,046 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@6ca97ddf uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 18:50:55,047 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 18:50:55,047 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-18 18:50:55,047 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 18:50:55,047 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@522f74a1 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 18:50:55,970 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 18:50:55,983 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 18:50:56,391 WARN o.s.w.c.s.GenericWebApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [ru/clevertec/NewsManager/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
2023-06-18 18:50:56,396 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 18:50:56,421 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method setFilterChains in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' in your configuration.

2023-06-18 18:50:56,427 ERROR o.s.t.c.TestContextManager [Test worker] Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [ru.clevertec.NewsManager.common.controller.CommentControllerTest@5b58f639]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@233ece92 testClass = ru.clevertec.NewsManager.common.controller.CommentControllerTest, locations = [], classes = [ru.clevertec.NewsManager.NewsManagerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@64da2a7, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@862bfc29, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@d733fa0a, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@7927bd9f, [ImportsContextCustomizer@4a14f7d7 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5ca17ab0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@35293c05, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@a620710b, org.springframework.boot.test.context.SpringBootTestAnnotation@bebdee47], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [ru/clevertec/NewsManager/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:941)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 89 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [ru/clevertec/NewsManager/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 114 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 130 common frames omitted
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:332)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1174)
	at org.springframework.security.config.annotation.web.configurers.oauth2.client.OAuth2ClientConfigurerUtils.getClientRegistrationRepositoryBean(OAuth2ClientConfigurerUtils.java:56)
	at org.springframework.security.config.annotation.web.configurers.oauth2.client.OAuth2ClientConfigurerUtils.getClientRegistrationRepository(OAuth2ClientConfigurerUtils.java:48)
	at org.springframework.security.config.annotation.web.configurers.oauth2.client.OAuth2LoginConfigurer.init(OAuth2LoginConfigurer.java:301)
	at org.springframework.security.config.annotation.web.configurers.oauth2.client.OAuth2LoginConfigurer.init(OAuth2LoginConfigurer.java:139)
	at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.init(AbstractConfiguredSecurityBuilder.java:338)
	at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:300)
	at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:38)
	at ru.clevertec.NewsManager.security.SecurityConfig.securityFilterChain(SecurityConfig.java:60)
	at ru.clevertec.NewsManager.security.SecurityConfig$$SpringCGLIB$$0.CGLIB$securityFilterChain$2(<generated>)
	at ru.clevertec.NewsManager.security.SecurityConfig$$SpringCGLIB$$2.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at ru.clevertec.NewsManager.security.SecurityConfig$$SpringCGLIB$$0.securityFilterChain(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 131 common frames omitted
2023-06-18 18:50:56,482 INFO o.e.j.s.Server [Test worker] Stopped Server@3a225534{STOPPING}[11.0.15,sto=1000]
2023-06-18 18:50:56,484 INFO o.e.j.s.Server [Test worker] Shutdown Server@3a225534{STOPPING}[11.0.15,sto=1000]
2023-06-18 18:50:56,490 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@69c51fdb{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 18:50:56,493 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@526f8cb0{/,null,STOPPED}
2023-06-18 18:50:56,494 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@74844f8a{/__admin,null,STOPPED}
2023-06-18 18:50:56,868 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 22298 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 18:50:56,869 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 18:50:56,870 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 18:50:56,879 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 18:50:56,880 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 18:50:56,880 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@36bd07ec uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 18:50:56,880 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 18:50:56,880 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 18:50:56,880 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@75b6bd41 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 18:50:56,881 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 18:50:56,881 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 18:50:56,881 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@7e484bd uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 18:50:57,959 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 18:50:57,989 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 18:50:58,414 WARN o.s.w.c.s.GenericWebApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [ru/clevertec/NewsManager/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
2023-06-18 18:50:58,420 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 18:50:58,441 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method setFilterChains in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' in your configuration.

2023-06-18 19:03:27,251 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-18 19:03:27,466 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 26088 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 19:03:27,467 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 19:03:27,468 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 19:03:27,992 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 19:03:27,993 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-18 19:03:27,993 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 19:03:27,993 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-18 19:03:27,993 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 19:03:27,993 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[default], label=null, version=null, state=null
2023-06-18 19:03:32,068 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 19:03:32,368 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 19:03:33,894 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@560be8c0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@14d36bb2, org.springframework.security.web.context.SecurityContextHolderFilter@a4dcede, org.springframework.security.web.header.HeaderWriterFilter@56a72887, org.springframework.security.web.authentication.logout.LogoutFilter@332fa1c, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@5dbc4598, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@1002d1c8, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@38a27ace, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@52325940, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@432448, org.springframework.security.web.session.ConcurrentSessionFilter@66a93b25, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4a773f08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@284f25e6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4452e13c, org.springframework.security.web.access.ExceptionTranslationFilter@2728add3, org.springframework.security.web.access.intercept.AuthorizationFilter@77401977]
2023-06-18 19:03:34,610 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-18 19:03:34,610 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-18 19:03:34,618 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 7 ms
2023-06-18 19:03:34,884 INFO r.c.N.c.c.CommentControllerTest [Test worker] Started CommentControllerTest in 9.895 seconds (process running for 13.082)
2023-06-18 19:03:35,966 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-18 19:03:35,985 INFO o.e.j.s.Server [Test worker] Stopped Server@39d37da8{STOPPING}[11.0.15,sto=1000]
2023-06-18 19:03:35,986 INFO o.e.j.s.Server [Test worker] Shutdown Server@39d37da8{STOPPING}[11.0.15,sto=1000]
2023-06-18 19:04:17,198 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-18 19:04:17,395 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 26331 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 19:04:17,397 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 19:04:17,400 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 19:04:18,332 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 19:04:18,334 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 19:04:18,334 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@44ed0a8f uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 19:04:18,334 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 19:04:18,334 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 19:04:18,334 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@6a6f6c7e uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 19:04:18,334 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 19:04:18,334 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 19:04:18,334 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@1dbd580 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 19:04:23,028 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 19:04:23,465 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 19:04:25,431 WARN o.s.w.c.s.GenericWebApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [ru/clevertec/NewsManager/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
2023-06-18 19:04:25,456 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 19:04:25,560 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method setFilterChains in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' in your configuration.

2023-06-18 19:04:26,815 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-18 19:04:26,876 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@407d2a01{/__admin,null,AVAILABLE}
2023-06-18 19:04:26,917 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-18 19:04:26,918 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@10abd94f{/,null,AVAILABLE}
2023-06-18 19:04:26,936 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@69ae7632{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 19:04:26,955 INFO o.e.j.s.Server [Test worker] Started Server@21f0cc97{STARTING}[11.0.15,sto=1000] @16303ms
2023-06-18 19:04:27,958 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 26331 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 19:04:27,959 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 19:04:27,959 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 19:04:27,968 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 19:04:27,968 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@62878d7c uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 19:04:27,968 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 19:04:27,968 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-18 19:04:27,968 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 19:04:27,968 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@1443539 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 19:04:29,564 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 19:04:29,591 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 19:04:30,250 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@8bd9d08, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@189f3ccd, org.springframework.security.web.context.SecurityContextHolderFilter@2662e3ff, org.springframework.security.web.header.HeaderWriterFilter@673fdc28, org.springframework.security.web.authentication.logout.LogoutFilter@19a4cdea, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@1bcdd302, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@648f48d3, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@30ce78e3, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@67b2c8bb, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2eb0932c, org.springframework.security.web.session.ConcurrentSessionFilter@49616310, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@682482ee, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@60e5db1d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@82382d1, org.springframework.security.web.access.ExceptionTranslationFilter@9fd5dd0, org.springframework.security.web.access.intercept.AuthorizationFilter@25b87e1b]
2023-06-18 19:04:31,136 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-18 19:04:31,139 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-18 19:04:31,146 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 6 ms
2023-06-18 19:04:31,328 INFO r.c.N.c.c.CommentControllerTest [Test worker] Started CommentControllerTest in 4.285 seconds (process running for 20.679)
2023-06-18 19:04:31,355 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static com.github.tomakehurst.wiremock.WireMockServer ru.clevertec.NewsManager.common.controller.CommentControllerTest.wireMockServer
2023-06-18 19:04:31,935 INFO o.e.j.s.Server [Test worker] Stopped Server@21f0cc97{STOPPING}[11.0.15,sto=1000]
2023-06-18 19:04:31,937 INFO o.e.j.s.Server [Test worker] Shutdown Server@21f0cc97{STOPPING}[11.0.15,sto=1000]
2023-06-18 19:04:31,946 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@69ae7632{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 19:04:31,951 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@10abd94f{/,null,STOPPED}
2023-06-18 19:04:31,953 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@407d2a01{/__admin,null,STOPPED}
2023-06-18 23:15:36,264 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-18 23:15:36,361 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 29060 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:15:36,362 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:15:36,363 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:15:36,907 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:15:36,908 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:15:36,908 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@24f870ee uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:15:36,908 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:15:36,908 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:15:36,908 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@187e5235 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:15:36,908 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:15:36,908 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:15:36,909 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@5434e40c uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:15:41,028 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:15:41,358 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 23:15:43,009 WARN o.s.w.c.s.GenericWebApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [ru/clevertec/NewsManager/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
2023-06-18 23:15:43,024 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:15:43,077 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method setFilterChains in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' in your configuration.

2023-06-18 23:15:43,403 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 29060 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:15:43,404 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:15:43,404 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:15:43,411 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:15:43,412 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:15:43,412 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@438a2d3 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:15:43,412 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:15:43,412 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:15:43,412 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@5c34b0f2 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:15:43,412 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:15:43,412 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:15:43,412 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@12eaa2cd uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:15:44,381 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:15:44,400 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 23:15:44,753 WARN o.s.w.c.s.GenericWebApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [ru/clevertec/NewsManager/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
2023-06-18 23:15:44,758 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:15:44,772 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method setFilterChains in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' in your configuration.

2023-06-18 23:15:44,778 ERROR o.s.t.c.TestContextManager [Test worker] Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [ru.clevertec.NewsManager.common.controller.CommentControllerTest@3465edf9]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3ec62141 testClass = ru.clevertec.NewsManager.common.controller.CommentControllerTest, locations = [], classes = [ru.clevertec.NewsManager.NewsManagerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@50687efb, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@f63f89af, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@32fd704b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@16fb356, [ImportsContextCustomizer@402c9a60 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@585811a4, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4c4d362a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@7830999b, org.springframework.boot.test.context.SpringBootTestAnnotation@4523adeb], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [ru/clevertec/NewsManager/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:818)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:770)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:941)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 89 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [ru/clevertec/NewsManager/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1633)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1488)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:810)
	... 114 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 130 common frames omitted
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:332)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1174)
	at org.springframework.security.config.annotation.web.configurers.oauth2.client.OAuth2ClientConfigurerUtils.getClientRegistrationRepositoryBean(OAuth2ClientConfigurerUtils.java:56)
	at org.springframework.security.config.annotation.web.configurers.oauth2.client.OAuth2ClientConfigurerUtils.getClientRegistrationRepository(OAuth2ClientConfigurerUtils.java:48)
	at org.springframework.security.config.annotation.web.configurers.oauth2.client.OAuth2LoginConfigurer.init(OAuth2LoginConfigurer.java:301)
	at org.springframework.security.config.annotation.web.configurers.oauth2.client.OAuth2LoginConfigurer.init(OAuth2LoginConfigurer.java:139)
	at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.init(AbstractConfiguredSecurityBuilder.java:338)
	at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:300)
	at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:38)
	at ru.clevertec.NewsManager.security.SecurityConfig.securityFilterChain(SecurityConfig.java:60)
	at ru.clevertec.NewsManager.security.SecurityConfig$$SpringCGLIB$$0.CGLIB$securityFilterChain$2(<generated>)
	at ru.clevertec.NewsManager.security.SecurityConfig$$SpringCGLIB$$2.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at ru.clevertec.NewsManager.security.SecurityConfig$$SpringCGLIB$$0.securityFilterChain(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 131 common frames omitted
2023-06-18 23:15:45,133 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 29060 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:15:45,134 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:15:45,134 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:15:45,147 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:15:45,150 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:15:45,150 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@7c857e8f uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:15:45,150 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:15:45,150 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:15:45,150 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@58647985 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:15:45,150 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:15:45,151 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:15:45,151 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@69e8b711 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:15:46,303 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:15:46,324 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 23:15:46,814 WARN o.s.w.c.s.GenericWebApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [ru/clevertec/NewsManager/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
2023-06-18 23:15:46,818 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:15:46,837 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method setFilterChains in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' in your configuration.

2023-06-18 23:17:38,166 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-18 23:17:38,278 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 29646 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:17:38,279 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:17:38,280 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:17:38,731 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:17:38,733 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:17:38,733 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@5c441290 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:17:38,734 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:17:38,734 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:17:38,734 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@d1d8e1a uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:17:38,734 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:17:38,734 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:17:38,734 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@3b48e183 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:17:42,845 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:17:43,168 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 23:17:44,947 WARN o.s.w.c.s.GenericWebApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [ru/clevertec/NewsManager/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
2023-06-18 23:17:44,961 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:17:45,020 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method setFilterChains in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' in your configuration.

2023-06-18 23:17:46,120 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-18 23:17:46,156 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@1f86f7da{/__admin,null,AVAILABLE}
2023-06-18 23:17:46,178 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-18 23:17:46,178 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@6b8f87dc{/,null,AVAILABLE}
2023-06-18 23:17:46,190 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@594f508f{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:17:46,206 INFO o.e.j.s.Server [Test worker] Started Server@6802c10e{STARTING}[11.0.15,sto=1000] @13515ms
2023-06-18 23:17:46,900 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 29646 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:17:46,900 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:17:46,901 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:17:46,906 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:17:46,907 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@31921151 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:17:46,907 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:17:46,907 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-18 23:17:46,907 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:17:46,907 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@3d0f4ac4 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:17:48,171 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:17:48,203 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 23:17:48,812 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7bf2e475, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@e75bae7, org.springframework.security.web.context.SecurityContextHolderFilter@83bbab, org.springframework.security.web.header.HeaderWriterFilter@5ee76cf2, org.springframework.security.web.authentication.logout.LogoutFilter@623a891d, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@82382d1, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@6c120b00, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@d8a2b1b, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5fb0a09e, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@3531509c, org.springframework.security.web.session.ConcurrentSessionFilter@261b27db, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@32029cd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@26d02dc6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@23169374, org.springframework.security.web.access.ExceptionTranslationFilter@1c149539, org.springframework.security.web.access.intercept.AuthorizationFilter@1b84d03d]
2023-06-18 23:17:49,637 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-18 23:17:49,639 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-18 23:17:49,644 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 4 ms
2023-06-18 23:17:49,852 INFO r.c.N.c.c.CommentControllerTest [Test worker] Started CommentControllerTest in 3.588 seconds (process running for 17.161)
2023-06-18 23:17:50,393 INFO o.e.j.s.Server [Test worker] Stopped Server@6802c10e{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:17:50,394 INFO o.e.j.s.Server [Test worker] Shutdown Server@6802c10e{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:17:50,401 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@594f508f{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:17:50,407 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@6b8f87dc{/,null,STOPPED}
2023-06-18 23:17:50,410 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@1f86f7da{/__admin,null,STOPPED}
2023-06-18 23:18:35,422 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-18 23:18:35,641 INFO r.c.N.c.c.NewsControllerTest [Test worker] Starting NewsControllerTest using Java 17.0.2 with PID 29929 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:18:35,642 DEBUG r.c.N.c.c.NewsControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:18:35,643 INFO r.c.N.c.c.NewsControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:18:36,607 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:18:36,608 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:18:36,608 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@17dd671f uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:18:36,609 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:18:36,609 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:18:36,609 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@3f1ef9d6 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:18:36,609 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:18:36,609 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:18:36,609 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@3fd9e827 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:18:41,698 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:18:42,035 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 23:18:43,745 WARN o.s.w.c.s.GenericWebApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [ru/clevertec/NewsManager/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available
2023-06-18 23:18:43,758 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:18:43,815 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method setFilterChains in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' in your configuration.

2023-06-18 23:18:44,766 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-18 23:18:44,801 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@8f8717b{/__admin,null,AVAILABLE}
2023-06-18 23:18:44,904 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-18 23:18:44,904 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@3f5f79d8{/,null,AVAILABLE}
2023-06-18 23:18:44,915 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@394950ad{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:18:44,936 INFO o.e.j.s.Server [Test worker] Started Server@64f2b1b4{STARTING}[11.0.15,sto=1000] @16052ms
2023-06-18 23:18:45,610 INFO r.c.N.c.c.NewsControllerTest [Test worker] Starting NewsControllerTest using Java 17.0.2 with PID 29929 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:18:45,610 DEBUG r.c.N.c.c.NewsControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:18:45,610 INFO r.c.N.c.c.NewsControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:18:45,616 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:18:45,616 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@47d4468a uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:18:45,616 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:18:45,616 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-18 23:18:45,616 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:18:45,616 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@5a464be7 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:18:46,677 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:18:46,693 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 23:18:47,240 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3c7787a7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2ca464bb, org.springframework.security.web.context.SecurityContextHolderFilter@45e68fac, org.springframework.security.web.header.HeaderWriterFilter@175745fc, org.springframework.security.web.authentication.logout.LogoutFilter@41d8ac75, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@23169374, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@4f2b1a2f, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@6c2a33af, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@722d3ddb, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@4767be27, org.springframework.security.web.session.ConcurrentSessionFilter@48f95f96, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@732bb49d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6debf1b8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@46f041cb, org.springframework.security.web.access.ExceptionTranslationFilter@487ee2a, org.springframework.security.web.access.intercept.AuthorizationFilter@76efa2b7]
2023-06-18 23:18:48,070 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-18 23:18:48,073 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-18 23:18:48,079 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 5 ms
2023-06-18 23:18:48,337 INFO r.c.N.c.c.NewsControllerTest [Test worker] Started NewsControllerTest in 3.323 seconds (process running for 19.453)
2023-06-18 23:18:48,931 INFO o.e.j.s.Server [Test worker] Stopped Server@64f2b1b4{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:18:48,932 INFO o.e.j.s.Server [Test worker] Shutdown Server@64f2b1b4{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:18:48,939 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@394950ad{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:18:48,942 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@3f5f79d8{/,null,STOPPED}
2023-06-18 23:18:48,943 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@8f8717b{/__admin,null,STOPPED}
2023-06-18 23:32:55,307 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-18 23:32:55,352 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@4a8e6e89{/__admin,null,AVAILABLE}
2023-06-18 23:32:55,372 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-18 23:32:55,372 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@6f798482{/,null,AVAILABLE}
2023-06-18 23:32:55,383 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@7158daf2{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:32:55,401 INFO o.e.j.s.Server [Test worker] Started Server@1cdc1bbc{STARTING}[11.0.15,sto=1000] @4555ms
2023-06-18 23:32:57,336 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-18 23:32:57,473 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 34177 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:32:57,474 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:32:57,474 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:32:57,964 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:32:57,964 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@6d0e45a5 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:32:57,964 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:32:57,964 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-18 23:32:57,964 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:32:57,964 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@14f060b8 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:33:02,408 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:33:02,707 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 23:33:04,681 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@8eeb4c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2dc77962, org.springframework.security.web.context.SecurityContextHolderFilter@7e5e7753, org.springframework.security.web.header.HeaderWriterFilter@66acaa54, org.springframework.security.web.authentication.logout.LogoutFilter@5b160208, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@63b2418e, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@70d16858, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@789f5552, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@2fca9fae, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@32bae609, org.springframework.security.web.session.ConcurrentSessionFilter@293ba26c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@395115ac, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@278cbf5a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@106b476a, org.springframework.security.web.access.ExceptionTranslationFilter@7d0312a, org.springframework.security.web.access.intercept.AuthorizationFilter@544733a4]
2023-06-18 23:33:05,694 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-18 23:33:05,698 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-18 23:33:05,706 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 8 ms
2023-06-18 23:33:05,961 INFO r.c.N.c.c.CommentControllerTest [Test worker] Started CommentControllerTest in 10.413 seconds (process running for 15.116)
2023-06-18 23:33:06,774 INFO o.e.j.s.Server [Test worker] Stopped Server@1cdc1bbc{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:33:06,785 INFO o.e.j.s.Server [Test worker] Shutdown Server@1cdc1bbc{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:33:06,800 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@7158daf2{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:33:06,810 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@6f798482{/,null,STOPPED}
2023-06-18 23:33:06,811 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@4a8e6e89{/__admin,null,STOPPED}
2023-06-18 23:52:24,751 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [Test worker] Could not detect default configuration classes for test class [ru.clevertec.NewsManager.NewsManagerApplicationTests]: NewsManagerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-06-18 23:52:25,040 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [Test worker] Found @SpringBootConfiguration ru.clevertec.NewsManager.NewsManagerApplication for test class ru.clevertec.NewsManager.NewsManagerApplicationTests
2023-06-18 23:52:27,939 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-18 23:52:28,071 INFO r.c.N.NewsManagerApplicationTests [Test worker] Starting NewsManagerApplicationTests using Java 17.0.2 with PID 40486 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:52:28,072 DEBUG r.c.N.NewsManagerApplicationTests [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:52:28,074 INFO r.c.N.NewsManagerApplicationTests [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:52:28,967 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:52:28,967 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:52:28,967 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@11c3ff67 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:52:28,967 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:52:28,967 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:52:28,968 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@43a09ce2 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:52:28,968 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:52:28,968 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:52:28,968 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@7b66322e uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:52:31,748 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-18 23:52:32,308 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 515 ms. Found 2 JPA repository interfaces.
2023-06-18 23:52:33,389 INFO o.s.c.c.s.GenericScope [Test worker] BeanFactory id=f07537ec-b284-37de-97b9-5fcc2c9f7989
2023-06-18 23:52:33,784 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:52:34,828 WARN o.s.w.c.s.GenericWebApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: Failed to instantiate [liquibase.integration.spring.SpringLiquibase]: Factory method 'liquibase' threw exception with message: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
2023-06-18 23:52:34,858 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:52:34,951 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.

Reason: Failed to determine a suitable driver class


Action:

Consider the following:
	If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.
	If you have database settings to be loaded from a particular profile you may need to activate it (the profiles prod are currently active).

2023-06-18 23:52:34,975 ERROR o.s.t.c.TestContextManager [Test worker] Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [ru.clevertec.NewsManager.NewsManagerApplicationTests@61d42275]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@670c171c testClass = ru.clevertec.NewsManager.NewsManagerApplicationTests, locations = [], classes = [ru.clevertec.NewsManager.NewsManagerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@72c927f1, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3aa3193a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16fb356, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@4d63b624, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@2e185cd7, org.springframework.boot.test.context.SpringBootTestAnnotation@2af3cbcd], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: Failed to instantiate [liquibase.integration.spring.SpringLiquibase]: Factory method 'liquibase' threw exception with message: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 88 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [liquibase.integration.spring.SpringLiquibase]: Factory method 'liquibase' threw exception with message: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 114 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.getIfUnique(DefaultListableBeanFactory.java:2098)
	at org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration$LiquibaseConfiguration.liquibase(LiquibaseAutoConfiguration.java:100)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 115 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 133 common frames omitted
Caused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class
	at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:186)
	at org.springframework.boot.autoconfigure.jdbc.PropertiesJdbcConnectionDetails.getDriverClassName(PropertiesJdbcConnectionDetails.java:49)
	at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:55)
	at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 134 common frames omitted
2023-06-18 23:52:37,394 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-18 23:52:37,442 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@d99df7a{/__admin,null,AVAILABLE}
2023-06-18 23:52:37,489 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-18 23:52:37,490 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@495f3965{/,null,AVAILABLE}
2023-06-18 23:52:37,510 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@3a7dcfb7{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:52:37,548 INFO o.e.j.s.Server [Test worker] Started Server@b04a6a4{STARTING}[11.0.15,sto=1000] @18725ms
2023-06-18 23:52:38,899 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 40486 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:52:38,903 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:52:38,904 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:52:38,921 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:52:38,927 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@52849956 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:52:38,927 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:52:38,927 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-18 23:52:38,927 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:52:38,927 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@346e5cc uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:52:44,963 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:52:45,286 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 23:52:49,740 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2b26d289, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7f680a9a, org.springframework.security.web.context.SecurityContextHolderFilter@4a4979bf, org.springframework.security.web.header.HeaderWriterFilter@106e6dfe, org.springframework.security.web.authentication.logout.LogoutFilter@4d2bcca8, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@2f726cf4, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@514eefc4, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@4700db93, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3b09582d, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@3a33d655, org.springframework.security.web.session.ConcurrentSessionFilter@59fa5a39, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6a2d0a19, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2c10f9f3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@526a1b51, org.springframework.security.web.access.ExceptionTranslationFilter@87cb1d8, org.springframework.security.web.access.intercept.AuthorizationFilter@6f45a2fd]
2023-06-18 23:52:50,630 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-18 23:52:50,633 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-18 23:52:50,644 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 8 ms
2023-06-18 23:52:51,022 INFO r.c.N.c.c.CommentControllerTest [Test worker] Started CommentControllerTest in 13.334 seconds (process running for 32.2)
2023-06-18 23:52:52,607 INFO o.e.j.s.Server [Test worker] Stopped Server@b04a6a4{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:52:52,609 INFO o.e.j.s.Server [Test worker] Shutdown Server@b04a6a4{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:52:52,622 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@3a7dcfb7{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:52:52,630 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@495f3965{/,null,STOPPED}
2023-06-18 23:52:52,634 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@d99df7a{/__admin,null,STOPPED}
2023-06-18 23:52:52,803 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-18 23:52:52,826 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@3652ce04{/__admin,null,AVAILABLE}
2023-06-18 23:52:52,834 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-18 23:52:52,834 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@40d1e561{/,null,AVAILABLE}
2023-06-18 23:52:52,839 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@2ca9e25a{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:52:52,841 INFO o.e.j.s.Server [Test worker] Started Server@2ee91bdf{STARTING}[11.0.15,sto=1000] @34019ms
2023-06-18 23:52:53,694 INFO r.c.N.c.c.NewsControllerTest [Test worker] Starting NewsControllerTest using Java 17.0.2 with PID 40486 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:52:53,695 DEBUG r.c.N.c.c.NewsControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:52:53,695 INFO r.c.N.c.c.NewsControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:52:53,707 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:52:53,710 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@3110bb19 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:52:53,712 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:52:53,712 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-18 23:52:53,712 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:52:53,712 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@48ebcce5 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:52:56,338 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:52:56,433 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 23:52:57,602 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4390b78f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@230ea983, org.springframework.security.web.context.SecurityContextHolderFilter@5d52a17b, org.springframework.security.web.header.HeaderWriterFilter@4cbf1c30, org.springframework.security.web.authentication.logout.LogoutFilter@57f8a3cf, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@16bed816, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@4cae7d5, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@4c821dc7, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@7d6e2366, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@70290678, org.springframework.security.web.session.ConcurrentSessionFilter@3c5095df, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@71c264e5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4528a871, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2c99419f, org.springframework.security.web.access.ExceptionTranslationFilter@7eaa52d6, org.springframework.security.web.access.intercept.AuthorizationFilter@5b6a9ef6]
2023-06-18 23:52:57,820 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-18 23:52:57,820 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-18 23:52:57,823 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 3 ms
2023-06-18 23:52:57,898 INFO r.c.N.c.c.NewsControllerTest [Test worker] Started NewsControllerTest in 5.031 seconds (process running for 39.076)
2023-06-18 23:52:58,314 INFO o.e.j.s.Server [Test worker] Stopped Server@2ee91bdf{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:52:58,314 INFO o.e.j.s.Server [Test worker] Shutdown Server@2ee91bdf{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:52:58,321 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@2ca9e25a{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:52:58,323 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@40d1e561{/,null,STOPPED}
2023-06-18 23:52:58,324 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@3652ce04{/__admin,null,STOPPED}
2023-06-18 23:52:58,445 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [Test worker] Could not detect default configuration classes for test class [ru.clevertec.NewsManager.common.integration.CommentsPostgresQLRepositoryTest]: CommentsPostgresQLRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-06-18 23:52:58,555 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [Test worker] Found @SpringBootConfiguration ru.clevertec.NewsManager.NewsManagerApplication for test class ru.clevertec.NewsManager.common.integration.CommentsPostgresQLRepositoryTest
2023-06-18 23:52:58,654 INFO o.t.u.ImageNameSubstitutor [Test worker] Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2023-06-18 23:52:58,941 INFO o.t.d.DockerClientProviderStrategy [Test worker] Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2023-06-18 23:53:00,115 INFO o.t.d.DockerClientProviderStrategy [Test worker] Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2023-06-18 23:53:00,130 INFO o.t.DockerClientFactory [Test worker] Docker host IP address is localhost
2023-06-18 23:53:00,393 INFO o.t.DockerClientFactory [Test worker] Connected to docker: 
  Server Version: 20.10.21
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 3933 MB
2023-06-18 23:53:00,641 INFO t.t.4.0 [Test worker] Creating container for image: testcontainers/ryuk:0.4.0
2023-06-18 23:53:02,331 INFO o.t.u.RegistryAuthLocator [Test worker] Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2023-06-18 23:53:03,380 INFO t.t.4.0 [Test worker] Container testcontainers/ryuk:0.4.0 is starting: 1fc4086bbde8929e43bd2dc87ace2256d062b1a64c7288d61b9d73b8618757dd
2023-06-18 23:53:05,722 INFO t.t.4.0 [Test worker] Container testcontainers/ryuk:0.4.0 started in PT5.279321S
2023-06-18 23:53:05,788 INFO o.t.u.RyukResourceReaper [Test worker] Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2023-06-18 23:53:05,788 INFO o.t.DockerClientFactory [Test worker] Checking the system...
2023-06-18 23:53:05,789 INFO o.t.DockerClientFactory [Test worker] ?? Docker server version should be at least 1.6.0
2023-06-18 23:53:05,792 INFO t.p.3 [Test worker] Creating container for image: postgres:14.3
2023-06-18 23:53:05,863 INFO t.p.3 [Test worker] Container postgres:14.3 is starting: b9458cbba8cac5575a8e707d8cd516290050e935620dd48b2351a2d307f9fc14
2023-06-18 23:53:07,949 INFO t.p.3 [Test worker] Container postgres:14.3 started in PT2.158249S
2023-06-18 23:53:07,955 INFO t.p.3 [Test worker] Container is started (JDBC URL: jdbc:postgresql://localhost:54473/test?loggerLevel=OFF)
2023-06-18 23:53:08,261 INFO r.c.N.c.i.CommentsPostgresQLRepositoryTest [Test worker] Starting CommentsPostgresQLRepositoryTest using Java 17.0.2 with PID 40486 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:53:08,262 DEBUG r.c.N.c.i.CommentsPostgresQLRepositoryTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:53:08,262 INFO r.c.N.c.i.CommentsPostgresQLRepositoryTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:53:08,269 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:53:08,270 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:53:08,271 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@57fd93f9 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:53:08,271 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:53:08,271 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:53:08,272 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@9e2946 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:53:08,272 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:53:08,272 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:53:08,272 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@4913465d uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:53:08,642 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-18 23:53:08,679 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2023-06-18 23:53:08,929 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Starting...
2023-06-18 23:53:09,176 INFO c.z.h.p.HikariPool [Test worker] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@61c0a61
2023-06-18 23:53:09,180 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Start completed.
2023-06-18 23:53:09,410 INFO l.database [Test worker] Set default schema name to public
2023-06-18 23:53:09,864 INFO l.lockservice [Test worker] Successfully acquired change log lock
2023-06-18 23:53:09,958 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-18 23:53:09,959 INFO l.command [Test worker] Command execution complete
2023-06-18 23:53:09,966 WARN o.s.c.a.AnnotationConfigApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2023-06-18 23:53:09,966 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Shutdown initiated...
2023-06-18 23:53:09,983 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Shutdown completed.
2023-06-18 23:53:09,989 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:53:09,997 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2023-06-18 23:53:10,003 ERROR o.s.t.c.TestContextManager [Test worker] Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [ru.clevertec.NewsManager.common.integration.CommentsPostgresQLRepositoryTest@2674c88f]
java.lang.IllegalStateException: Failed to load ApplicationContext for [MergedContextConfiguration@414749f8 testClass = ru.clevertec.NewsManager.common.integration.CommentsPostgresQLRepositoryTest, locations = [], classes = [ru.clevertec.NewsManager.NewsManagerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@6585df70, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@351584c0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@cbf36618, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@72c927f1, [ImportsContextCustomizer@40d22a60 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3aa3193a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16fb356, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@9ece5abb, org.springframework.boot.test.context.SpringBootTestAnnotation@21bcf575], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 88 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:235)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:237)
	at liquibase.Scope.lambda$child$0(Scope.java:194)
	at liquibase.Scope.child(Scope.java:203)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:172)
	at liquibase.Liquibase.runInScope(Liquibase.java:1605)
	at liquibase.Liquibase.update(Liquibase.java:229)
	at liquibase.Liquibase.update(Liquibase.java:213)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:329)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:284)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1816)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766)
	... 111 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:31)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:104)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:81)
	at liquibase.command.CommandScope.execute(CommandScope.java:212)
	... 123 common frames omitted
2023-06-18 23:53:10,251 INFO r.c.N.c.i.CommentsPostgresQLRepositoryTest [Test worker] Starting CommentsPostgresQLRepositoryTest using Java 17.0.2 with PID 40486 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:53:10,252 DEBUG r.c.N.c.i.CommentsPostgresQLRepositoryTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:53:10,252 INFO r.c.N.c.i.CommentsPostgresQLRepositoryTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:53:10,256 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:53:10,256 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:53:10,256 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@3b977a31 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:53:10,256 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:53:10,256 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:53:10,256 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@35e04107 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:53:10,256 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:53:10,256 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:53:10,256 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@465652a2 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:53:10,531 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-18 23:53:10,554 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2023-06-18 23:53:10,650 INFO c.z.h.HikariDataSource [Test worker] HikariPool-2 - Starting...
2023-06-18 23:53:10,706 INFO c.z.h.p.HikariPool [Test worker] HikariPool-2 - Added connection org.postgresql.jdbc.PgConnection@791d785c
2023-06-18 23:53:10,707 INFO c.z.h.HikariDataSource [Test worker] HikariPool-2 - Start completed.
2023-06-18 23:53:10,735 INFO l.database [Test worker] Set default schema name to public
2023-06-18 23:53:10,779 INFO l.lockservice [Test worker] Successfully acquired change log lock
2023-06-18 23:53:10,789 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-18 23:53:10,791 INFO l.command [Test worker] Command execution complete
2023-06-18 23:53:10,792 WARN o.s.c.a.AnnotationConfigApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2023-06-18 23:53:10,793 INFO c.z.h.HikariDataSource [Test worker] HikariPool-2 - Shutdown initiated...
2023-06-18 23:53:10,794 INFO c.z.h.HikariDataSource [Test worker] HikariPool-2 - Shutdown completed.
2023-06-18 23:53:10,795 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:53:10,798 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2023-06-18 23:53:10,799 ERROR o.s.t.c.TestContextManager [Test worker] Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [ru.clevertec.NewsManager.common.integration.CommentsPostgresQLRepositoryTest@345236c6]
java.lang.IllegalStateException: Failed to load ApplicationContext for [MergedContextConfiguration@414749f8 testClass = ru.clevertec.NewsManager.common.integration.CommentsPostgresQLRepositoryTest, locations = [], classes = [ru.clevertec.NewsManager.NewsManagerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@6585df70, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@351584c0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@cbf36618, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@72c927f1, [ImportsContextCustomizer@40d22a60 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3aa3193a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16fb356, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@9ece5abb, org.springframework.boot.test.context.SpringBootTestAnnotation@21bcf575], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 88 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:235)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:237)
	at liquibase.Scope.lambda$child$0(Scope.java:194)
	at liquibase.Scope.child(Scope.java:203)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:172)
	at liquibase.Liquibase.runInScope(Liquibase.java:1605)
	at liquibase.Liquibase.update(Liquibase.java:229)
	at liquibase.Liquibase.update(Liquibase.java:213)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:329)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:284)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1816)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766)
	... 111 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:31)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:104)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:81)
	at liquibase.command.CommandScope.execute(CommandScope.java:212)
	... 123 common frames omitted
2023-06-18 23:53:10,843 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [Test worker] Could not detect default configuration classes for test class [ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest]: NewsPostgresQLRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-06-18 23:53:10,855 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [Test worker] Found @SpringBootConfiguration ru.clevertec.NewsManager.NewsManagerApplication for test class ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest
2023-06-18 23:53:10,859 INFO t.p.3 [Test worker] Creating container for image: postgres:14.3
2023-06-18 23:53:10,980 INFO t.p.3 [Test worker] Container postgres:14.3 is starting: 141810e99114d397cc9917bff355e5679ef89795762e5fe7e6a3f313f9dfaf39
2023-06-18 23:53:12,768 INFO t.p.3 [Test worker] Container postgres:14.3 started in PT1.909189S
2023-06-18 23:53:12,770 INFO t.p.3 [Test worker] Container is started (JDBC URL: jdbc:postgresql://localhost:54492/test?loggerLevel=OFF)
2023-06-18 23:53:12,963 INFO r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] Starting NewsPostgresQLRepositoryTest using Java 17.0.2 with PID 40486 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:53:12,964 DEBUG r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:53:12,964 INFO r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:53:12,968 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:53:12,969 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:53:12,969 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@53ef0db3 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:53:12,969 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:53:12,969 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:53:12,969 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@76312df9 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:53:12,969 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:53:12,969 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:53:12,969 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@1b256636 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:53:13,167 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-18 23:53:13,188 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 20 ms. Found 2 JPA repository interfaces.
2023-06-18 23:53:13,435 INFO c.z.h.HikariDataSource [Test worker] HikariPool-3 - Starting...
2023-06-18 23:53:13,512 INFO c.z.h.p.HikariPool [Test worker] HikariPool-3 - Added connection org.postgresql.jdbc.PgConnection@3cac962e
2023-06-18 23:53:13,513 INFO c.z.h.HikariDataSource [Test worker] HikariPool-3 - Start completed.
2023-06-18 23:53:13,534 INFO l.database [Test worker] Set default schema name to public
2023-06-18 23:53:13,615 INFO l.lockservice [Test worker] Successfully acquired change log lock
2023-06-18 23:53:13,629 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-18 23:53:13,630 INFO l.command [Test worker] Command execution complete
2023-06-18 23:53:13,632 WARN o.s.c.a.AnnotationConfigApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2023-06-18 23:53:13,633 INFO c.z.h.HikariDataSource [Test worker] HikariPool-3 - Shutdown initiated...
2023-06-18 23:53:13,657 INFO c.z.h.HikariDataSource [Test worker] HikariPool-3 - Shutdown completed.
2023-06-18 23:53:13,660 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:53:13,665 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2023-06-18 23:53:13,669 ERROR o.s.t.c.TestContextManager [Test worker] Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest@14221dc6]
java.lang.IllegalStateException: Failed to load ApplicationContext for [MergedContextConfiguration@7d6e3e42 testClass = ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest, locations = [], classes = [ru.clevertec.NewsManager.NewsManagerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@6585df70, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@351584c0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@cbf36618, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@72c927f1, [ImportsContextCustomizer@103388c6 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3aa3193a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16fb356, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@9ece5abb, org.springframework.boot.test.context.SpringBootTestAnnotation@21bcf575], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 88 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:235)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:237)
	at liquibase.Scope.lambda$child$0(Scope.java:194)
	at liquibase.Scope.child(Scope.java:203)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:172)
	at liquibase.Liquibase.runInScope(Liquibase.java:1605)
	at liquibase.Liquibase.update(Liquibase.java:229)
	at liquibase.Liquibase.update(Liquibase.java:213)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:329)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:284)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1816)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766)
	... 111 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:31)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:104)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:81)
	at liquibase.command.CommandScope.execute(CommandScope.java:212)
	... 123 common frames omitted
2023-06-18 23:53:13,885 INFO r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] Starting NewsPostgresQLRepositoryTest using Java 17.0.2 with PID 40486 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:53:13,885 DEBUG r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:53:13,885 INFO r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:53:13,890 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:53:13,890 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:53:13,890 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@3546439b uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:53:13,890 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:53:13,890 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:53:13,890 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@29ac632a uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:53:13,890 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:53:13,890 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:53:13,890 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@3cc9957d uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:53:14,113 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-18 23:53:14,137 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 22 ms. Found 2 JPA repository interfaces.
2023-06-18 23:53:14,208 INFO c.z.h.HikariDataSource [Test worker] HikariPool-4 - Starting...
2023-06-18 23:53:14,253 INFO c.z.h.p.HikariPool [Test worker] HikariPool-4 - Added connection org.postgresql.jdbc.PgConnection@5a1b205
2023-06-18 23:53:14,253 INFO c.z.h.HikariDataSource [Test worker] HikariPool-4 - Start completed.
2023-06-18 23:53:14,272 INFO l.database [Test worker] Set default schema name to public
2023-06-18 23:53:14,321 INFO l.lockservice [Test worker] Successfully acquired change log lock
2023-06-18 23:53:14,331 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-18 23:53:14,332 INFO l.command [Test worker] Command execution complete
2023-06-18 23:53:14,334 WARN o.s.c.a.AnnotationConfigApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2023-06-18 23:53:14,335 INFO c.z.h.HikariDataSource [Test worker] HikariPool-4 - Shutdown initiated...
2023-06-18 23:53:14,335 INFO c.z.h.HikariDataSource [Test worker] HikariPool-4 - Shutdown completed.
2023-06-18 23:53:14,337 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:53:14,339 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2023-06-18 23:53:14,342 ERROR o.s.t.c.TestContextManager [Test worker] Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest@60296d11]
java.lang.IllegalStateException: Failed to load ApplicationContext for [MergedContextConfiguration@7d6e3e42 testClass = ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest, locations = [], classes = [ru.clevertec.NewsManager.NewsManagerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@6585df70, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@351584c0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@cbf36618, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@72c927f1, [ImportsContextCustomizer@103388c6 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3aa3193a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16fb356, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@9ece5abb, org.springframework.boot.test.context.SpringBootTestAnnotation@21bcf575], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 88 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:235)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:237)
	at liquibase.Scope.lambda$child$0(Scope.java:194)
	at liquibase.Scope.child(Scope.java:203)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:172)
	at liquibase.Liquibase.runInScope(Liquibase.java:1605)
	at liquibase.Liquibase.update(Liquibase.java:229)
	at liquibase.Liquibase.update(Liquibase.java:213)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:329)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:284)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1816)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766)
	... 111 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:31)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:104)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:81)
	at liquibase.command.CommandScope.execute(CommandScope.java:212)
	... 123 common frames omitted
2023-06-18 23:53:14,552 INFO r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] Starting NewsPostgresQLRepositoryTest using Java 17.0.2 with PID 40486 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:53:14,553 DEBUG r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:53:14,554 INFO r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:53:14,563 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:53:14,563 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:53:14,563 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@47b8f783 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:53:14,563 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:53:14,563 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:53:14,563 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@595f803 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:53:14,563 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:53:14,563 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:53:14,563 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@46ddf016 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:53:14,771 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-18 23:53:14,810 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 38 ms. Found 2 JPA repository interfaces.
2023-06-18 23:53:14,866 INFO c.z.h.HikariDataSource [Test worker] HikariPool-5 - Starting...
2023-06-18 23:53:14,907 INFO c.z.h.p.HikariPool [Test worker] HikariPool-5 - Added connection org.postgresql.jdbc.PgConnection@4ba64e36
2023-06-18 23:53:14,907 INFO c.z.h.HikariDataSource [Test worker] HikariPool-5 - Start completed.
2023-06-18 23:53:14,925 INFO l.database [Test worker] Set default schema name to public
2023-06-18 23:53:14,970 INFO l.lockservice [Test worker] Successfully acquired change log lock
2023-06-18 23:53:14,979 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-18 23:53:14,980 INFO l.command [Test worker] Command execution complete
2023-06-18 23:53:14,981 WARN o.s.c.a.AnnotationConfigApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2023-06-18 23:53:14,982 INFO c.z.h.HikariDataSource [Test worker] HikariPool-5 - Shutdown initiated...
2023-06-18 23:53:14,983 INFO c.z.h.HikariDataSource [Test worker] HikariPool-5 - Shutdown completed.
2023-06-18 23:53:14,984 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:53:14,986 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2023-06-18 23:53:14,988 ERROR o.s.t.c.TestContextManager [Test worker] Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest@27b8daa1]
java.lang.IllegalStateException: Failed to load ApplicationContext for [MergedContextConfiguration@7d6e3e42 testClass = ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest, locations = [], classes = [ru.clevertec.NewsManager.NewsManagerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@6585df70, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@351584c0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@cbf36618, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@72c927f1, [ImportsContextCustomizer@103388c6 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3aa3193a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16fb356, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@9ece5abb, org.springframework.boot.test.context.SpringBootTestAnnotation@21bcf575], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 88 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:235)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:237)
	at liquibase.Scope.lambda$child$0(Scope.java:194)
	at liquibase.Scope.child(Scope.java:203)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:172)
	at liquibase.Liquibase.runInScope(Liquibase.java:1605)
	at liquibase.Liquibase.update(Liquibase.java:229)
	at liquibase.Liquibase.update(Liquibase.java:213)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:329)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:284)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1816)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766)
	... 111 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:31)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:104)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:81)
	at liquibase.command.CommandScope.execute(CommandScope.java:212)
	... 123 common frames omitted
2023-06-18 23:55:56,746 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [Test worker] Could not detect default configuration classes for test class [ru.clevertec.NewsManager.NewsManagerApplicationTests]: NewsManagerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-06-18 23:55:57,170 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [Test worker] Found @SpringBootConfiguration ru.clevertec.NewsManager.NewsManagerApplication for test class ru.clevertec.NewsManager.NewsManagerApplicationTests
2023-06-18 23:56:01,567 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-18 23:56:01,795 INFO r.c.N.NewsManagerApplicationTests [Test worker] Starting NewsManagerApplicationTests using Java 17.0.2 with PID 41617 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:56:01,796 DEBUG r.c.N.NewsManagerApplicationTests [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:56:01,797 INFO r.c.N.NewsManagerApplicationTests [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:56:03,422 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:03,435 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:56:03,436 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@4397a639 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:56:03,437 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:03,441 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:56:03,441 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@3f183caa uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:56:03,441 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:03,441 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:56:03,442 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@63538bb4 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:56:07,730 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-18 23:56:08,640 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 725 ms. Found 2 JPA repository interfaces.
2023-06-18 23:56:10,248 INFO o.s.c.c.s.GenericScope [Test worker] BeanFactory id=f07537ec-b284-37de-97b9-5fcc2c9f7989
2023-06-18 23:56:10,859 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:56:12,341 WARN o.s.w.c.s.GenericWebApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: Failed to instantiate [liquibase.integration.spring.SpringLiquibase]: Factory method 'liquibase' threw exception with message: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
2023-06-18 23:56:12,393 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:56:12,468 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.

Reason: Failed to determine a suitable driver class


Action:

Consider the following:
	If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.
	If you have database settings to be loaded from a particular profile you may need to activate it (the profiles prod are currently active).

2023-06-18 23:56:12,488 ERROR o.s.t.c.TestContextManager [Test worker] Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [ru.clevertec.NewsManager.NewsManagerApplicationTests@61d42275]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@670c171c testClass = ru.clevertec.NewsManager.NewsManagerApplicationTests, locations = [], classes = [ru.clevertec.NewsManager.NewsManagerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1ac85b0c, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1ee4730, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bc248ed, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@466cf502, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@7e1a1da6, org.springframework.boot.test.context.SpringBootTestAnnotation@2af3cbcd], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: Failed to instantiate [liquibase.integration.spring.SpringLiquibase]: Factory method 'liquibase' threw exception with message: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 88 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [liquibase.integration.spring.SpringLiquibase]: Factory method 'liquibase' threw exception with message: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 114 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.getIfUnique(DefaultListableBeanFactory.java:2098)
	at org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration$LiquibaseConfiguration.liquibase(LiquibaseAutoConfiguration.java:100)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 115 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 133 common frames omitted
Caused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class
	at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:186)
	at org.springframework.boot.autoconfigure.jdbc.PropertiesJdbcConnectionDetails.getDriverClassName(PropertiesJdbcConnectionDetails.java:49)
	at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:55)
	at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 134 common frames omitted
2023-06-18 23:56:12,847 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [Test worker] Could not detect default configuration classes for test class [ru.clevertec.NewsManager.common.integration.CommentsPostgresQLRepositoryTest]: CommentsPostgresQLRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-06-18 23:56:13,139 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [Test worker] Found @SpringBootConfiguration ru.clevertec.NewsManager.NewsManagerApplication for test class ru.clevertec.NewsManager.common.integration.CommentsPostgresQLRepositoryTest
2023-06-18 23:56:13,325 INFO o.t.u.ImageNameSubstitutor [Test worker] Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2023-06-18 23:56:13,855 INFO o.t.d.DockerClientProviderStrategy [Test worker] Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2023-06-18 23:56:15,275 INFO o.t.d.DockerClientProviderStrategy [Test worker] Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2023-06-18 23:56:15,301 INFO o.t.DockerClientFactory [Test worker] Docker host IP address is localhost
2023-06-18 23:56:15,464 INFO o.t.DockerClientFactory [Test worker] Connected to docker: 
  Server Version: 20.10.21
  API Version: 1.41
  Operating System: Docker Desktop
  Total Memory: 3933 MB
2023-06-18 23:56:15,760 INFO t.t.4.0 [Test worker] Creating container for image: testcontainers/ryuk:0.4.0
2023-06-18 23:56:17,259 INFO o.t.u.RegistryAuthLocator [Test worker] Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2023-06-18 23:56:18,553 INFO t.t.4.0 [Test worker] Container testcontainers/ryuk:0.4.0 is starting: a5321e111b332fb2faad90709c1238b3c883ee030d53496bfa3657345ee773d3
2023-06-18 23:56:21,195 INFO t.t.4.0 [Test worker] Container testcontainers/ryuk:0.4.0 started in PT5.700845S
2023-06-18 23:56:21,215 INFO o.t.u.RyukResourceReaper [Test worker] Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2023-06-18 23:56:21,217 INFO o.t.DockerClientFactory [Test worker] Checking the system...
2023-06-18 23:56:21,218 INFO o.t.DockerClientFactory [Test worker] ?? Docker server version should be at least 1.6.0
2023-06-18 23:56:21,222 INFO t.p.3 [Test worker] Creating container for image: postgres:14.3
2023-06-18 23:56:21,270 INFO t.p.3 [Test worker] Container postgres:14.3 is starting: 669559e0b1e7f341b8918d44c8931cebada20ae4c9bc8290e7d0fbe10b77f2a2
2023-06-18 23:56:23,266 INFO t.p.3 [Test worker] Container postgres:14.3 started in PT2.044843S
2023-06-18 23:56:23,272 INFO t.p.3 [Test worker] Container is started (JDBC URL: jdbc:postgresql://localhost:55259/test?loggerLevel=OFF)
2023-06-18 23:56:23,639 INFO r.c.N.c.i.CommentsPostgresQLRepositoryTest [Test worker] Starting CommentsPostgresQLRepositoryTest using Java 17.0.2 with PID 41617 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:56:23,639 DEBUG r.c.N.c.i.CommentsPostgresQLRepositoryTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:56:23,640 INFO r.c.N.c.i.CommentsPostgresQLRepositoryTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:56:23,649 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:23,650 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:56:23,650 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@5cc152f9 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:56:23,650 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:23,650 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:56:23,650 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@4797023d uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:56:23,650 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:23,650 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:56:23,650 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@2b06f498 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:56:24,366 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-18 23:56:24,419 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 46 ms. Found 2 JPA repository interfaces.
2023-06-18 23:56:24,710 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Starting...
2023-06-18 23:56:25,064 INFO c.z.h.p.HikariPool [Test worker] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6a24c41d
2023-06-18 23:56:25,067 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Start completed.
2023-06-18 23:56:25,357 INFO l.database [Test worker] Set default schema name to public
2023-06-18 23:56:26,038 INFO l.lockservice [Test worker] Successfully acquired change log lock
2023-06-18 23:56:26,251 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-18 23:56:26,252 INFO l.command [Test worker] Command execution complete
2023-06-18 23:56:26,257 WARN o.s.c.a.AnnotationConfigApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2023-06-18 23:56:26,258 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Shutdown initiated...
2023-06-18 23:56:26,276 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Shutdown completed.
2023-06-18 23:56:26,290 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:56:26,316 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2023-06-18 23:56:26,334 ERROR o.s.t.c.TestContextManager [Test worker] Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [ru.clevertec.NewsManager.common.integration.CommentsPostgresQLRepositoryTest@3ef4a8fb]
java.lang.IllegalStateException: Failed to load ApplicationContext for [MergedContextConfiguration@341141ab testClass = ru.clevertec.NewsManager.common.integration.CommentsPostgresQLRepositoryTest, locations = [], classes = [ru.clevertec.NewsManager.NewsManagerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@66abb2fa, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@351584c0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@cab274ea, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1ac85b0c, [ImportsContextCustomizer@1773faf8 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1ee4730, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bc248ed, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@9ece5abb, org.springframework.boot.test.context.SpringBootTestAnnotation@659ae868], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 88 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:235)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:237)
	at liquibase.Scope.lambda$child$0(Scope.java:194)
	at liquibase.Scope.child(Scope.java:203)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:172)
	at liquibase.Liquibase.runInScope(Liquibase.java:1605)
	at liquibase.Liquibase.update(Liquibase.java:229)
	at liquibase.Liquibase.update(Liquibase.java:213)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:329)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:284)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1816)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766)
	... 111 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:31)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:104)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:81)
	at liquibase.command.CommandScope.execute(CommandScope.java:212)
	... 123 common frames omitted
2023-06-18 23:56:26,861 INFO r.c.N.c.i.CommentsPostgresQLRepositoryTest [Test worker] Starting CommentsPostgresQLRepositoryTest using Java 17.0.2 with PID 41617 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:56:26,862 DEBUG r.c.N.c.i.CommentsPostgresQLRepositoryTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:56:26,862 INFO r.c.N.c.i.CommentsPostgresQLRepositoryTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:56:26,874 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:26,876 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:56:26,876 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@4b9dd787 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:56:26,876 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:26,876 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:56:26,877 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@195888a6 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:56:26,877 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:26,877 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:56:26,877 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@580c4c0b uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:56:27,368 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-18 23:56:27,413 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 43 ms. Found 2 JPA repository interfaces.
2023-06-18 23:56:27,640 INFO c.z.h.HikariDataSource [Test worker] HikariPool-2 - Starting...
2023-06-18 23:56:27,717 INFO c.z.h.p.HikariPool [Test worker] HikariPool-2 - Added connection org.postgresql.jdbc.PgConnection@47a90d2a
2023-06-18 23:56:27,718 INFO c.z.h.HikariDataSource [Test worker] HikariPool-2 - Start completed.
2023-06-18 23:56:27,751 INFO l.database [Test worker] Set default schema name to public
2023-06-18 23:56:27,805 INFO l.lockservice [Test worker] Successfully acquired change log lock
2023-06-18 23:56:27,821 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-18 23:56:27,824 INFO l.command [Test worker] Command execution complete
2023-06-18 23:56:27,826 WARN o.s.c.a.AnnotationConfigApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2023-06-18 23:56:27,826 INFO c.z.h.HikariDataSource [Test worker] HikariPool-2 - Shutdown initiated...
2023-06-18 23:56:27,870 INFO c.z.h.HikariDataSource [Test worker] HikariPool-2 - Shutdown completed.
2023-06-18 23:56:27,875 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:56:27,880 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2023-06-18 23:56:27,885 ERROR o.s.t.c.TestContextManager [Test worker] Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [ru.clevertec.NewsManager.common.integration.CommentsPostgresQLRepositoryTest@3c1ef806]
java.lang.IllegalStateException: Failed to load ApplicationContext for [MergedContextConfiguration@341141ab testClass = ru.clevertec.NewsManager.common.integration.CommentsPostgresQLRepositoryTest, locations = [], classes = [ru.clevertec.NewsManager.NewsManagerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@66abb2fa, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@351584c0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@cab274ea, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1ac85b0c, [ImportsContextCustomizer@1773faf8 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1ee4730, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bc248ed, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@9ece5abb, org.springframework.boot.test.context.SpringBootTestAnnotation@659ae868], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 88 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:235)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:237)
	at liquibase.Scope.lambda$child$0(Scope.java:194)
	at liquibase.Scope.child(Scope.java:203)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:172)
	at liquibase.Liquibase.runInScope(Liquibase.java:1605)
	at liquibase.Liquibase.update(Liquibase.java:229)
	at liquibase.Liquibase.update(Liquibase.java:213)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:329)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:284)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1816)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766)
	... 111 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:31)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:104)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:81)
	at liquibase.command.CommandScope.execute(CommandScope.java:212)
	... 123 common frames omitted
2023-06-18 23:56:27,965 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [Test worker] Could not detect default configuration classes for test class [ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest]: NewsPostgresQLRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-06-18 23:56:28,022 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [Test worker] Found @SpringBootConfiguration ru.clevertec.NewsManager.NewsManagerApplication for test class ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest
2023-06-18 23:56:28,030 INFO t.p.3 [Test worker] Creating container for image: postgres:14.3
2023-06-18 23:56:28,244 INFO t.p.3 [Test worker] Container postgres:14.3 is starting: 0680ad7f41cafd33bedbee3827b66c93a9754d8baafb6f6a6e3f5aeee35c1d1e
2023-06-18 23:56:30,388 INFO t.p.3 [Test worker] Container postgres:14.3 started in PT2.358482S
2023-06-18 23:56:30,390 INFO t.p.3 [Test worker] Container is started (JDBC URL: jdbc:postgresql://localhost:55280/test?loggerLevel=OFF)
2023-06-18 23:56:30,597 INFO r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] Starting NewsPostgresQLRepositoryTest using Java 17.0.2 with PID 41617 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:56:30,598 DEBUG r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:56:30,598 INFO r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:56:30,603 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:30,604 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:56:30,605 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@94b5fe3 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:56:30,606 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:30,608 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:56:30,608 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@c6db00d uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:56:30,608 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:30,608 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:56:30,608 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@413e8246 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:56:30,948 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-18 23:56:31,158 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 206 ms. Found 2 JPA repository interfaces.
2023-06-18 23:56:31,511 INFO c.z.h.HikariDataSource [Test worker] HikariPool-3 - Starting...
2023-06-18 23:56:31,617 INFO c.z.h.p.HikariPool [Test worker] HikariPool-3 - Added connection org.postgresql.jdbc.PgConnection@5d3f583d
2023-06-18 23:56:31,618 INFO c.z.h.HikariDataSource [Test worker] HikariPool-3 - Start completed.
2023-06-18 23:56:31,646 INFO l.database [Test worker] Set default schema name to public
2023-06-18 23:56:31,810 INFO l.lockservice [Test worker] Successfully acquired change log lock
2023-06-18 23:56:31,849 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-18 23:56:31,852 INFO l.command [Test worker] Command execution complete
2023-06-18 23:56:31,858 WARN o.s.c.a.AnnotationConfigApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2023-06-18 23:56:31,859 INFO c.z.h.HikariDataSource [Test worker] HikariPool-3 - Shutdown initiated...
2023-06-18 23:56:31,895 INFO c.z.h.HikariDataSource [Test worker] HikariPool-3 - Shutdown completed.
2023-06-18 23:56:31,911 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:56:31,916 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2023-06-18 23:56:31,931 ERROR o.s.t.c.TestContextManager [Test worker] Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest@712dd0b0]
java.lang.IllegalStateException: Failed to load ApplicationContext for [MergedContextConfiguration@2c3f81ef testClass = ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest, locations = [], classes = [ru.clevertec.NewsManager.NewsManagerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@66abb2fa, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@351584c0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@cab274ea, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1ac85b0c, [ImportsContextCustomizer@374013e8 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1ee4730, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bc248ed, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@9ece5abb, org.springframework.boot.test.context.SpringBootTestAnnotation@659ae868], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 88 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:235)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:237)
	at liquibase.Scope.lambda$child$0(Scope.java:194)
	at liquibase.Scope.child(Scope.java:203)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:172)
	at liquibase.Liquibase.runInScope(Liquibase.java:1605)
	at liquibase.Liquibase.update(Liquibase.java:229)
	at liquibase.Liquibase.update(Liquibase.java:213)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:329)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:284)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1816)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766)
	... 111 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:31)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:104)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:81)
	at liquibase.command.CommandScope.execute(CommandScope.java:212)
	... 123 common frames omitted
2023-06-18 23:56:32,381 INFO r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] Starting NewsPostgresQLRepositoryTest using Java 17.0.2 with PID 41617 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:56:32,382 DEBUG r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:56:32,382 INFO r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:56:32,390 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:32,390 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:56:32,390 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@60660d21 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:56:32,390 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:32,390 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:56:32,390 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@347f0950 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:56:32,390 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:32,390 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:56:32,390 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@671561b9 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:56:32,866 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-18 23:56:32,910 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 40 ms. Found 2 JPA repository interfaces.
2023-06-18 23:56:33,155 INFO c.z.h.HikariDataSource [Test worker] HikariPool-4 - Starting...
2023-06-18 23:56:33,232 INFO c.z.h.p.HikariPool [Test worker] HikariPool-4 - Added connection org.postgresql.jdbc.PgConnection@62109320
2023-06-18 23:56:33,233 INFO c.z.h.HikariDataSource [Test worker] HikariPool-4 - Start completed.
2023-06-18 23:56:33,265 INFO l.database [Test worker] Set default schema name to public
2023-06-18 23:56:33,342 INFO l.lockservice [Test worker] Successfully acquired change log lock
2023-06-18 23:56:33,364 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-18 23:56:33,367 INFO l.command [Test worker] Command execution complete
2023-06-18 23:56:33,370 WARN o.s.c.a.AnnotationConfigApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2023-06-18 23:56:33,370 INFO c.z.h.HikariDataSource [Test worker] HikariPool-4 - Shutdown initiated...
2023-06-18 23:56:33,406 INFO c.z.h.HikariDataSource [Test worker] HikariPool-4 - Shutdown completed.
2023-06-18 23:56:33,408 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:56:33,412 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2023-06-18 23:56:33,417 ERROR o.s.t.c.TestContextManager [Test worker] Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest@3d72abea]
java.lang.IllegalStateException: Failed to load ApplicationContext for [MergedContextConfiguration@2c3f81ef testClass = ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest, locations = [], classes = [ru.clevertec.NewsManager.NewsManagerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@66abb2fa, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@351584c0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@cab274ea, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1ac85b0c, [ImportsContextCustomizer@374013e8 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1ee4730, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bc248ed, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@9ece5abb, org.springframework.boot.test.context.SpringBootTestAnnotation@659ae868], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 88 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:235)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:237)
	at liquibase.Scope.lambda$child$0(Scope.java:194)
	at liquibase.Scope.child(Scope.java:203)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:172)
	at liquibase.Liquibase.runInScope(Liquibase.java:1605)
	at liquibase.Liquibase.update(Liquibase.java:229)
	at liquibase.Liquibase.update(Liquibase.java:213)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:329)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:284)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1816)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766)
	... 111 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:31)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:104)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:81)
	at liquibase.command.CommandScope.execute(CommandScope.java:212)
	... 123 common frames omitted
2023-06-18 23:56:33,658 INFO r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] Starting NewsPostgresQLRepositoryTest using Java 17.0.2 with PID 41617 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:56:33,659 DEBUG r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:56:33,660 INFO r.c.N.c.i.NewsPostgresQLRepositoryTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:56:33,669 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:33,671 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:56:33,671 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@6db84cae uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:56:33,671 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:33,671 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:56:33,671 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@738ed8d3 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:56:33,671 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:33,671 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:56:33,671 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@517fb2c3 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:56:34,515 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-18 23:56:34,591 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 67 ms. Found 2 JPA repository interfaces.
2023-06-18 23:56:34,830 INFO c.z.h.HikariDataSource [Test worker] HikariPool-5 - Starting...
2023-06-18 23:56:34,924 INFO c.z.h.p.HikariPool [Test worker] HikariPool-5 - Added connection org.postgresql.jdbc.PgConnection@70799ca7
2023-06-18 23:56:34,926 INFO c.z.h.HikariDataSource [Test worker] HikariPool-5 - Start completed.
2023-06-18 23:56:34,960 INFO l.database [Test worker] Set default schema name to public
2023-06-18 23:56:35,028 INFO l.lockservice [Test worker] Successfully acquired change log lock
2023-06-18 23:56:35,042 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-18 23:56:35,044 INFO l.command [Test worker] Command execution complete
2023-06-18 23:56:35,046 WARN o.s.c.a.AnnotationConfigApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2023-06-18 23:56:35,047 INFO c.z.h.HikariDataSource [Test worker] HikariPool-5 - Shutdown initiated...
2023-06-18 23:56:35,088 INFO c.z.h.HikariDataSource [Test worker] HikariPool-5 - Shutdown completed.
2023-06-18 23:56:35,101 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:56:35,109 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2023-06-18 23:56:35,119 ERROR o.s.t.c.TestContextManager [Test worker] Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest@157ff8f8]
java.lang.IllegalStateException: Failed to load ApplicationContext for [MergedContextConfiguration@2c3f81ef testClass = ru.clevertec.NewsManager.common.integration.NewsPostgresQLRepositoryTest, locations = [], classes = [ru.clevertec.NewsManager.NewsManagerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@66abb2fa, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@351584c0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@cab274ea, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1ac85b0c, [ImportsContextCustomizer@374013e8 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1ee4730, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bc248ed, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@9ece5abb, org.springframework.boot.test.context.SpringBootTestAnnotation@659ae868], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 88 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:235)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:237)
	at liquibase.Scope.lambda$child$0(Scope.java:194)
	at liquibase.Scope.child(Scope.java:203)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:172)
	at liquibase.Liquibase.runInScope(Liquibase.java:1605)
	at liquibase.Liquibase.update(Liquibase.java:229)
	at liquibase.Liquibase.update(Liquibase.java:213)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:329)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:284)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1816)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766)
	... 111 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:31)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:104)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:81)
	at liquibase.command.CommandScope.execute(CommandScope.java:212)
	... 123 common frames omitted
2023-06-18 23:56:36,448 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-18 23:56:36,543 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@69e3e1d9{/__admin,null,AVAILABLE}
2023-06-18 23:56:36,579 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-18 23:56:36,579 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@15c042fc{/,null,AVAILABLE}
2023-06-18 23:56:36,589 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@1368e451{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:56:36,601 INFO o.e.j.s.Server [Test worker] Started Server@2a6dfbb2{STARTING}[11.0.15,sto=1000] @44506ms
2023-06-18 23:56:37,269 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 41617 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:56:37,271 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:56:37,272 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:56:37,282 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:37,282 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@7dd3f20e uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:56:37,282 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:37,282 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-18 23:56:37,283 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:37,283 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@27d9a016 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:56:40,118 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:56:40,304 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 23:56:42,928 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@200eaca, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@29f68e88, org.springframework.security.web.context.SecurityContextHolderFilter@1e019687, org.springframework.security.web.header.HeaderWriterFilter@68ae86a2, org.springframework.security.web.authentication.logout.LogoutFilter@12cb9eda, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@497c267a, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@38f553d0, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@507a53b6, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@1bf2cf15, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@5dca9fd8, org.springframework.security.web.session.ConcurrentSessionFilter@5b5b9038, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@250e9655, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@e74914d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@325fa8c, org.springframework.security.web.access.ExceptionTranslationFilter@30cf61ca, org.springframework.security.web.access.intercept.AuthorizationFilter@1bbf750]
2023-06-18 23:56:43,395 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-18 23:56:43,399 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-18 23:56:43,411 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 10 ms
2023-06-18 23:56:43,709 INFO r.c.N.c.c.CommentControllerTest [Test worker] Started CommentControllerTest in 7.057 seconds (process running for 51.614)
2023-06-18 23:56:44,395 INFO o.e.j.s.Server [Test worker] Stopped Server@2a6dfbb2{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:56:44,397 INFO o.e.j.s.Server [Test worker] Shutdown Server@2a6dfbb2{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:56:44,406 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@1368e451{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:56:44,411 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@15c042fc{/,null,STOPPED}
2023-06-18 23:56:44,413 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@69e3e1d9{/__admin,null,STOPPED}
2023-06-18 23:56:44,494 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-18 23:56:44,512 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@157affc1{/__admin,null,AVAILABLE}
2023-06-18 23:56:44,520 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-18 23:56:44,522 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@11306ed7{/,null,AVAILABLE}
2023-06-18 23:56:44,525 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@5ca01e01{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:56:44,531 INFO o.e.j.s.Server [Test worker] Started Server@12278d1c{STARTING}[11.0.15,sto=1000] @52432ms
2023-06-18 23:56:44,960 INFO r.c.N.c.c.NewsControllerTest [Test worker] Starting NewsControllerTest using Java 17.0.2 with PID 41617 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:56:44,961 DEBUG r.c.N.c.c.NewsControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:56:44,961 INFO r.c.N.c.c.NewsControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:56:44,966 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:44,967 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@400bf062 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:56:44,967 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:44,967 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-18 23:56:44,967 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:56:44,967 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@60fc87e8 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:56:45,958 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:56:45,973 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 23:56:46,387 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7b6419dd, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7acc95a2, org.springframework.security.web.context.SecurityContextHolderFilter@5073b0b8, org.springframework.security.web.header.HeaderWriterFilter@463e413b, org.springframework.security.web.authentication.logout.LogoutFilter@5be86750, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@623c62b9, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@7af65b49, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@32e14e55, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@17c373d3, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@3228b5a1, org.springframework.security.web.session.ConcurrentSessionFilter@28736857, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@10c23a76, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24c186cc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@a83c657, org.springframework.security.web.access.ExceptionTranslationFilter@23bc69a1, org.springframework.security.web.access.intercept.AuthorizationFilter@7f66d549]
2023-06-18 23:56:46,475 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-18 23:56:46,475 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-18 23:56:46,476 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 1 ms
2023-06-18 23:56:46,499 INFO r.c.N.c.c.NewsControllerTest [Test worker] Started NewsControllerTest in 1.946 seconds (process running for 54.405)
2023-06-18 23:56:46,673 INFO o.e.j.s.Server [Test worker] Stopped Server@12278d1c{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:56:46,674 INFO o.e.j.s.Server [Test worker] Shutdown Server@12278d1c{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:56:46,678 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@5ca01e01{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:56:46,679 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@11306ed7{/,null,STOPPED}
2023-06-18 23:56:46,679 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@157affc1{/__admin,null,STOPPED}
2023-06-18 23:59:25,851 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [Test worker] Could not detect default configuration classes for test class [ru.clevertec.NewsManager.NewsManagerApplicationTests]: NewsManagerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-06-18 23:59:26,084 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [Test worker] Found @SpringBootConfiguration ru.clevertec.NewsManager.NewsManagerApplication for test class ru.clevertec.NewsManager.NewsManagerApplicationTests
2023-06-18 23:59:27,837 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-18 23:59:27,918 INFO r.c.N.NewsManagerApplicationTests [Test worker] Starting NewsManagerApplicationTests using Java 17.0.2 with PID 42706 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:59:27,919 DEBUG r.c.N.NewsManagerApplicationTests [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:59:27,920 INFO r.c.N.NewsManagerApplicationTests [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:59:28,465 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:59:28,466 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:59:28,466 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@21ba2445 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:59:28,467 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:59:28,467 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused. Will be trying the next url if available
2023-06-18 23:59:28,467 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@7ab4ae59 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['prod']]): I/O error on GET request for "http://localhost:8086/news-api/prod": Connection refused
2023-06-18 23:59:28,467 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:59:28,467 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Exception on Url - http://localhost:8086:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused. Will be trying the next url if available
2023-06-18 23:59:28,467 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@5d96bdf8 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8086/news-api/default": Connection refused
2023-06-18 23:59:30,391 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-18 23:59:30,755 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 338 ms. Found 2 JPA repository interfaces.
2023-06-18 23:59:31,349 INFO o.s.c.c.s.GenericScope [Test worker] BeanFactory id=f07537ec-b284-37de-97b9-5fcc2c9f7989
2023-06-18 23:59:31,591 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:59:32,142 WARN o.s.w.c.s.GenericWebApplicationContext [Test worker] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: Failed to instantiate [liquibase.integration.spring.SpringLiquibase]: Factory method 'liquibase' threw exception with message: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
2023-06-18 23:59:32,166 INFO o.s.b.a.l.ConditionEvaluationReportLogger [Test worker] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-06-18 23:59:32,198 ERROR o.s.b.d.LoggingFailureAnalysisReporter [Test worker] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.

Reason: Failed to determine a suitable driver class


Action:

Consider the following:
	If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.
	If you have database settings to be loaded from a particular profile you may need to activate it (the profiles prod are currently active).

2023-06-18 23:59:32,207 ERROR o.s.t.c.TestContextManager [Test worker] Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [ru.clevertec.NewsManager.NewsManagerApplicationTests@7109b603]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@2cd5b19c testClass = ru.clevertec.NewsManager.NewsManagerApplicationTests, locations = [], classes = [ru.clevertec.NewsManager.NewsManagerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@60cf80e7, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@48c40605, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3bd7f8dc, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@44a2b17b, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@7eb01b12, org.springframework.boot.test.context.SpringBootTestAnnotation@2af3cbcd], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)
	at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: Failed to instantiate [liquibase.integration.spring.SpringLiquibase]: Factory method 'liquibase' threw exception with message: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 88 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [liquibase.integration.spring.SpringLiquibase]: Factory method 'liquibase' threw exception with message: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 114 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.getIfUnique(DefaultListableBeanFactory.java:2098)
	at org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration$LiquibaseConfiguration.liquibase(LiquibaseAutoConfiguration.java:100)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 115 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 133 common frames omitted
Caused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class
	at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:186)
	at org.springframework.boot.autoconfigure.jdbc.PropertiesJdbcConnectionDetails.getDriverClassName(PropertiesJdbcConnectionDetails.java:49)
	at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:55)
	at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:117)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 134 common frames omitted
2023-06-18 23:59:33,537 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-18 23:59:33,572 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@ca0a21f{/__admin,null,AVAILABLE}
2023-06-18 23:59:33,606 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-18 23:59:33,606 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@548f4f60{/,null,AVAILABLE}
2023-06-18 23:59:33,707 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@182dcd2b{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:59:33,819 INFO o.e.j.s.Server [Test worker] Started Server@354e2bff{STARTING}[11.0.15,sto=1000] @10505ms
2023-06-18 23:59:35,374 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 42706 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:59:35,375 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:59:35,376 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:59:35,392 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:59:35,395 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@3c108c05 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:59:35,395 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:59:35,396 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-18 23:59:35,396 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:59:35,396 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@2696b687 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:59:38,329 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:59:38,482 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 23:59:40,314 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4ab1693b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@35e0d91e, org.springframework.security.web.context.SecurityContextHolderFilter@c11ec9b, org.springframework.security.web.header.HeaderWriterFilter@7594d189, org.springframework.security.web.authentication.logout.LogoutFilter@149162a4, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@718b9d56, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@36a59d8, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@51751265, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@7b1a9ab3, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@3204146d, org.springframework.security.web.session.ConcurrentSessionFilter@45594dfe, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@18372705, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2ecb87b2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3299e315, org.springframework.security.web.access.ExceptionTranslationFilter@68312b85, org.springframework.security.web.access.intercept.AuthorizationFilter@208ce928]
2023-06-18 23:59:40,792 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-18 23:59:40,794 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-18 23:59:40,800 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 5 ms
2023-06-18 23:59:41,105 INFO r.c.N.c.c.CommentControllerTest [Test worker] Started CommentControllerTest in 7.074 seconds (process running for 17.792)
2023-06-18 23:59:41,825 INFO o.e.j.s.Server [Test worker] Stopped Server@354e2bff{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:59:41,826 INFO o.e.j.s.Server [Test worker] Shutdown Server@354e2bff{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:59:41,835 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@182dcd2b{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:59:41,843 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@548f4f60{/,null,STOPPED}
2023-06-18 23:59:41,846 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@ca0a21f{/__admin,null,STOPPED}
2023-06-18 23:59:41,943 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-18 23:59:41,949 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@776eb512{/__admin,null,AVAILABLE}
2023-06-18 23:59:41,951 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-18 23:59:41,951 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@4ba29b51{/,null,AVAILABLE}
2023-06-18 23:59:41,953 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@16ef07fa{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:59:41,954 INFO o.e.j.s.Server [Test worker] Started Server@1ac8f29c{STARTING}[11.0.15,sto=1000] @18641ms
2023-06-18 23:59:42,280 INFO r.c.N.c.c.NewsControllerTest [Test worker] Starting NewsControllerTest using Java 17.0.2 with PID 42706 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-18 23:59:42,281 DEBUG r.c.N.c.c.NewsControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-18 23:59:42,281 INFO r.c.N.c.c.NewsControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-18 23:59:42,285 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:59:42,286 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@79224636 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:59:42,287 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:59:42,287 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-18 23:59:42,287 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-18 23:59:42,288 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@63a833c5 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-18 23:59:43,200 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-18 23:59:43,215 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-18 23:59:43,501 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6655b4e6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@33c6c4f, org.springframework.security.web.context.SecurityContextHolderFilter@32107bba, org.springframework.security.web.header.HeaderWriterFilter@63088bbd, org.springframework.security.web.authentication.logout.LogoutFilter@398a27e, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@298990ab, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@6fc44cb6, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@4d53dfb7, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@7c75f3a8, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@4e502162, org.springframework.security.web.session.ConcurrentSessionFilter@4d20d8e6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@102bce96, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3759ea4d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1dade178, org.springframework.security.web.access.ExceptionTranslationFilter@7acb0a44, org.springframework.security.web.access.intercept.AuthorizationFilter@28d07fa4]
2023-06-18 23:59:43,574 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-18 23:59:43,575 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-18 23:59:43,576 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 1 ms
2023-06-18 23:59:43,609 INFO r.c.N.c.c.NewsControllerTest [Test worker] Started NewsControllerTest in 1.647 seconds (process running for 20.297)
2023-06-18 23:59:43,764 INFO o.e.j.s.Server [Test worker] Stopped Server@1ac8f29c{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:59:43,764 INFO o.e.j.s.Server [Test worker] Shutdown Server@1ac8f29c{STOPPING}[11.0.15,sto=1000]
2023-06-18 23:59:43,768 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@16ef07fa{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-18 23:59:43,768 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@4ba29b51{/,null,STOPPED}
2023-06-18 23:59:43,769 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@776eb512{/__admin,null,STOPPED}
2023-06-19 00:01:08,555 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [Test worker] Could not detect default configuration classes for test class [ru.clevertec.NewsManager.NewsManagerApplicationTests]: NewsManagerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-06-19 00:01:08,835 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [Test worker] Found @SpringBootConfiguration ru.clevertec.NewsManager.NewsManagerApplication for test class ru.clevertec.NewsManager.NewsManagerApplicationTests
2023-06-19 00:01:10,505 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-19 00:01:10,550 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@3b95a6db{/__admin,null,AVAILABLE}
2023-06-19 00:01:10,572 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-19 00:01:10,573 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@53b1a3f8{/,null,AVAILABLE}
2023-06-19 00:01:10,584 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@40e37b06{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:01:10,610 INFO o.e.j.s.Server [Test worker] Started Server@9e54c59{STARTING}[11.0.15,sto=1000] @4606ms
2023-06-19 00:01:12,326 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-19 00:01:12,416 INFO r.c.N.NewsManagerApplicationTests [Test worker] Starting NewsManagerApplicationTests using Java 17.0.2 with PID 43251 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-19 00:01:12,417 DEBUG r.c.N.NewsManagerApplicationTests [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-19 00:01:12,418 INFO r.c.N.NewsManagerApplicationTests [Test worker] The following 1 profile is active: "prod"
2023-06-19 00:01:12,886 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:01:12,886 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@16cb9989 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:01:12,886 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:01:12,886 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-19 00:01:12,886 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:01:12,886 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@353c6da1 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:01:15,013 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-19 00:01:15,260 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 237 ms. Found 2 JPA repository interfaces.
2023-06-19 00:01:15,930 INFO o.s.c.c.s.GenericScope [Test worker] BeanFactory id=da1d35b2-81da-3027-a3ef-ec2baee445ce
2023-06-19 00:01:16,140 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-19 00:01:16,919 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Starting...
2023-06-19 00:01:17,126 INFO c.z.h.p.HikariPool [Test worker] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@62871522
2023-06-19 00:01:17,134 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Start completed.
2023-06-19 00:01:17,426 INFO l.database [Test worker] Set default schema name to public
2023-06-19 00:01:17,819 INFO l.lockservice [Test worker] Successfully acquired change log lock
2023-06-19 00:01:18,810 INFO l.changelog [Test worker] Reading from public.databasechangelog
2023-06-19 00:01:18,904 INFO l.changelog [Test worker] Reading from public.databasechangelog
2023-06-19 00:01:18,931 INFO l.util [Test worker] UPDATE SUMMARY
2023-06-19 00:01:18,933 INFO l.util [Test worker] Run:                          0
2023-06-19 00:01:18,933 INFO l.util [Test worker] Previously run:               5
2023-06-19 00:01:18,933 INFO l.util [Test worker] Filtered out:                 0
2023-06-19 00:01:18,933 INFO l.util [Test worker] -------------------------------
2023-06-19 00:01:18,933 INFO l.util [Test worker] Total change sets:            5

2023-06-19 00:01:18,936 INFO l.util [Test worker] Update summary generated
2023-06-19 00:01:18,945 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-19 00:01:18,960 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-19 00:01:18,962 INFO l.command [Test worker] Command execution complete
2023-06-19 00:01:19,275 INFO o.h.j.i.u.LogHelper [Test worker] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-19 00:01:19,357 INFO o.h.Version [Test worker] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-19 00:01:19,363 INFO o.h.c.Environment [Test worker] HHH000406: Using bytecode reflection optimizer
2023-06-19 00:01:19,578 INFO o.h.b.i.BytecodeProviderInitiator [Test worker] HHH000021: Bytecode provider name : bytebuddy
2023-06-19 00:01:19,775 INFO o.s.o.j.p.SpringPersistenceUnitInfo [Test worker] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-19 00:01:19,851 INFO o.h.o.dialect [Test worker] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@6a94bd69
2023-06-19 00:01:20,188 INFO o.h.b.i.BytecodeProviderInitiator [Test worker] HHH000021: Bytecode provider name : bytebuddy
2023-06-19 00:01:21,330 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [Test worker] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-19 00:01:21,469 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [Test worker] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-19 00:01:22,181 INFO o.s.d.j.r.q.QueryEnhancerFactory [Test worker] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-19 00:01:23,197 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-19 00:01:23,545 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [Test worker] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-19 00:01:24,611 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@20461e2b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1f607db6, org.springframework.security.web.context.SecurityContextHolderFilter@6c884b0d, org.springframework.security.web.header.HeaderWriterFilter@7cb39309, org.springframework.security.web.authentication.logout.LogoutFilter@58f6dab9, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@48c7773, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@306ea73f, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@29ff01df, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3074d565, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@75288f47, org.springframework.security.web.session.ConcurrentSessionFilter@695d0adc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7ccf845a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@22ecee76, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4effab3b, org.springframework.security.web.access.ExceptionTranslationFilter@14270715, org.springframework.security.web.access.intercept.AuthorizationFilter@5a78e7e3]
2023-06-19 00:01:25,634 INFO r.c.N.NewsManagerApplicationTests [Test worker] Started NewsManagerApplicationTests in 14.924 seconds (process running for 19.631)
2023-06-19 00:01:26,646 INFO o.e.j.s.Server [Test worker] Stopped Server@9e54c59{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:01:26,647 INFO o.e.j.s.Server [Test worker] Shutdown Server@9e54c59{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:01:26,655 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@40e37b06{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:01:26,659 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@53b1a3f8{/,null,STOPPED}
2023-06-19 00:01:26,660 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@3b95a6db{/__admin,null,STOPPED}
2023-06-19 00:01:26,772 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-19 00:01:26,776 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@a5a9502{/__admin,null,AVAILABLE}
2023-06-19 00:01:26,778 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-19 00:01:26,778 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@41991619{/,null,AVAILABLE}
2023-06-19 00:01:26,779 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@73dc387{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:01:26,780 INFO o.e.j.s.Server [Test worker] Started Server@72bae57c{STARTING}[11.0.15,sto=1000] @20777ms
2023-06-19 00:01:27,007 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 43251 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-19 00:01:27,008 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-19 00:01:27,008 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-19 00:01:27,012 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:01:27,012 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@69f4143 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:01:27,012 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:01:27,012 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-19 00:01:27,012 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:01:27,012 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@30360716 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:01:28,469 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-19 00:01:28,546 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-19 00:01:29,704 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@53a1baf5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@30f6791d, org.springframework.security.web.context.SecurityContextHolderFilter@48c49c1a, org.springframework.security.web.header.HeaderWriterFilter@6da640fe, org.springframework.security.web.authentication.logout.LogoutFilter@3f94bd59, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@3c9be5f1, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@26ffe94e, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@42c63e72, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@50091386, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@699a53d4, org.springframework.security.web.session.ConcurrentSessionFilter@62832e24, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@747ef51d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2b80fadc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1adcd53b, org.springframework.security.web.access.ExceptionTranslationFilter@1175ae79, org.springframework.security.web.access.intercept.AuthorizationFilter@b6352a5]
2023-06-19 00:01:29,932 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-19 00:01:29,933 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-19 00:01:29,937 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 3 ms
2023-06-19 00:01:30,154 INFO r.c.N.c.c.CommentControllerTest [Test worker] Started CommentControllerTest in 3.369 seconds (process running for 24.152)
2023-06-19 00:01:30,676 INFO o.e.j.s.Server [Test worker] Stopped Server@72bae57c{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:01:30,676 INFO o.e.j.s.Server [Test worker] Shutdown Server@72bae57c{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:01:30,680 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@73dc387{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:01:30,683 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@41991619{/,null,STOPPED}
2023-06-19 00:01:30,684 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@a5a9502{/__admin,null,STOPPED}
2023-06-19 00:01:30,738 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-19 00:01:30,746 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@32c50b97{/__admin,null,AVAILABLE}
2023-06-19 00:01:30,748 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-19 00:01:30,748 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@67d9abfb{/,null,AVAILABLE}
2023-06-19 00:01:30,750 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@2ad447d8{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:01:30,752 INFO o.e.j.s.Server [Test worker] Started Server@35c7c803{STARTING}[11.0.15,sto=1000] @24749ms
2023-06-19 00:01:31,184 INFO r.c.N.c.c.NewsControllerTest [Test worker] Starting NewsControllerTest using Java 17.0.2 with PID 43251 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-19 00:01:31,185 DEBUG r.c.N.c.c.NewsControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-19 00:01:31,185 INFO r.c.N.c.c.NewsControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-19 00:01:31,192 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:01:31,192 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@1de8248f uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:01:31,192 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:01:31,193 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-19 00:01:31,193 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:01:31,193 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@2622efb0 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:01:32,039 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-19 00:01:32,078 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-19 00:01:32,433 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@17adeb0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6dfd4db2, org.springframework.security.web.context.SecurityContextHolderFilter@4ddb3312, org.springframework.security.web.header.HeaderWriterFilter@6185f1ec, org.springframework.security.web.authentication.logout.LogoutFilter@22d45306, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@26dc0c5, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@221ffed, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@351cc4b5, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@57fcc568, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@60ae0977, org.springframework.security.web.session.ConcurrentSessionFilter@3a87c694, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1d8f923f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@534b0af3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@33c440bb, org.springframework.security.web.access.ExceptionTranslationFilter@5be16caa, org.springframework.security.web.access.intercept.AuthorizationFilter@18a59ef8]
2023-06-19 00:01:32,484 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-19 00:01:32,485 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-19 00:01:32,485 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 0 ms
2023-06-19 00:01:32,502 INFO r.c.N.c.c.NewsControllerTest [Test worker] Started NewsControllerTest in 1.742 seconds (process running for 26.499)
2023-06-19 00:01:32,657 INFO o.e.j.s.Server [Test worker] Stopped Server@35c7c803{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:01:32,658 INFO o.e.j.s.Server [Test worker] Shutdown Server@35c7c803{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:01:32,660 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@2ad447d8{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:01:32,661 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@67d9abfb{/,null,STOPPED}
2023-06-19 00:01:32,661 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@32c50b97{/__admin,null,STOPPED}
2023-06-19 00:01:33,317 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-19 00:01:33,320 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-19 00:01:33,325 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-19 00:14:05,070 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [Test worker] Could not detect default configuration classes for test class [ru.clevertec.NewsManager.NewsManagerApplicationTests]: NewsManagerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-06-19 00:14:05,462 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [Test worker] Found @SpringBootConfiguration ru.clevertec.NewsManager.NewsManagerApplication for test class ru.clevertec.NewsManager.NewsManagerApplicationTests
2023-06-19 00:14:09,426 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-19 00:14:09,496 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@799f916e{/__admin,null,AVAILABLE}
2023-06-19 00:14:09,527 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-19 00:14:09,527 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@60cb1ed6{/,null,AVAILABLE}
2023-06-19 00:14:09,557 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@6dd1f638{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:14:09,581 INFO o.e.j.s.Server [Test worker] Started Server@4c19d42e{STARTING}[11.0.15,sto=1000] @11914ms
2023-06-19 00:14:13,053 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-19 00:14:13,162 INFO r.c.N.NewsManagerApplicationTests [Test worker] Starting NewsManagerApplicationTests using Java 17.0.2 with PID 47048 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-19 00:14:13,162 DEBUG r.c.N.NewsManagerApplicationTests [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-19 00:14:13,163 INFO r.c.N.NewsManagerApplicationTests [Test worker] The following 1 profile is active: "prod"
2023-06-19 00:14:14,003 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:14:14,004 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@240a2619 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:14:14,004 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:14:14,004 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-19 00:14:14,004 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:14:14,004 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@7fc7152e uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:14:17,377 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-19 00:14:17,899 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 504 ms. Found 2 JPA repository interfaces.
2023-06-19 00:14:19,220 INFO o.s.c.c.s.GenericScope [Test worker] BeanFactory id=da1d35b2-81da-3027-a3ef-ec2baee445ce
2023-06-19 00:14:19,573 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-19 00:14:20,730 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Starting...
2023-06-19 00:14:21,092 INFO c.z.h.p.HikariPool [Test worker] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@442151d1
2023-06-19 00:14:21,097 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Start completed.
2023-06-19 00:14:21,552 INFO l.database [Test worker] Set default schema name to public
2023-06-19 00:14:21,993 INFO l.lockservice [Test worker] Successfully acquired change log lock
2023-06-19 00:14:23,299 INFO l.changelog [Test worker] Reading from public.databasechangelog
2023-06-19 00:14:23,409 INFO l.changelog [Test worker] Reading from public.databasechangelog
2023-06-19 00:14:23,441 INFO l.util [Test worker] UPDATE SUMMARY
2023-06-19 00:14:23,442 INFO l.util [Test worker] Run:                          0
2023-06-19 00:14:23,442 INFO l.util [Test worker] Previously run:               5
2023-06-19 00:14:23,443 INFO l.util [Test worker] Filtered out:                 0
2023-06-19 00:14:23,443 INFO l.util [Test worker] -------------------------------
2023-06-19 00:14:23,443 INFO l.util [Test worker] Total change sets:            5

2023-06-19 00:14:23,444 INFO l.util [Test worker] Update summary generated
2023-06-19 00:14:23,453 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-19 00:14:23,476 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-19 00:14:23,479 INFO l.command [Test worker] Command execution complete
2023-06-19 00:14:23,850 INFO o.h.j.i.u.LogHelper [Test worker] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-19 00:14:24,022 INFO o.h.Version [Test worker] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-19 00:14:24,031 INFO o.h.c.Environment [Test worker] HHH000406: Using bytecode reflection optimizer
2023-06-19 00:14:24,375 INFO o.h.b.i.BytecodeProviderInitiator [Test worker] HHH000021: Bytecode provider name : bytebuddy
2023-06-19 00:14:24,750 INFO o.s.o.j.p.SpringPersistenceUnitInfo [Test worker] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-19 00:14:24,845 INFO o.h.o.dialect [Test worker] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@7d14efc
2023-06-19 00:14:25,425 INFO o.h.b.i.BytecodeProviderInitiator [Test worker] HHH000021: Bytecode provider name : bytebuddy
2023-06-19 00:14:27,486 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [Test worker] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-19 00:14:27,675 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [Test worker] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-19 00:14:29,021 INFO o.s.d.j.r.q.QueryEnhancerFactory [Test worker] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-19 00:14:30,656 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-19 00:14:31,310 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [Test worker] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-19 00:14:32,817 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6a16b724, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1328a5de, org.springframework.security.web.context.SecurityContextHolderFilter@2c6db83a, org.springframework.security.web.header.HeaderWriterFilter@1d5ada5a, org.springframework.security.web.authentication.logout.LogoutFilter@5ca32d1a, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@55947250, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@28e3bcb8, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1b06e304, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@76ce2e7, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@4426f362, org.springframework.security.web.session.ConcurrentSessionFilter@2028ecf4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4110e631, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7bd03562, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@29007172, org.springframework.security.web.access.ExceptionTranslationFilter@1f4c8062, org.springframework.security.web.access.intercept.AuthorizationFilter@69f4143]
2023-06-19 00:14:34,138 INFO r.c.N.NewsManagerApplicationTests [Test worker] Started NewsManagerApplicationTests in 24.364 seconds (process running for 36.473)
2023-06-19 00:14:35,528 INFO o.e.j.s.Server [Test worker] Stopped Server@4c19d42e{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:14:35,534 INFO o.e.j.s.Server [Test worker] Shutdown Server@4c19d42e{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:14:35,551 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@6dd1f638{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:14:35,559 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@60cb1ed6{/,null,STOPPED}
2023-06-19 00:14:35,561 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@799f916e{/__admin,null,STOPPED}
2023-06-19 00:14:35,721 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-19 00:14:35,726 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@3e680b29{/__admin,null,AVAILABLE}
2023-06-19 00:14:35,728 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-19 00:14:35,728 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@37826951{/,null,AVAILABLE}
2023-06-19 00:14:35,730 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@fdbf68d{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:14:35,731 INFO o.e.j.s.Server [Test worker] Started Server@2315ba0b{STARTING}[11.0.15,sto=1000] @38066ms
2023-06-19 00:14:36,172 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.2 with PID 47048 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-19 00:14:36,173 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-19 00:14:36,173 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-19 00:14:36,182 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:14:36,182 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@4611fe60 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:14:36,182 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:14:36,182 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-19 00:14:36,182 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:14:36,182 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@4110e312 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:14:37,221 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-19 00:14:37,250 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-19 00:14:37,602 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@8e5090a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@485d3d1, org.springframework.security.web.context.SecurityContextHolderFilter@50bdd956, org.springframework.security.web.header.HeaderWriterFilter@78b2504d, org.springframework.security.web.authentication.logout.LogoutFilter@17de3ab5, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@3157a760, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@57ba286d, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@470a65ae, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@43cd2f26, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2fa7a6c, org.springframework.security.web.session.ConcurrentSessionFilter@babef5e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7d12e459, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1748e38e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@16494888, org.springframework.security.web.access.ExceptionTranslationFilter@536fddad, org.springframework.security.web.access.intercept.AuthorizationFilter@6d445c91]
2023-06-19 00:14:37,779 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-19 00:14:37,779 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-19 00:14:37,794 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 15 ms
2023-06-19 00:14:38,003 INFO r.c.N.c.c.CommentControllerTest [Test worker] Started CommentControllerTest in 2.26 seconds (process running for 40.338)
2023-06-19 00:14:38,587 INFO o.e.j.s.Server [Test worker] Stopped Server@2315ba0b{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:14:38,587 INFO o.e.j.s.Server [Test worker] Shutdown Server@2315ba0b{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:14:38,590 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@fdbf68d{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:14:38,591 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@37826951{/,null,STOPPED}
2023-06-19 00:14:38,592 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@3e680b29{/__admin,null,STOPPED}
2023-06-19 00:14:38,660 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.2+8-LTS
2023-06-19 00:14:38,664 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@6c062a89{/__admin,null,AVAILABLE}
2023-06-19 00:14:38,665 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-19 00:14:38,665 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@cdeb5f5{/,null,AVAILABLE}
2023-06-19 00:14:38,666 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@3da73f13{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:14:38,667 INFO o.e.j.s.Server [Test worker] Started Server@3e91384d{STARTING}[11.0.15,sto=1000] @41002ms
2023-06-19 00:14:38,879 INFO r.c.N.c.c.NewsControllerTest [Test worker] Starting NewsControllerTest using Java 17.0.2 with PID 47048 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-19 00:14:38,880 DEBUG r.c.N.c.c.NewsControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-19 00:14:38,880 INFO r.c.N.c.c.NewsControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-19 00:14:38,890 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:14:38,891 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@3f126927 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:14:38,891 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:14:38,891 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-19 00:14:38,891 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:14:38,891 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@485aa0d9 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:14:39,693 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-19 00:14:39,739 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-19 00:14:40,232 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6c1a08f2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6760a74e, org.springframework.security.web.context.SecurityContextHolderFilter@48e1928a, org.springframework.security.web.header.HeaderWriterFilter@9bdf4e, org.springframework.security.web.authentication.logout.LogoutFilter@107b7bea, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@5a6a336c, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@1105a7e0, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@7b48f52e, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@7707cd05, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@5b6626e5, org.springframework.security.web.session.ConcurrentSessionFilter@579ffb7e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1d45746, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5f6b899d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@673b5922, org.springframework.security.web.access.ExceptionTranslationFilter@107b30e0, org.springframework.security.web.access.intercept.AuthorizationFilter@5a79b792]
2023-06-19 00:14:40,314 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-19 00:14:40,315 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-19 00:14:40,316 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 1 ms
2023-06-19 00:14:40,345 INFO r.c.N.c.c.NewsControllerTest [Test worker] Started NewsControllerTest in 1.671 seconds (process running for 42.681)
2023-06-19 00:14:40,798 INFO o.e.j.s.Server [Test worker] Stopped Server@3e91384d{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:14:40,801 INFO o.e.j.s.Server [Test worker] Shutdown Server@3e91384d{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:14:40,806 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@3da73f13{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:14:40,809 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@cdeb5f5{/,null,STOPPED}
2023-06-19 00:14:40,810 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@6c062a89{/__admin,null,STOPPED}
2023-06-19 00:14:42,373 WARN o.s.b.f.s.DisposableBeanAdapter [SpringApplicationShutdownHook] Invocation of destroy method failed on bean with name 'reactorResourceFactory': java.lang.NullPointerException: Cannot load from int array because "__$localLineHits$__" is null
2023-06-19 00:14:42,408 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-19 00:14:42,434 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-19 00:14:42,453 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-19 00:16:46,910 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [Test worker] Could not detect default configuration classes for test class [ru.clevertec.NewsManager.NewsManagerApplicationTests]: NewsManagerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-06-19 00:16:46,988 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [Test worker] Found @SpringBootConfiguration ru.clevertec.NewsManager.NewsManagerApplication for test class ru.clevertec.NewsManager.NewsManagerApplicationTests
2023-06-19 00:16:47,786 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.7+0
2023-06-19 00:16:47,801 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@6ebc9573{/__admin,null,AVAILABLE}
2023-06-19 00:16:47,807 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-19 00:16:47,807 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@6d0be7ab{/,null,AVAILABLE}
2023-06-19 00:16:47,812 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@6cc86152{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:16:47,820 INFO o.e.j.s.Server [Test worker] Started Server@19a20bb2{STARTING}[11.0.15,sto=1000] @1918ms
2023-06-19 00:16:48,404 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-19 00:16:48,426 INFO r.c.N.NewsManagerApplicationTests [Test worker] Starting NewsManagerApplicationTests using Java 17.0.7 with PID 47957 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-19 00:16:48,426 DEBUG r.c.N.NewsManagerApplicationTests [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-19 00:16:48,427 INFO r.c.N.NewsManagerApplicationTests [Test worker] The following 1 profile is active: "prod"
2023-06-19 00:16:48,568 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:16:48,568 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@14de1901 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:16:48,568 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:16:48,568 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-19 00:16:48,568 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:16:48,568 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@3a4a5f3c uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:16:49,024 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-19 00:16:49,129 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 100 ms. Found 2 JPA repository interfaces.
2023-06-19 00:16:49,298 INFO o.s.c.c.s.GenericScope [Test worker] BeanFactory id=da1d35b2-81da-3027-a3ef-ec2baee445ce
2023-06-19 00:16:49,351 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-19 00:16:49,565 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Starting...
2023-06-19 00:16:49,649 INFO c.z.h.p.HikariPool [Test worker] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6d4f266
2023-06-19 00:16:49,650 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Start completed.
2023-06-19 00:16:49,740 INFO l.database [Test worker] Set default schema name to public
2023-06-19 00:16:49,849 INFO l.lockservice [Test worker] Successfully acquired change log lock
2023-06-19 00:16:50,198 INFO l.changelog [Test worker] Reading from public.databasechangelog
2023-06-19 00:16:50,228 INFO l.changelog [Test worker] Reading from public.databasechangelog
2023-06-19 00:16:50,233 INFO l.util [Test worker] UPDATE SUMMARY
2023-06-19 00:16:50,233 INFO l.util [Test worker] Run:                          0
2023-06-19 00:16:50,233 INFO l.util [Test worker] Previously run:               5
2023-06-19 00:16:50,234 INFO l.util [Test worker] Filtered out:                 0
2023-06-19 00:16:50,234 INFO l.util [Test worker] -------------------------------
2023-06-19 00:16:50,234 INFO l.util [Test worker] Total change sets:            5

2023-06-19 00:16:50,234 INFO l.util [Test worker] Update summary generated
2023-06-19 00:16:50,238 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-19 00:16:50,241 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-19 00:16:50,251 INFO l.command [Test worker] Command execution complete
2023-06-19 00:16:50,357 INFO o.h.j.i.u.LogHelper [Test worker] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-19 00:16:50,414 INFO o.h.Version [Test worker] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-19 00:16:50,416 INFO o.h.c.Environment [Test worker] HHH000406: Using bytecode reflection optimizer
2023-06-19 00:16:50,520 INFO o.h.b.i.BytecodeProviderInitiator [Test worker] HHH000021: Bytecode provider name : bytebuddy
2023-06-19 00:16:50,626 INFO o.s.o.j.p.SpringPersistenceUnitInfo [Test worker] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-19 00:16:50,657 INFO o.h.o.dialect [Test worker] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@7893b8c
2023-06-19 00:16:50,798 INFO o.h.b.i.BytecodeProviderInitiator [Test worker] HHH000021: Bytecode provider name : bytebuddy
2023-06-19 00:16:51,281 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [Test worker] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-19 00:16:51,339 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [Test worker] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-19 00:16:51,526 INFO o.s.d.j.r.q.QueryEnhancerFactory [Test worker] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-19 00:16:51,847 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-19 00:16:51,932 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [Test worker] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-19 00:16:52,273 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2cda8be9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@698cc99d, org.springframework.security.web.context.SecurityContextHolderFilter@3b829ef, org.springframework.security.web.header.HeaderWriterFilter@2ca08575, org.springframework.security.web.authentication.logout.LogoutFilter@63c9017b, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@7b6419dd, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@7acc95a2, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3228b5a1, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@2d8b8469, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@4d34baec, org.springframework.security.web.session.ConcurrentSessionFilter@66e478c7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@500039b3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7c09f8c5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@f9769ae, org.springframework.security.web.access.ExceptionTranslationFilter@5008c5a, org.springframework.security.web.access.intercept.AuthorizationFilter@42775280]
2023-06-19 00:16:52,608 INFO r.c.N.NewsManagerApplicationTests [Test worker] Started NewsManagerApplicationTests in 4.746 seconds (process running for 6.706)
2023-06-19 00:16:53,030 INFO o.e.j.s.Server [Test worker] Stopped Server@19a20bb2{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:16:53,030 INFO o.e.j.s.Server [Test worker] Shutdown Server@19a20bb2{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:16:53,033 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@6cc86152{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:16:53,034 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@6d0be7ab{/,null,STOPPED}
2023-06-19 00:16:53,034 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@6ebc9573{/__admin,null,STOPPED}
2023-06-19 00:16:53,053 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.7+0
2023-06-19 00:16:53,054 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@a5a9502{/__admin,null,AVAILABLE}
2023-06-19 00:16:53,054 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-19 00:16:53,054 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@41991619{/,null,AVAILABLE}
2023-06-19 00:16:53,054 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@73dc387{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:16:53,054 INFO o.e.j.s.Server [Test worker] Started Server@72bae57c{STARTING}[11.0.15,sto=1000] @7152ms
2023-06-19 00:16:53,105 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.7 with PID 47957 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-19 00:16:53,105 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-19 00:16:53,105 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-19 00:16:53,106 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:16:53,106 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@69f4143 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:16:53,106 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:16:53,106 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-19 00:16:53,106 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:16:53,106 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@30360716 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:16:53,389 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-19 00:16:53,402 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-19 00:16:53,667 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@53a1baf5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@30f6791d, org.springframework.security.web.context.SecurityContextHolderFilter@48c49c1a, org.springframework.security.web.header.HeaderWriterFilter@6da640fe, org.springframework.security.web.authentication.logout.LogoutFilter@3f94bd59, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@3c9be5f1, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@26ffe94e, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@42c63e72, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@50091386, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@699a53d4, org.springframework.security.web.session.ConcurrentSessionFilter@62832e24, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@747ef51d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2b80fadc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1adcd53b, org.springframework.security.web.access.ExceptionTranslationFilter@1175ae79, org.springframework.security.web.access.intercept.AuthorizationFilter@b6352a5]
2023-06-19 00:16:53,748 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-19 00:16:53,748 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-19 00:16:53,750 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 0 ms
2023-06-19 00:16:53,868 INFO r.c.N.c.c.CommentControllerTest [Test worker] Started CommentControllerTest in 0.811 seconds (process running for 7.966)
2023-06-19 00:16:54,074 INFO o.e.j.s.Server [Test worker] Stopped Server@72bae57c{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:16:54,074 INFO o.e.j.s.Server [Test worker] Shutdown Server@72bae57c{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:16:54,075 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@73dc387{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:16:54,076 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@41991619{/,null,STOPPED}
2023-06-19 00:16:54,076 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@a5a9502{/__admin,null,STOPPED}
2023-06-19 00:16:54,096 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.7+0
2023-06-19 00:16:54,098 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@5c98b98{/__admin,null,AVAILABLE}
2023-06-19 00:16:54,098 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-19 00:16:54,098 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@32c50b97{/,null,AVAILABLE}
2023-06-19 00:16:54,099 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@57cd757a{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:16:54,099 INFO o.e.j.s.Server [Test worker] Started Server@1b0e55b{STARTING}[11.0.15,sto=1000] @8197ms
2023-06-19 00:16:54,196 INFO r.c.N.c.c.NewsControllerTest [Test worker] Starting NewsControllerTest using Java 17.0.7 with PID 47957 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-19 00:16:54,196 DEBUG r.c.N.c.c.NewsControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-19 00:16:54,196 INFO r.c.N.c.c.NewsControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-19 00:16:54,197 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:16:54,197 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@50bac431 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:16:54,197 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:16:54,197 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-19 00:16:54,197 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:16:54,197 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@425ee3ab uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:16:54,492 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-19 00:16:54,496 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-19 00:16:54,612 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@351cc4b5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@17adeb0, org.springframework.security.web.context.SecurityContextHolderFilter@3a87c694, org.springframework.security.web.header.HeaderWriterFilter@5be16caa, org.springframework.security.web.authentication.logout.LogoutFilter@43ab3f26, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@18a59ef8, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@26dc0c5, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@221ffed, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@534b0af3, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@6dfd4db2, org.springframework.security.web.session.ConcurrentSessionFilter@6185f1ec, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4ddb3312, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d8f923f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@60ae0977, org.springframework.security.web.access.ExceptionTranslationFilter@4ea7218f, org.springframework.security.web.access.intercept.AuthorizationFilter@2943c93d]
2023-06-19 00:16:54,649 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-19 00:16:54,649 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-19 00:16:54,650 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 1 ms
2023-06-19 00:16:54,665 INFO r.c.N.c.c.NewsControllerTest [Test worker] Started NewsControllerTest in 0.563 seconds (process running for 8.763)
2023-06-19 00:16:54,722 INFO o.e.j.s.Server [Test worker] Stopped Server@1b0e55b{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:16:54,722 INFO o.e.j.s.Server [Test worker] Shutdown Server@1b0e55b{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:16:54,724 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@57cd757a{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:16:54,724 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@32c50b97{/,null,STOPPED}
2023-06-19 00:16:54,724 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@5c98b98{/__admin,null,STOPPED}
2023-06-19 00:16:54,967 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-19 00:16:54,968 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-19 00:16:54,970 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2023-06-19 00:52:45,664 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [Test worker] Could not detect default configuration classes for test class [ru.clevertec.NewsManager.NewsManagerApplicationTests]: NewsManagerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-06-19 00:52:45,786 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [Test worker] Found @SpringBootConfiguration ru.clevertec.NewsManager.NewsManagerApplication for test class ru.clevertec.NewsManager.NewsManagerApplicationTests
2023-06-19 00:52:46,644 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.7+0
2023-06-19 00:52:46,680 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@479111ba{/__admin,null,AVAILABLE}
2023-06-19 00:52:46,691 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-19 00:52:46,692 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@36b9cb99{/,null,AVAILABLE}
2023-06-19 00:52:46,706 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@c3edf4c{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:52:46,726 INFO o.e.j.s.Server [Test worker] Started Server@bc6288b{STARTING}[11.0.15,sto=1000] @2613ms
2023-06-19 00:52:47,770 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2023-06-19 00:52:47,801 INFO r.c.N.NewsManagerApplicationTests [Test worker] Starting NewsManagerApplicationTests using Java 17.0.7 with PID 58676 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-19 00:52:47,802 DEBUG r.c.N.NewsManagerApplicationTests [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-19 00:52:47,803 INFO r.c.N.NewsManagerApplicationTests [Test worker] The following 1 profile is active: "prod"
2023-06-19 00:52:48,028 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:52:48,029 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@6de7778f uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:52:48,029 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:52:48,029 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-19 00:52:48,029 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:52:48,029 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@1332dec4 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:52:48,670 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-06-19 00:52:48,889 INFO o.s.d.r.c.RepositoryConfigurationDelegate [Test worker] Finished Spring Data repository scanning in 214 ms. Found 2 JPA repository interfaces.
2023-06-19 00:52:49,221 INFO o.s.c.c.s.GenericScope [Test worker] BeanFactory id=da1d35b2-81da-3027-a3ef-ec2baee445ce
2023-06-19 00:52:49,312 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-19 00:52:49,694 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Starting...
2023-06-19 00:52:49,811 INFO c.z.h.p.HikariPool [Test worker] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@19b3d3a4
2023-06-19 00:52:49,812 INFO c.z.h.HikariDataSource [Test worker] HikariPool-1 - Start completed.
2023-06-19 00:52:49,971 INFO l.database [Test worker] Set default schema name to public
2023-06-19 00:52:50,166 INFO l.lockservice [Test worker] Successfully acquired change log lock
2023-06-19 00:52:50,741 INFO l.changelog [Test worker] Reading from public.databasechangelog
2023-06-19 00:52:50,785 INFO l.changelog [Test worker] Reading from public.databasechangelog
2023-06-19 00:52:50,797 INFO l.util [Test worker] UPDATE SUMMARY
2023-06-19 00:52:50,797 INFO l.util [Test worker] Run:                          0
2023-06-19 00:52:50,798 INFO l.util [Test worker] Previously run:               5
2023-06-19 00:52:50,798 INFO l.util [Test worker] Filtered out:                 0
2023-06-19 00:52:50,798 INFO l.util [Test worker] -------------------------------
2023-06-19 00:52:50,798 INFO l.util [Test worker] Total change sets:            5

2023-06-19 00:52:50,800 INFO l.util [Test worker] Update summary generated
2023-06-19 00:52:50,806 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-19 00:52:50,824 INFO l.lockservice [Test worker] Successfully released change log lock
2023-06-19 00:52:50,824 INFO l.command [Test worker] Command execution complete
2023-06-19 00:52:50,978 INFO o.h.j.i.u.LogHelper [Test worker] HHH000204: Processing PersistenceUnitInfo [name: default]
2023-06-19 00:52:51,054 INFO o.h.Version [Test worker] HHH000412: Hibernate ORM core version 6.2.2.Final
2023-06-19 00:52:51,058 INFO o.h.c.Environment [Test worker] HHH000406: Using bytecode reflection optimizer
2023-06-19 00:52:51,217 INFO o.h.b.i.BytecodeProviderInitiator [Test worker] HHH000021: Bytecode provider name : bytebuddy
2023-06-19 00:52:51,347 INFO o.s.o.j.p.SpringPersistenceUnitInfo [Test worker] No LoadTimeWeaver setup: ignoring JPA class transformer
2023-06-19 00:52:51,384 INFO o.h.o.dialect [Test worker] HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$DialectResolutionInfoImpl@6888a33
2023-06-19 00:52:51,633 INFO o.h.b.i.BytecodeProviderInitiator [Test worker] HHH000021: Bytecode provider name : bytebuddy
2023-06-19 00:52:52,437 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [Test worker] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-06-19 00:52:52,538 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [Test worker] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-06-19 00:52:52,849 INFO o.s.d.j.r.q.QueryEnhancerFactory [Test worker] Hibernate is in classpath; If applicable, HQL parser will be used.
2023-06-19 00:52:53,375 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-19 00:52:53,560 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [Test worker] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-06-19 00:52:54,032 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1f607db6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@75288f47, org.springframework.security.web.context.SecurityContextHolderFilter@53f785df, org.springframework.security.web.header.HeaderWriterFilter@3e063a21, org.springframework.security.web.authentication.logout.LogoutFilter@68d21554, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@306ea73f, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@29ff01df, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@dfa6f48, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@42775280, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@4effab3b, org.springframework.security.web.session.ConcurrentSessionFilter@55456711, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@63c9017b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@905e189, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5e584389, org.springframework.security.web.access.ExceptionTranslationFilter@3b829ef, org.springframework.security.web.access.intercept.AuthorizationFilter@5be86750]
2023-06-19 00:52:54,658 INFO r.c.N.NewsManagerApplicationTests [Test worker] Started NewsManagerApplicationTests in 7.841 seconds (process running for 10.544)
2023-06-19 00:52:55,455 INFO o.e.j.s.Server [Test worker] Stopped Server@bc6288b{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:52:55,455 INFO o.e.j.s.Server [Test worker] Shutdown Server@bc6288b{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:52:55,461 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@c3edf4c{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:52:55,474 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@36b9cb99{/,null,STOPPED}
2023-06-19 00:52:55,475 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@479111ba{/__admin,null,STOPPED}
2023-06-19 00:52:55,521 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.7+0
2023-06-19 00:52:55,531 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@32a2da8c{/__admin,null,AVAILABLE}
2023-06-19 00:52:55,531 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-19 00:52:55,531 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@47c9b8ee{/,null,AVAILABLE}
2023-06-19 00:52:55,535 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@543982ac{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:52:55,536 INFO o.e.j.s.Server [Test worker] Started Server@6f677c34{STARTING}[11.0.15,sto=1000] @11422ms
2023-06-19 00:52:55,674 INFO r.c.N.c.c.CommentControllerTest [Test worker] Starting CommentControllerTest using Java 17.0.7 with PID 58676 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-19 00:52:55,674 DEBUG r.c.N.c.c.CommentControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-19 00:52:55,674 INFO r.c.N.c.c.CommentControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-19 00:52:55,676 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:52:55,676 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@29007172 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:52:55,676 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:52:55,676 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-19 00:52:55,676 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:52:55,676 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@2d21fa63 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:52:56,162 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-19 00:52:56,181 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-19 00:52:56,526 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4b8d9b97, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5284d7f2, org.springframework.security.web.context.SecurityContextHolderFilter@34f195e8, org.springframework.security.web.header.HeaderWriterFilter@7dbfb886, org.springframework.security.web.authentication.logout.LogoutFilter@2053e50a, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@6bfe4dd1, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@54ba8e11, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@5bdf8295, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@d750a, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@52ce11b5, org.springframework.security.web.session.ConcurrentSessionFilter@5519eea8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1a00440d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1a7ba443, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7522ea53, org.springframework.security.web.access.ExceptionTranslationFilter@6ed810f3, org.springframework.security.web.access.intercept.AuthorizationFilter@c038839]
2023-06-19 00:52:56,684 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-19 00:52:56,684 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-19 00:52:56,686 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 1 ms
2023-06-19 00:52:56,864 INFO r.c.N.c.c.CommentControllerTest [Test worker] Started CommentControllerTest in 1.325 seconds (process running for 12.751)
2023-06-19 00:52:57,292 INFO o.e.j.s.Server [Test worker] Stopped Server@6f677c34{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:52:57,293 INFO o.e.j.s.Server [Test worker] Shutdown Server@6f677c34{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:52:57,295 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@543982ac{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:52:57,296 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@47c9b8ee{/,null,STOPPED}
2023-06-19 00:52:57,297 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@32a2da8c{/__admin,null,STOPPED}
2023-06-19 00:52:57,326 INFO o.e.j.s.Server [Test worker] jetty-11.0.15; built: 2023-04-11T18:37:53.775Z; git: 5bc5e562c8d05c5862505aebe5cf83a61bdbcb96; jvm 17.0.7+0
2023-06-19 00:52:57,328 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@131c0796{/__admin,null,AVAILABLE}
2023-06-19 00:52:57,328 INFO o.e.j.s.h.C.ROOT [Test worker] RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2023-06-19 00:52:57,328 INFO o.e.j.s.h.ContextHandler [Test worker] Started o.e.j.s.ServletContextHandler@5c35a03b{/,null,AVAILABLE}
2023-06-19 00:52:57,331 INFO o.e.j.s.AbstractConnector [Test worker] Started NetworkTrafficServerConnector@5dce3e{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:52:57,332 INFO o.e.j.s.Server [Test worker] Started Server@60d6d8d0{STARTING}[11.0.15,sto=1000] @13218ms
2023-06-19 00:52:57,483 INFO r.c.N.c.c.NewsControllerTest [Test worker] Starting NewsControllerTest using Java 17.0.7 with PID 58676 (started by artemaverkov in /Users/artemaverkov/Concurrency/NewsManager/NewsManager)
2023-06-19 00:52:57,484 DEBUG r.c.N.c.c.NewsControllerTest [Test worker] Running with Spring Boot v3.1.0, Spring v6.0.9
2023-06-19 00:52:57,484 INFO r.c.N.c.c.NewsControllerTest [Test worker] The following 1 profile is active: "prod"
2023-06-19 00:52:57,486 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:52:57,486 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@40146340 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:52:57,486 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:52:57,486 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Located environment: name=news-api, profiles=[prod], label=null, version=null, state=null
2023-06-19 00:52:57,486 INFO o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Fetching config from server at : http://localhost:8086
2023-06-19 00:52:57,486 WARN o.s.c.c.c.ConfigServerConfigDataLoader [Test worker] Could not locate PropertySource ([ConfigServerConfigDataResource@6d462dd1 uris = array<String>['http://localhost:8086'], optional = true, profiles = list['default']]): None of labels [] found
2023-06-19 00:52:58,069 INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [Test worker] Bean 'ru.clevertec.NewsManager.repository.UserManagementClient' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-06-19 00:52:58,075 INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [Test worker] Autowired annotation is not supported on static fields: private static java.lang.String ru.clevertec.NewsManager.security.JwtTokenGenerator.SECRET_KEY
2023-06-19 00:52:58,306 INFO o.s.s.w.DefaultSecurityFilterChain [Test worker] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7550b03f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@557b62fc, org.springframework.security.web.context.SecurityContextHolderFilter@f233eb6, org.springframework.security.web.header.HeaderWriterFilter@5552f9e0, org.springframework.security.web.authentication.logout.LogoutFilter@2cf22f15, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@35b2a73e, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@885ac1a, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@65dfb9ed, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@ebbe9f3, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@703be135, org.springframework.security.web.session.ConcurrentSessionFilter@2a6e54c2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@14741927, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@562b6fb0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@68332e0e, org.springframework.security.web.access.ExceptionTranslationFilter@5b58129f, org.springframework.security.web.access.intercept.AuthorizationFilter@708c1263]
2023-06-19 00:52:58,372 INFO o.s.b.t.m.w.SpringBootMockServletContext [Test worker] Initializing Spring TestDispatcherServlet ''
2023-06-19 00:52:58,373 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Initializing Servlet ''
2023-06-19 00:52:58,374 INFO o.s.t.w.s.TestDispatcherServlet [Test worker] Completed initialization in 1 ms
2023-06-19 00:52:58,402 INFO r.c.N.c.c.NewsControllerTest [Test worker] Started NewsControllerTest in 1.066 seconds (process running for 14.288)
2023-06-19 00:52:58,510 INFO o.e.j.s.Server [Test worker] Stopped Server@60d6d8d0{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:52:58,511 INFO o.e.j.s.Server [Test worker] Shutdown Server@60d6d8d0{STOPPING}[11.0.15,sto=1000]
2023-06-19 00:52:58,521 INFO o.e.j.s.AbstractConnector [Test worker] Stopped NetworkTrafficServerConnector@5dce3e{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:8086}
2023-06-19 00:52:58,522 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@5c35a03b{/,null,STOPPED}
2023-06-19 00:52:58,522 INFO o.e.j.s.h.ContextHandler [Test worker] Stopped o.e.j.s.ServletContextHandler@131c0796{/__admin,null,STOPPED}
2023-06-19 00:52:59,005 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2023-06-19 00:52:59,011 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2023-06-19 00:52:59,018 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
